var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);i.prototype=t.prototype,e.prototype=new i},uniLib;!function(e){var t=function(){function t(){}return t.prototype.sendNotification=function(t,i,n){n?e.EventListener.getInstance().dispatchEventWith(n,!1,i):e.EventListener.getInstance().dispatchEventWith(t,!1,i)},t.prototype.onRemove=function(){},t}();e.MvcSender=t,__reflect(t.prototype,"uniLib.MvcSender")}(uniLib||(uniLib={}));var ui;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveFromStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(){this.addUIListener&&this.addUIListener()},t.prototype.onRemoveFromStage=function(){this.destroy()},t.prototype.destroy=function(){this.removeUIListener&&this.removeUIListener(),this.removeActionListener(),this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveFromStage,this)},t.prototype.addActionListener=function(){},t.prototype.removeActionListener=function(){},t.prototype.adaptationWidth=function(){this.width=egret.MainContext.instance.stage.stageWidth},t.prototype.adaptationHeight=function(){this.height=egret.MainContext.instance.stage.stageHeight},t}(eui.Component);e.BaseUI=t,__reflect(t.prototype,"ui.BaseUI",["ui.UIClickInterface","ui.ActionInterface"])}(ui||(ui={}));var uniLib;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){},t.prototype.destory=function(){},t}(e.MvcSender);e.Command=t,__reflect(t.prototype,"uniLib.Command")}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(e){function t(t){var i=e.call(this)||this;return i._name=t,i}return __extends(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),t.prototype.onRemove=function(){},t}(e.MvcSender);e.Proxy=t,__reflect(t.prototype,"uniLib.Proxy")}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e}();e.GameData=t,__reflect(t.prototype,"uniLib.GameData")}(uniLib||(uniLib={}));var ui;!function(e){var t=function(t){function i(e,i,n,o,r,a){var s=t.call(this)||this;return s.scrollDir=1,s.isStartMisTouching=!1,s.isNewMode=!1,s.autoNavigateToMiniprogram=!1,o?s.skinName="AdFullScreenSupperScrollViewSkin":s.skinName="AdFullScreenScrollViewSkin",s.adaptationWidth(),s.adaptationHeight(),s.callback=e,s.thisObj=i,s.cbParams=n,s.isNewMode=r?!0:!1,s.autoNavigateToMiniprogram=!1,uniLib.AdConfig.gameConfig.clickMislead&&(s.autoNavigateToMiniprogram=a?!0:!1),s.init(),s}return __extends(i,t),i.prototype.destroy=function(){if(this.isStartMisTouching=!1,e.AdMisTouchManager.instance.stopMisTouchPos(this.continueBtn),egret.Tween.removeTweens(this.continueBtn),this.returnBtn&&egret.Tween.removeTweens(this.returnBtn),this.updateAnimTimeHandler&&(egret.clearInterval(this.updateAnimTimeHandler),this.updateAnimTimeHandler=null),this.movieClip&&(egret.Tween.removeTweens(this.movieClip),this.movieClip.stop(),this.movieClip.parent&&this.movieClip.parent.removeChild(this.movieClip),this.movieClip=null),this.circle&&(egret.Tween.removeTweens(this.circle),this.circle.parent&&this.circle.parent.removeChild(this.circle),this.circle=null),this.markIcon&&(egret.Tween.removeTweens(this.markIcon),this.markIcon.parent&&this.markIcon.parent.removeChild(this.markIcon),this.markIcon=null),null!=this.topAdScrollView&&this.topAdScrollView.unload(),this.itemRenderList&&this.itemRenderList.length>0)for(var i=0;i<this.itemRenderList.length;i++){var n=this.itemRenderList[i];n.destroy(),n.parent&&n.parent.removeChild(n)}this.itemRenderList=[],t.prototype.destroy.call(this)},i.prototype.addUIListener=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.addEventListener(egret.Event.ENTER_FRAME,this.onUpdateFrame,this)},i.prototype.removeUIListener=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.removeEventListener(egret.Event.ENTER_FRAME,this.onUpdateFrame,this)},i.prototype.init=function(){this.continueBtn.visible=!1,this.returnBtn&&(this.returnBtn.visible=!1),this.timeDown=3,this.timerLayer&&(this.timerLayer.visible=!0),this.timeLabel&&(this.timeLabel.text=this.timeDown.toString()),this.timerHandler=null,this.onLoad();var e=this;if(this.autoNavigateToMiniprogram)var t=egret.setTimeout(function(){egret.clearTimeout(t),e.randomNavigateToMiniProgram()},this,200);else this.startDownTime()},i.prototype.onLoad=function(){var t=uniLib.AdConfig.itemDataList;if(null!=t){var i=!0,n=0;this.itemRenderList=new Array;for(var o=0;o<t.length;o++){var r=t[o],a=null;if(this.isNewMode){var s=o%6+1,l="ad-itembar"+s;a=new e.AdItemDataRender(r,"AdNewFullScreenItemSkin",!1,i,n,!1,l)}else a=new e.AdItemDataRender(r,"AdFullScreenItemSkin",!0,i,n,!1);this.adGroup.addChild(a),this.itemRenderList.push(a)}if(this.itemRenderList.length%2!=0){var r=t[0],a=null;if(this.isNewMode){var s=1,l="ad-itembar"+s;a=new e.AdItemDataRender(r,"AdNewFullScreenItemSkin",!1,i,n,!1,l)}else a=new e.AdItemDataRender(r,"AdFullScreenItemSkin",!0,i,n,!1);this.adGroup.addChild(a),this.itemRenderList.push(a)}this.topAdScrollView&&this.topAdScrollView.load(1,!0,0,"AdItemSkin",!1),this.onUpdateFingerAnim(),this.updateAnimTimeHandler=egret.setInterval(this.onUpdateFingerAnim,this,3e3)}},i.prototype.onUpdateFingerAnim=function(){if(!(this.itemRenderList.length<0)&&(this.movieClip&&(egret.Tween.removeTweens(this.movieClip),this.movieClip.stop(),this.movieClip.parent&&this.movieClip.parent.removeChild(this.movieClip),this.movieClip=null),this.circle&&(egret.Tween.removeTweens(this.circle),this.circle.parent&&this.circle.parent.removeChild(this.circle),this.circle=null),this.markIcon&&(egret.Tween.removeTweens(this.markIcon),this.markIcon.parent&&this.markIcon.parent.removeChild(this.markIcon),this.markIcon=null),uniLib.AdConfig.gameConfig.clickMislead)){var e=this.itemRenderList.length-1,t=uniLib.MathUtil.RandomNumBoth(0,e),i=this.itemRenderList[t];this.circle=new eui.Image("ad-guide-circle"),this.circle.touchEnabled=!1,i.addChild(this.circle),this.circle.x=.5*i.width,this.circle.y=.5*i.height,this.circle.anchorOffsetX=39.5,this.circle.anchorOffsetY=39.5,this.movieClip=uniLib.Utils.creatMovieClip("finger_effect_json","finger_effect_png","finger",-1),this.movieClip.x=.5*i.width,this.movieClip.y=.5*i.height,this.movieClip.touchEnabled=!1,i.addChild(this.movieClip),this.movieClip.gotoAndPlay(0,-1),this.circle.scaleX=this.circle.scaleY=1,egret.Tween.get(this.circle,{loop:!0}).to({scaleX:1,scaleY:1},300).to({scaleX:.5,scaleY:.5},300).to({scaleX:1,scaleY:1},300),t=this.itemRenderList.length-t,t>=this.itemRenderList.length&&(t=this.itemRenderList.length-1),0>t&&(t=0),i=this.itemRenderList[t],this.markIcon=new eui.Image("ad-icon-mark"),this.markIcon.touchEnabled=!1,i.addChild(this.markIcon),this.markIcon.right=0,this.markIcon.alpha=1}},i.prototype.onUpdateFrame=function(){if(!(this.adScroller.viewport.contentWidth<=0||this.adScroller.viewport.contentHeight<=0)){var e=0;if(e=uniLib.Global.designWidth>uniLib.Global.designHeight?this.adScroller.viewport.contentWidth-this.adScroller.viewport.width:this.adScroller.viewport.contentHeight-this.adScroller.viewport.height,!(0>=e)){var t=1;uniLib.Global.designWidth>uniLib.Global.designHeight?this.scrollDir>0?(this.adScroller.viewport.scrollH+=t,this.adScroller.viewport.scrollH>=e&&(this.adScroller.viewport.scrollH=e,this.scrollDir=-1)):(this.adScroller.viewport.scrollH-=t,this.adScroller.viewport.scrollH<=0&&(this.adScroller.viewport.scrollH=0,this.scrollDir=1)):this.scrollDir>0?(this.adScroller.viewport.scrollV+=t,this.adScroller.viewport.scrollV>=e&&(this.adScroller.viewport.scrollV=e,this.scrollDir=-1)):(this.adScroller.viewport.scrollV-=t,this.adScroller.viewport.scrollV<=0&&(this.adScroller.viewport.scrollV=0,this.scrollDir=1))}}},i.prototype.startDownTime=function(){this.timeLabel?this.timerHandler=egret.setInterval(this.onUpdateTime,this,1e3):this.endDownTime()},i.prototype.endDownTime=function(){uniLib.AdPlat.instance.hideBanner(),this.timerLayer&&(this.timerLayer.visible=!1),this.continueBtn.visible=!0,this.continueBtn.alpha=1,this.timerHandler&&(egret.clearInterval(this.timerHandler),this.timerHandler=null),this.startMisTouchPos()},i.prototype.onUpdateTime=function(){--this.timeDown,this.timeDown<0&&(this.timeDown=0),this.timeLabel&&(this.timeLabel.text=this.timeDown.toString()),0==this.timeDown&&this.endDownTime()},i.prototype.onReturn=function(){uniLib.AdPlat.instance.hideBanner(),this.callback&&this.callback.call(this.thisObj,this.cbParams),this.callback=null,this.thisObj=null,this.cbParams=null,egret.Tween.removeTweens(this.continueBtn),GX.PopUpManager.removePopUp(this),window.platform.customInterface("showGameClubButton"),uniLib.EventListener.getInstance().dispatchEventWith("CLOSED_FULLSCREEN_AD_VIEW",!1,null)},i.prototype.randomNavigateToMiniProgram=function(){if(!(uniLib.AdConfig.itemDataList.length<=0)){var e=0,t=uniLib.AdConfig.itemDataList.length,i=uniLib.MathUtil.random(e,t);0>i?i=0:i>=uniLib.AdConfig.itemDataList.length&&(i=uniLib.AdConfig.itemDataList.length-1);var n=uniLib.AdConfig.itemDataList[i],o=this;window.platform.customInterface("navigateToMiniProgram",n,function(e,t){1==e&&(uniLib.Global.reportAldEvent("导出小游戏"+t.title),uniLib.Global.reportUmaEvent("导出小游戏"+t.title)),o.startDownTime()},this)}},i.prototype.onNavigateToMiniProgramCallback=function(e,t){1==e&&(uniLib.Global.reportAldEvent("导出小游戏"+t.title),uniLib.Global.reportUmaEvent("导出小游戏"+t.title)),this.onReturn()},i.prototype.onClickTap=function(e){if(e.target==this.continueBtn){if(this.isStartMisTouching)return;if(this.autoNavigateToMiniprogram)this.onReturn();else{var t=0;if(uniLib.AdConfig.gameConfig.clickMislead&&(t=uniLib.MathUtil.randomProbability([50,50])),0==t)this.onReturn();else{var i=0,n=uniLib.AdConfig.itemDataList.length,o=uniLib.MathUtil.random(i,n);0>o?o=0:o>=uniLib.AdConfig.itemDataList.length&&(o=uniLib.AdConfig.itemDataList.length-1);var r=uniLib.AdConfig.itemDataList[o];window.platform.customInterface("navigateToMiniProgram",r,this.onNavigateToMiniProgramCallback,this)}}}else this.returnBtn&&e.target==this.returnBtn&&this.onReturn()},i.prototype.startMisTouchPos=function(){this.isStartMisTouching=!1,this.continueBtn.y=uniLib.Global.screenHeight-150,e.AdMisTouchManager.instance.startMisTouchPos(this.continueBtn,this.onStopMisTouchPos,this)?(this.continueBtn.visible=!0,this.continueBtn.alpha=1,this.isStartMisTouching=!0):(this.continueBtn.visible=!0,this.continueBtn.alpha=0,egret.Tween.get(this.continueBtn).wait(800).to({alpha:1},500))},i.prototype.onStopMisTouchPos=function(e){var t=this;if(e){var i=.5*uniLib.Global.screenHeight;uniLib.Global.designWidth<uniLib.Global.designHeight&&(i=uniLib.Global.screenHeight-400),egret.Tween.get(this.continueBtn).wait(1200).to({y:i},25).call(function(){t.isStartMisTouching=!1},this)}},i}(e.BaseUI);e.AdFullScreenScrollView=t,__reflect(t.prototype,"ui.AdFullScreenScrollView")}(ui||(ui={}));var uniLib;!function(e){var t=function(){function e(){}return e}();e.AdGameBoxData=t,__reflect(t.prototype,"uniLib.AdGameBoxData");var i=function(){function e(){}return e}();e.AdGameBoxItemData=i,__reflect(i.prototype,"uniLib.AdGameBoxItemData");var n=function(){function e(){}return e}();e.AdGameBoxConfig=n,__reflect(n.prototype,"uniLib.AdGameBoxConfig");var o=function(o){function r(e,t,i){var n=o.call(this)||this;n.skinName="AdGameBoxSkin",n.adaptationWidth(),n.adaptationHeight(),n.tryPlayGameTime=t,n.userTryPlayGameReward=e,n.userBoxData=[];for(var r=0;r<i.length;r++)n.userBoxData.push({reward:i[r].reward,tryTimes:i[r].tryTimes});return n.tryPlayGameItemRenderer=null,n.startGameTimestamp=null,n.tryPlayTimeDescLabel.text="",n.totalDescLabel.text="",n.load(),n}return __extends(r,o),r.prototype.addUIListener=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},r.prototype.removeUIListener=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},r.prototype.destroy=function(){this.unload(),o.prototype.destroy.call(this)},r.prototype.load=function(){this.itemRenderList=[],this.loadConfig();for(var t=0;t<this.gameList.length;t++){var i=this.gameList[t];if(!i.isPlayed){var n=new e.AdGameBoxItemRenderer(this,i);this.adGroup.addChild(n),this.itemRenderList.push(n)}}for(var t=0;t<this.gameList.length;t++){var i=this.gameList[t];if(i.isPlayed){var n=new e.AdGameBoxItemRenderer(this,i);this.adGroup.addChild(n),this.itemRenderList.push(n)}}this.thumb.mask=this.maskRect,this.maskRect.width=0,this.refreshBoxData()},r.prototype.unload=function(){for(var e=0;e<this.itemRenderList.length;e++){var t=this.itemRenderList[e];t.destroy(),t.parent&&t.parent.removeChild(t)}this.adGroup.removeChildren(),this.itemRenderList.length=0},r.prototype.loadConfig=function(){var o=!0,r=parseInt(e.Utils.getLocalStorage(e.Global.initOpt.gameName+"_AdGameBox_createTimestamp","0")),a=r,s=(new Date).valueOf(),l=GX.timestampToString(a),c=GX.timestampToString(s),h=l.split(" "),u=c.split(" ");h=h[0].split("-"),u=u[0].split("-"),parseInt(u[0])-parseInt(h[0])==0&&parseInt(u[1])-parseInt(h[1])==0&&parseInt(u[2])-parseInt(h[2])==0&&(o=!1),this.config=new n,this.gameList=[];var d=[];this.config.createTimestamp=s,this.config.tryTimesTotal=0;for(var p=e.AdConfig.itemDataList,g=0;g<p.length;g++){var m=p[g];if(m.tryPlayEnable){var f=new i;f.id=g+1,f.appid=m.appid,f.img=m.img,f.path=m.path,f.title=m.title,f.isPlayed=!1,this.gameList.push(f)}}for(var g=0;g<this.userBoxData.length;g++){var v=this.userBoxData[g],b=new t;b.reward=v.reward,b.tryTimes=v.tryTimes,b.received=!1,d.push(b)}if(!o){this.config.createTimestamp=r,this.config.tryTimesTotal=parseInt(e.Utils.getLocalStorage(e.Global.initOpt.gameName+"_AdGameBox_tryTimesTotal","0"));var C=e.Utils.getLocalStorage(e.Global.initOpt.gameName+"_AdGameBox_playedGameList",""),y=[];C.length>0&&(y=JSON.parse(C));for(var g=0;g<this.gameList.length;g++)for(var L=this.gameList[g],T=0;T<y.length;T++){var _=y[T];if(_.appid==L.appid&&_.id==L.id){L.isPlayed=!0;break}}C=e.Utils.getLocalStorage(e.Global.initOpt.gameName+"_AdGameBox_gameBoxList","");var w=[];if(C.length>0){w=JSON.parse(C);for(var g=0;g<d.length;g++)d[g].received=w[g].received}}this.config.boxData=d,this.saveConfig()},r.prototype.saveConfig=function(){e.Utils.setLocalStorage(e.Global.initOpt.gameName+"_AdGameBox_createTimestamp",this.config.createTimestamp.toString()),e.Utils.setLocalStorage(e.Global.initOpt.gameName+"_AdGameBox_tryTimesTotal",this.config.tryTimesTotal.toString());for(var t=[],i=[],n=0;n<this.config.boxData.length;n++){var o=this.config.boxData[n];t.push({received:o.received})}for(var n=0;n<this.gameList.length;n++){var r=this.gameList[n];r.isPlayed&&i.push({id:r.id,appid:r.appid})}e.Utils.setLocalStorage(e.Global.initOpt.gameName+"_AdGameBox_gameBoxList",JSON.stringify(t)),e.Utils.setLocalStorage(e.Global.initOpt.gameName+"_AdGameBox_playedGameList",JSON.stringify(i))},r.prototype.onClickTap=function(t){if(t.target==this.closeBtn||t.target==this.skin.touchLayer)e.AdPlat.instance.hideAdGameBox();else if(t.target==this.skin.gameBoxBtn1){var i=this.skin.gameBoxBtn1;this.config.boxData[0].received=!0,this.showBoxReward(this.config.boxData[0].reward),i.enabled=!1,i.touchEnabled=!1,egret.Tween.removeTweens(i),i.scaleX=i.scaleY=1;var n="finishLabel1",o=this.skin[n];o.visible=!0;var r="rewardLabel1",a=this.skin[r];a.visible=!1,this.saveConfig()}else if(t.target==this.skin.gameBoxBtn2){var i=this.skin.gameBoxBtn2;this.config.boxData[1].received=!0,this.showBoxReward(this.config.boxData[1].reward),i.enabled=!1,i.touchEnabled=!1,egret.Tween.removeTweens(i),i.scaleX=i.scaleY=1;var n="finishLabel2",o=this.skin[n];o.visible=!0;var r="rewardLabel2",a=this.skin[r];a.visible=!1,this.saveConfig()}else if(t.target==this.skin.gameBoxBtn3){var i=this.skin.gameBoxBtn3;this.config.boxData[2].received=!0,this.showBoxReward(this.config.boxData[2].reward),i.enabled=!1,i.touchEnabled=!1,egret.Tween.removeTweens(i),i.scaleX=i.scaleY=1;var n="finishLabel3",o=this.skin[n];o.visible=!0;var r="rewardLabel3",a=this.skin[r];a.visible=!1,this.saveConfig()}else if(t.target==this.skin.gameBoxBtn4){var i=this.skin.gameBoxBtn4;this.config.boxData[3].received=!0,this.showBoxReward(this.config.boxData[3].reward),i.enabled=!1,i.touchEnabled=!1,egret.Tween.removeTweens(i),i.scaleX=i.scaleY=1;var n="finishLabel4",o=this.skin[n];o.visible=!0;var r="rewardLabel4",a=this.skin[r];a.visible=!1,this.saveConfig()}else if(t.target==this.skin.gameBoxBtn5){var i=this.skin.gameBoxBtn5;this.config.boxData[4].received=!0,this.showBoxReward(this.config.boxData[4].reward),i.enabled=!1,i.touchEnabled=!1,egret.Tween.removeTweens(i),i.scaleX=i.scaleY=1;var n="finishLabel5",o=this.skin[n];o.visible=!0;var r="rewardLabel5",a=this.skin[r];a.visible=!1,this.saveConfig()}},r.prototype.notityStartTryPlayGame=function(e){console.log("notityStartTryPlayGame - 开始试玩游戏通告"),this.startGameTimestamp=(new Date).valueOf(),this.tryPlayGameItemRenderer=e},r.prototype.notityExitTryPlayGame=function(){if(null!=this.startGameTimestamp&&null!=this.tryPlayGameItemRenderer){console.log("notityExitTryPlayGame 从试玩游戏中退回来");var e=(new Date).valueOf();if(!(e-this.startGameTimestamp<this.tryPlayGameTime)){for(var t=0;t<this.itemRenderList.length;t++){var i=this.itemRenderList[t];if(i==this.tryPlayGameItemRenderer){var n=this.tryPlayGameItemRenderer.adData;this.config.tryTimesTotal++;var o=n.isPlayed;n.isPlayed=!0,this.tryPlayGameItemRenderer.updateData(n),this.saveConfig(),this.refreshBoxData(),o||(i.parent&&i.parent.removeChild(i),this.adGroup.addChild(i),this.showTryPlayReward(this.userTryPlayGameReward));break}}this.startGameTimestamp=null,this.tryPlayGameItemRenderer=null}}},r.prototype.refreshBoxData=function(){for(var e=0,t=0;t<this.config.boxData.length;t++){var i=this.config.boxData[t],n="gameBoxBtn"+(t+1).toString(),o="rewardLabel"+(t+1).toString(),r="finishLabel"+(t+1).toString(),a=this.skin[n],s=this.skin[o],l=this.skin[r];s.text=i.tryTimes.toString(),i.received?(a.enabled=!1,s.visible=!1,l.visible=!0):(a.enabled=!0,s.visible=!0,l.visible=!1),i.tryTimes>e&&(e=i.tryTimes)}for(var t=this.config.boxData.length;5>t;t++){var c="boxGroup"+(t+1).toString(),h=this.skin[c];h&&h.parent&&h.parent.removeChild(h)}this.maskRect.width=this.progressBarGroup.width*(this.config.tryTimesTotal/e);for(var t=0;t<this.config.boxData.length;t++){var i=this.config.boxData[t],n="gameBoxBtn"+(t+1).toString(),a=this.skin[n];egret.Tween.removeTweens(a),a.touchEnabled=!1,!i.received&&i.tryTimes<=this.config.tryTimesTotal&&(a.touchEnabled=!0,a.scaleX=a.scaleY=1,egret.Tween.get(a,{loop:!0}).to({scaleX:1.2,scaleY:1.2},200,egret.Ease.sineIn).to({scaleX:1,scaleY:1},250,egret.Ease.sineOut))}this.totalDescLabel.text="累计试玩可得宝箱奖励（"+this.config.tryTimesTotal+"次）"},r}(ui.BaseUI);e.AdGameBox=o,__reflect(o.prototype,"uniLib.AdGameBox")}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(t){function i(e,i){var n=t.call(this)||this;n.skinName="AdGameBoxItemSkin",n.adGameBox=e,n.data=i,n.navigateTimeout=null;var o=Math.floor(e.tryPlayGameTime/1e3);return n.descTimeLabel.text="试玩"+o.toString()+"秒",n.rewardValueLabel.text="x"+e.userTryPlayGameReward.toString(),n.rewardDescLabel.text="试玩"+o.toString()+"秒",n.load(),n}return __extends(i,t),i.prototype.destroy=function(){this.tryPlayBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTryPlayGame,this)},Object.defineProperty(i.prototype,"adData",{get:function(){return this.data},enumerable:!0,configurable:!0}),i.prototype.updateData=function(e){null!=e&&(this.data=e),this.data.isPlayed?(this.redPointRect.visible=!1,this.staticGroup.visible=!1,this.dynamicGroup.visible=!0):(this.redPointRect.visible=!0,this.staticGroup.visible=!0,this.dynamicGroup.visible=!1)},i.prototype.load=function(){this.data.img&&this.data.img.length>0&&e.ResLoadMgr.instance.loadRemoteImage(this.data.img,this.onLoaded,this)},i.prototype.onLoaded=function(e,t){var i=this.data;null==t&&console.log("请求图片失败",e),this.adImage.texture=t,this.adLabel&&(i.title&&i.title.length>0?this.adLabel.text=i.title:this.adLabel.text=""),this.updateData(),this.tryPlayBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTryPlayGame,this)},i.prototype.onTryPlayGame=function(){this.navigateTimeout||(this.navigateTimeout=egret.setTimeout(this.onNavigateTimeout,this,3e3),this.navigateToMiniProgram())},i.prototype.onNavigateTimeout=function(){this.navigateTimeout&&(egret.clearTimeout(this.navigateTimeout),this.navigateTimeout=null)},i.prototype.navigateToMiniProgram=function(){window.platform.customInterface("navigateToMiniProgram",this.data,this.onNavigateToMiniProgramCallback,this)},i.prototype.onNavigateToMiniProgramCallback=function(t,i){this.navigateTimeout&&(egret.clearTimeout(this.navigateTimeout),this.navigateTimeout=null),1==t&&(e.Global.reportAldEvent("试玩小游戏"+i.title),e.Global.reportUmaEvent("试玩小游戏"+i.title),this.adGameBox.notityStartTryPlayGame(this))},i}(eui.Component);e.AdGameBoxItemRenderer=t,__reflect(t.prototype,"uniLib.AdGameBoxItemRenderer")}(uniLib||(uniLib={}));var ui;!function(e){var t=function(t){function i(e,i,n){var o=t.call(this)||this;return o.scrollDir=1,o.isStartMisTouching=!1,o.skinName="AdGameFinishScrollViewSkin",o.adaptationWidth(),o.adaptationHeight(),o.callback=e,o.thisObj=i,o.cbParams=n,o.init(),o}return __extends(i,t),i.prototype.destroy=function(){if(this.isStartMisTouching=!1,e.AdMisTouchManager.instance.stopMisTouchPos(this.continueBtn),egret.Tween.removeTweens(this.continueBtn),this.movieClip&&(egret.Tween.removeTweens(this.movieClip),this.movieClip.stop(),this.movieClip.parent&&this.movieClip.parent.removeChild(this.movieClip),this.movieClip=null),this.circle&&(egret.Tween.removeTweens(this.circle),this.circle.parent&&this.circle.parent.removeChild(this.circle),this.circle=null),this.markIcon&&(egret.Tween.removeTweens(this.markIcon),this.markIcon.parent&&this.markIcon.parent.removeChild(this.markIcon),this.markIcon=null),this.timerHandler&&(egret.clearInterval(this.timerHandler),this.timerHandler=null),this.itemRenderList&&this.itemRenderList.length>0)for(var i=0;i<this.itemRenderList.length;i++){var n=this.itemRenderList[i];n.destroy(),n.parent&&n.parent.removeChild(n)}this.itemRenderList=[],t.prototype.destroy.call(this)},i.prototype.addUIListener=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeUIListener=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.init=function(){this.continueBtn.visible=!0,this.onUpdateTime(),this.startMisTouchPos()},i.prototype.onLoad=function(){var t=uniLib.AdConfig.itemDataList;if(null!=t){if(this.itemRenderList&&this.itemRenderList.length>0){for(var i=0;i<this.itemRenderList.length;i++){var n=this.itemRenderList[i];n.destroy(),n.parent&&n.parent.removeChild(n)}this.itemRenderList=[]}this.itemRenderList=new Array,this.adGroup.removeChildren();for(var i=0;6>i&&!(i>=t.length);i++){var o=i%6+1,r="ad-itembar"+o,a=t[i],n=new e.AdGameItemDataRender(a,"AdGameItemSkin",r);this.adGroup.addChild(n),this.itemRenderList.push(n)}if(this.itemRenderList.length%2!=0){var o=1,r="ad-itembar"+o,a=t[0],n=new e.AdGameItemDataRender(a,"AdGameItemSkin",r);this.adGroup.addChild(n),this.itemRenderList.push(n)}null==this.timerHandler&&(this.timerHandler=egret.setInterval(this.onUpdateTime,this,3e3))}},i.prototype.onUpdateTime=function(){if(this.onLoad(),this.movieClip&&(egret.Tween.removeTweens(this.movieClip),this.movieClip.stop(),this.movieClip.parent&&this.movieClip.parent.removeChild(this.movieClip),this.movieClip=null),this.circle&&(egret.Tween.removeTweens(this.circle),this.circle.parent&&this.circle.parent.removeChild(this.circle),this.circle=null),this.markIcon&&(egret.Tween.removeTweens(this.markIcon),this.markIcon.parent&&this.markIcon.parent.removeChild(this.markIcon),this.markIcon=null),!(this.itemRenderList.length<0)&&uniLib.AdConfig.gameConfig.clickMislead){var e=uniLib.MathUtil.RandomNumBoth(0,6);e>=this.itemRenderList.length&&(e=this.itemRenderList.length-1),0>e&&(e=0);var t=this.itemRenderList[e];this.circle=new eui.Image("ad-guide-circle"),this.circle.touchEnabled=!1,t.addChild(this.circle),this.circle.x=.5*t.width,this.circle.y=.5*t.height,this.circle.anchorOffsetX=39.5,this.circle.anchorOffsetY=39.5,this.movieClip=uniLib.Utils.creatMovieClip("finger_effect_json","finger_effect_png","finger",-1),this.movieClip.x=.5*t.width,this.movieClip.y=.5*t.height,this.movieClip.touchEnabled=!1,t.addChild(this.movieClip),this.movieClip.gotoAndPlay(0,-1),this.circle.scaleX=this.circle.scaleY=1,egret.Tween.get(this.circle,{loop:!0}).to({scaleX:1,scaleY:1},300).to({scaleX:.5,scaleY:.5},300).to({scaleX:1,scaleY:1},300),e=6-e,e>=this.itemRenderList.length&&(e=this.itemRenderList.length-1),0>e&&(e=0),t=this.itemRenderList[e],this.markIcon=new eui.Image("ad-icon-mark"),this.markIcon.touchEnabled=!1,t.addChild(this.markIcon),this.markIcon.right=0,this.markIcon.alpha=1}},i.prototype.onUpdateFrame=function(){if(!(this.adScroller.viewport.contentWidth<=0||this.adScroller.viewport.contentHeight<=0)){var e=0;if(e=uniLib.Global.designWidth>uniLib.Global.designHeight?this.adScroller.viewport.contentWidth-this.adScroller.viewport.width:this.adScroller.viewport.contentHeight-this.adScroller.viewport.height,!(0>=e)){var t=1;uniLib.Global.designWidth>uniLib.Global.designHeight?this.scrollDir>0?(this.adScroller.viewport.scrollH+=t,this.adScroller.viewport.scrollH>=e&&(this.adScroller.viewport.scrollH=e,this.scrollDir=-1)):(this.adScroller.viewport.scrollH-=t,this.adScroller.viewport.scrollH<=0&&(this.adScroller.viewport.scrollH=0,this.scrollDir=1)):this.scrollDir>0?(this.adScroller.viewport.scrollV+=t,this.adScroller.viewport.scrollV>=e&&(this.adScroller.viewport.scrollV=e,this.scrollDir=-1)):(this.adScroller.viewport.scrollV-=t,this.adScroller.viewport.scrollV<=0&&(this.adScroller.viewport.scrollV=0,this.scrollDir=1))}}},i.prototype.onClose=function(){uniLib.AdPlat.instance.hideBanner(),this.callback&&this.callback.call(this.thisObj,this.cbParams),this.callback=null,this.thisObj=null,this.cbParams=null,egret.Tween.removeTweens(this.continueBtn),GX.PopUpManager.removePopUp(this),window.platform.customInterface("showGameClubButton"),uniLib.EventListener.getInstance().dispatchEventWith("CLOSED_FULLSCREEN_AD_VIEW",!1,null)},i.prototype.randomNavigateToMiniProgram=function(){if(!(uniLib.AdConfig.itemDataList.length<=0)){var e=0,t=uniLib.AdConfig.itemDataList.length,i=uniLib.MathUtil.random(e,t);0>i?i=0:i>=uniLib.AdConfig.itemDataList.length&&(i=uniLib.AdConfig.itemDataList.length-1);var n=uniLib.AdConfig.itemDataList[i];window.platform.customInterface("navigateToMiniProgram",n,function(e,t){1==e&&(uniLib.Global.reportAldEvent("导出小游戏"+t.title),uniLib.Global.reportUmaEvent("导出小游戏"+t.title))},this)}},i.prototype.onNavigateToMiniProgramCallback=function(e,t){1==e&&(uniLib.Global.reportAldEvent("导出小游戏"+t.title),uniLib.Global.reportUmaEvent("导出小游戏"+t.title))},i.prototype.onClickTap=function(e){if(e.target==this.continueBtn){if(this.isStartMisTouching)return;this.onClose()}},i.prototype.startMisTouchPos=function(){this.isStartMisTouching=!1,this.continueBtn.y=uniLib.Global.screenHeight-150,e.AdMisTouchManager.instance.startMisTouchPos(this.continueBtn,this.onStopMisTouchPos,this)?(this.continueBtn.visible=!0,this.continueBtn.alpha=1,this.isStartMisTouching=!0):(this.continueBtn.visible=!0,this.continueBtn.alpha=0,egret.Tween.get(this.continueBtn).wait(800).to({alpha:1},500))},i.prototype.onStopMisTouchPos=function(e){var t=this;if(e){var i=.5*uniLib.Global.screenHeight;uniLib.Global.designWidth<uniLib.Global.designHeight&&(i=uniLib.Global.screenHeight-400),egret.Tween.get(this.continueBtn).wait(1200).to({y:i},25).call(function(){t.isStartMisTouching=!1},this)}},i}(e.BaseUI);e.AdGameFinishScrollView=t,__reflect(t.prototype,"ui.AdGameFinishScrollView")}(ui||(ui={}));var ui;!function(e){var t=function(e){function t(t,i,n){var o=e.call(this)||this;return o.isTouchBegin=!1,o.isTouchCancel=!1,o.skinName=i,o.data=t,o.adbg&&n&&n.length>0&&(o.adbg.source=n),o.load(),o}return __extends(t,e),t.prototype.destroy=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancel,this)},t.prototype.load=function(){this.data.img&&this.data.img.length>0&&uniLib.ResLoadMgr.instance.loadRemoteImage(this.data.img,this.onLoaded,this)},t.prototype.onLoaded=function(e,t){var i=this.data;null==t&&console.log("请求图片失败",e),this.adImage.texture=t,this.adLabel&&(i.title&&i.title.length>0?this.adLabel.text=i.title:this.adLabel.text=""),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancel,this)},t.prototype.onTouchBegin=function(e){this.isTouchBegin=!0,this.isTouchCancel=!1,egret.MainContext.instance.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},t.prototype.onTouchEnd=function(e){egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.isTouchBegin&&this.isTouchCancel&&window.platform.customInterface("navigateToMiniProgram",this.data,this.onNavigateToMiniProgramCallback,this),this.isTouchBegin=!1,this.isTouchCancel=!1},t.prototype.onTouchCancel=function(e){this.isTouchBegin&&(this.isTouchCancel=!0)},t.prototype.onClickTap=function(e){this.navigateToMiniProgram()},t.prototype.navigateToMiniProgram=function(){window.platform.customInterface("navigateToMiniProgram",this.data,this.onNavigateToMiniProgramCallback,this)},t.prototype.onNavigateToMiniProgramCallback=function(e,t){1==e&&(uniLib.Global.reportAldEvent("导出小游戏"+t.title),uniLib.Global.reportUmaEvent("导出小游戏"+t.title))},t}(eui.Component);e.AdGameItemDataRender=t,__reflect(t.prototype,"ui.AdGameItemDataRender")}(ui||(ui={}));var ui;!function(e){var t=function(){function e(e,t,i,n){this.processNavigateCallback=!1,this.ignoreFingerAnim=!0,this.isNewMode=!1,null==t&&(t=0),this.animType=t,null==i&&(i=!1),uniLib.AdConfig.gameConfig.clickMislead&&(this.processNavigateCallback=i?!0:!1),this.isNewMode=n?!0:!1,this.init(e)}return e.prototype.destroy=function(){if(this.movieClip&&(egret.Tween.removeTweens(this.movieClip),this.movieClip.stop(),this.movieClip.parent&&this.movieClip.parent.removeChild(this.movieClip),this.movieClip=null),this.circle&&(egret.Tween.removeTweens(this.circle),this.circle.parent&&this.circle.parent.removeChild(this.circle),this.circle=null),null!=this.adTimer&&(egret.clearInterval(this.adTimer),this.adTimer=null),this.elements&&this.elements.length>0){for(var e=0;e<this.elements.length;e++){var t=this.elements[e];t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),egret.Tween.removeTweens(t)}this.elements=[]}this.elements=null},e.prototype.init=function(e){this.elements=new Array;for(var t=1;10>=t;t++){var i="adBtn"+t,n=e.skin[i];if(null==n)break;this.elements.push(n),n.visible=!1,n.enabled=!1;var o=n.skin.adLabel;o&&(o.stroke=2,o.textColor=16777215),n.x=n.x/uniLib.Global.designWidth*uniLib.Global.screenWidth,n.y=n.y/uniLib.Global.designHeight*uniLib.Global.screenHeight}},e.prototype.getRandomAdData=function(){if(null==uniLib.AdConfig.itemDataList||uniLib.AdConfig.itemDataList.length<=0)return null;for(var t=[],i=0;i<uniLib.AdConfig.itemDataList.length;i++){for(var n=uniLib.AdConfig.itemDataList[i],o=!1,r=0;r<t.length;r++)if(t[r].appid==n.appid){o=!0;
break}o||(null==n.priority||1!=n.priority)&&t.push(n)}if(null==t||t.length<=0)return null;if(e.ADGRID_CUR_INDEX<0){var a=0,s=t.length;e.ADGRID_CUR_INDEX=uniLib.MathUtil.RandomNumBoth(a,s-1)}else++e.ADGRID_CUR_INDEX;e.ADGRID_CUR_INDEX<0?e.ADGRID_CUR_INDEX=0:e.ADGRID_CUR_INDEX>=t.length&&(e.ADGRID_CUR_INDEX=0);var l=t[e.ADGRID_CUR_INDEX];return l},e.prototype.findButtonAdByUrl=function(e){if(null==this.elements)return null;for(var t=[],i=0;i<this.elements.length;i++){var n=this.elements[i];n.adurl&&n.adurl==e&&t.push(n)}return t},e.prototype.loadButtonAd=function(e){var t=this.getRandomAdData();return null==t?(e.visible=!1,void(e.enabled=!1)):(e.adData=t,e.adurl=t.img,e.skin.adLabel&&(e.skin.adLabel.text=t.title),void uniLib.ResLoadMgr.instance.loadRemoteImage(t.img,this.onLoaded,this))},e.prototype.load=function(e){if(!(null==this.elements||this.elements.length<=0)){this.ignoreFingerAnim=e?!0:!1;for(var t=function(e){var t=i.elements[e],n=uniLib.MathUtil.random(50,1e3),o=i.animType;egret.setTimeout(function(e){var t=e[0],i=t.scaleX,n=t.scaleY,r=uniLib.MathUtil.random(600,800);1==o?egret.Tween.get(t,{loop:!0}).to({scaleX:i-.2,scaleY:n-.2},r).to({scaleX:i,scaleY:n},r):2==o?egret.Tween.get(t,{loop:!0}).to({rotation:40},r).to({rotation:-40},r).to({rotation:0},.5*r):0==o&&egret.Tween.get(t,{loop:!0}).to({scaleX:i-.2,scaleY:n-.2},r).to({scaleX:i,scaleY:n},r).to({rotation:40},r).to({rotation:-40},r).to({rotation:0},.5*r)},i,n,[t]),t.addEventListener(egret.TouchEvent.TOUCH_TAP,i.onClickTap,i),i.loadButtonAd(t)},i=this,n=0;n<this.elements.length;n++)t(n);if(this.adTimer=egret.setInterval(this.updateAdButton,this,3e3),!this.ignoreFingerAnim&&uniLib.AdConfig.gameConfig.clickMislead){var o=this.elements.length-1,r=uniLib.MathUtil.RandomNumBoth(0,o),a=this.elements[r];this.circle=new eui.Image("ad-guide-circle"),this.circle.touchEnabled=!1,a.addChild(this.circle),this.circle.x=.5*a.width,this.circle.y=.5*a.height,this.circle.anchorOffsetX=39.5,this.circle.anchorOffsetY=39.5,this.movieClip=uniLib.Utils.creatMovieClip("finger_effect_json","finger_effect_png","finger",-1),this.movieClip.x=.5*a.width,this.movieClip.y=.5*a.height,this.movieClip.touchEnabled=!1,a.addChild(this.movieClip),this.movieClip.gotoAndPlay(0,-1),this.circle.scaleX=this.circle.scaleY=1,egret.Tween.get(this.circle,{loop:!0}).to({scaleX:1,scaleY:1},300).to({scaleX:.5,scaleY:.5},300).to({scaleX:1,scaleY:1},300)}}},e.prototype.onLoaded=function(e,t){var i=this.findButtonAdByUrl(e);if(null!=i)for(var n=0;n<i.length;n++){var o=i[n];o.visible=!0,o.enabled=!0;var r=o.adData;o.skin.adImage.texture=t,o.skin.adLabel&&(o.skin.adLabel.text=r.title)}},e.prototype.updateAdButton=function(){if(this.movieClip&&(egret.Tween.removeTweens(this.movieClip),this.movieClip.stop(),this.movieClip.parent&&this.movieClip.parent.removeChild(this.movieClip),this.movieClip=null),this.circle&&(egret.Tween.removeTweens(this.circle),this.circle.parent&&this.circle.parent.removeChild(this.circle),this.circle=null),!(this.elements.length<=0)){e.ADGRID_CUR_INDEX=uniLib.MathUtil.RandomNumBoth(0,this.elements.length-1);for(var t=0;t<this.elements.length;t++){var i=this.elements[t];this.loadButtonAd(i)}if(!this.ignoreFingerAnim&&uniLib.AdConfig.gameConfig.clickMislead){var n=this.elements.length-1,o=uniLib.MathUtil.RandomNumBoth(0,n),r=this.elements[o];this.circle=new eui.Image("ad-guide-circle"),this.circle.touchEnabled=!1,r.addChild(this.circle),this.circle.x=.5*r.width,this.circle.y=.5*r.height,this.circle.anchorOffsetX=39.5,this.circle.anchorOffsetY=39.5,this.movieClip=uniLib.Utils.creatMovieClip("finger_effect_json","finger_effect_png","finger",-1),this.movieClip.x=.5*r.width,this.movieClip.y=.5*r.height,this.movieClip.touchEnabled=!1,r.addChild(this.movieClip),this.movieClip.gotoAndPlay(0,-1),this.circle.scaleX=this.circle.scaleY=1,egret.Tween.get(this.circle,{loop:!0}).to({scaleX:1,scaleY:1},100).to({scaleX:.5,scaleY:.5},100)}}},e.prototype.onClickTap=function(e){var t=e.target;if(null!=t){var i=t.adData;null!=i&&window.platform.customInterface("navigateToMiniProgram",i,this.onNavigateToMiniProgramCallback,this)}},e.prototype.randomNavigateToMiniProgram=function(){if(!(uniLib.AdConfig.itemDataList.length<=0)){var e=0,t=uniLib.AdConfig.itemDataList.length,i=uniLib.MathUtil.random(e,t);0>i?i=0:i>=uniLib.AdConfig.itemDataList.length&&(i=uniLib.AdConfig.itemDataList.length-1);var n=uniLib.AdConfig.itemDataList[i];window.platform.customInterface("navigateToMiniProgram",n,this.onNavigateToMiniProgramCallback,this)}},e.prototype.onNavigateToMiniProgramCallback=function(e,t){1==e?(uniLib.Global.reportAldEvent("导出小游戏"+t.title),uniLib.Global.reportUmaEvent("导出小游戏"+t.title)):this.processNavigateCallback&&uniLib.AdPlat.instance.showFullScreenAd(null,null,null,null,null,this.isNewMode)},e.ADGRID_CUR_INDEX=-1,e}();e.AdGridAdRender=t,__reflect(t.prototype,"ui.AdGridAdRender")}(ui||(ui={}));var uniLib;!function(e){var t=function(){function t(e){this.adUnitId=e,this.interstitial=null,this.state=0,this.isShow=!1,this.showTimestamp=0,this.load()}return Object.defineProperty(t.prototype,"id",{get:function(){return this.adUnitId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoaded",{get:function(){return 3==this.state?!0:!1},enumerable:!0,configurable:!0}),t.prototype.createInterstitialAd=function(){var t=null;return window[e.Global.platformName]&&window[e.Global.platformName].createInterstitialAd&&(t=window[e.Global.platformName].createInterstitialAd({adUnitId:this.adUnitId})),t},t.prototype.load=function(){this.destroy(),this.state=1,null==this.interstitial?(this.interstitial=this.createInterstitialAd(),this.interstitial.onLoad(this.onInterstitialLoad.bind(this)),this.interstitial.onError(this.onInterstitialError.bind(this)),this.interstitial.onClose(this.onInterstitialClose.bind(this)),e.Global.isTTGame&&this.interstitial.load()):this.interstitial.load()},t.prototype.onInterstitialLoad=function(){console.log("------onInterstitialLoad 广告加载成功------",this.adUnitId),this.state=3,this.isShow&&this.show(!0,this.showCallback,this.showCallbackTarget)},t.prototype.onInterstitialError=function(e){console.warn("onInterstitialError:",e),this.state=2,this.isShow=!1,this.showCallback&&this.showCallback.call(this.showCallbackTarget,!1)},t.prototype.onInterstitialClose=function(e){this.isShow=!1,this.closeCallback&&this.closeCallback.call(this.showCallbackTarget),this.closeCallback=null,this.showCallbackTarget=null,this.load()},t.prototype.show=function(e,t,i,n){if(this.showCallback=t,this.closeCallback=i,this.showCallbackTarget=n,2==this.state||0==this.state)return this.showCallback&&this.showCallback.call(this.showCallbackTarget,!1),void this.load();this.isShow=!0;3==this.state&&(console.warn("显示插屏广告..."),this.interstitial.show().then(function(e){console.log("interstitial show ok",e),t&&t.call(n,!0)})["catch"](function(e){console.error("interstitial show error.........",e),t&&t.call(n,!1)}),this.showTimestamp=Date.now())},t.prototype.destroy=function(){null!=this.interstitial&&(console.log("destroy AdInterstitial"),this.interstitial.offLoad(this.onInterstitialLoad),this.interstitial.offError(this.onInterstitialError),this.interstitial.offClose(this.onInterstitialClose),this.state=0,this.interstitial.destroy(),this.interstitial=null)},t}();e.AdInterstitial=t,__reflect(t.prototype,"uniLib.AdInterstitial")}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function e(){}return e}();e.AdIPData=t,__reflect(t.prototype,"uniLib.AdIPData")}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function e(){}return e}();e.AdItemData=t,__reflect(t.prototype,"uniLib.AdItemData")}(uniLib||(uniLib={}));var ui;!function(e){var t=function(e){function t(t,i,n,o,r,a,s){var l=e.call(this)||this;return l.processNavigateCallback=!1,l.isTouchBegin=!1,l.isTouchCancel=!1,l.isNewMode=!1,l.skinName=i,l.data=t,l.adbg&&(n?l.adbg.visible=!0:l.adbg.visible=!1),l.adLabel&&(o?l.adLabel.visible=!0:l.adLabel.visible=!1,l.adLabel.stroke=r),l.newTitle&&s&&s.length>0&&(l.newTitle.source=s),uniLib.AdConfig.gameConfig.clickMislead&&(l.processNavigateCallback=a?!0:!1),l.load(),l}return __extends(t,e),t.prototype.destroy=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),uniLib.AdConfig.gameConfig.clickMislead&&(this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancel,this))},t.prototype.setNewMode=function(e){this.isNewMode=e?!0:!1},t.prototype.load=function(){this.data.img&&this.data.img.length>0&&uniLib.ResLoadMgr.instance.loadRemoteImage(this.data.img,this.onLoaded,this)},t.prototype.onLoaded=function(e,t){var i=this.data;null==t&&console.log("请求图片失败",e),this.adImage.texture=t,this.adLabel&&(i.title&&i.title.length>0?this.adLabel.text=i.title:this.adLabel.text=""),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this),uniLib.AdConfig.gameConfig.clickMislead&&(this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancel,this))},t.prototype.onTouchBegin=function(e){this.isTouchBegin=!0,this.isTouchCancel=!1,egret.MainContext.instance.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},t.prototype.onTouchEnd=function(e){egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.isTouchBegin&&this.isTouchCancel&&window.platform.customInterface("navigateToMiniProgram",this.data,this.onNavigateToMiniProgramCallback,this),this.isTouchBegin=!1,this.isTouchCancel=!1},t.prototype.onTouchCancel=function(e){this.isTouchBegin&&(this.isTouchCancel=!0)},t.prototype.onClickTap=function(e){this.navigateToMiniProgram()},t.prototype.navigateToMiniProgram=function(){window.platform.customInterface("navigateToMiniProgram",this.data,this.onNavigateToMiniProgramCallback,this)},t.prototype.onNavigateToMiniProgramCallback=function(e,t){1==e?(uniLib.Global.reportAldEvent("导出小游戏"+t.title),uniLib.Global.reportUmaEvent("导出小游戏"+t.title)):this.processNavigateCallback&&uniLib.AdPlat.instance.showFullScreenAd(null,null,null,null,null,this.isNewMode)},t}(eui.Component);e.AdItemDataRender=t,__reflect(t.prototype,"ui.AdItemDataRender")}(ui||(ui={}));var ui;!function(e){var t=function(e){function t(t){var i=e.call(this)||this;return i.curValue=0,i.isShowedBanner=!1,i.isOpenedBanner=!1,i.openedBannerTimes=0,i.randValue=0,i.isMistouchAppBox=!1,i.isFinished=!1,i.isMistouchAppBox=t?!0:!1,i.curValue=0,i.openedBannerTimes=0,i.isFinished=!1,i.randValue=30,i.updateIntervalTimer=egret.setInterval(i.onUpdate,i,60),i}return __extends(t,e),t.prototype.setFinishedCallback=function(e,t,i){this.finishedCallback=e,this.finishedCallbackTarget=t,this.finishedCallbackParmas=i},t.prototype.finished=function(){this.closeTimeout&&(egret.clearTimeout(this.closeTimeout),this.closeTimeout=null),this.isFinished||(this.isFinished=!0,this.updateIntervalTimer&&(egret.clearInterval(this.updateIntervalTimer),this.updateIntervalTimer=null),this.openBannerCallbackTimer&&(egret.clearTimeout(this.openBannerCallbackTimer),this.openBannerCallbackTimer=null),this.reward(this.isOpenedBanner),this.finishedCallback&&this.finishedCallback.call(this.finishedCallbackTarget,this.finishedCallbackParmas),this.finishedCallback=null,this.finishedCallbackTarget=null,this.finishedCallbackParmas=null,GX.PopUpManager.removePopUp(this))},t.prototype.onUpdate=function(){if(this.isOpenedBanner)return void this.finished();return this.curValue<=30?this.curValue-=1:this.curValue>=65?this.curValue-=3:this.curValue-=2,this.curValue<0&&(this.curValue=0),this.curValue>=100&&(this.curValue=90),this.setProgress(this.curValue,100),this.curValue>0&&null==this.closeTimeout&&(this.closeTimeout=egret.setTimeout(this.finished,this,2e4)),this.curValue>=100?void this.finished():void(this.isShowedBanner||this.curValue>=uniLib.MathUtil.RandomNumBoth(20,50)&&this.openMistouchBanner())},t.prototype.openMistouchBanner=function(){var e=this;this.isShowedBanner=!0,++this.openedBannerTimes,this.isMistouchAppBox?(uniLib.Global.reportAldEvent("狂点出现盒子广告"),window.platform.showAppBoxAdvertisement(!0,function(t){console.log("盒子广告返回",t),e.isOpenedBanner=!0},this)):(uniLib.Global.reportAldEvent("狂点出现Banner "+this.openedBannerTimes+"次"),uniLib.Global.reportUmaEvent("狂点出现Banner "+this.openedBannerTimes+"次"),uniLib.AdPlat.instance.showAutoBanner(this.onOpenBannerCallback,this)),this.openBannerCallbackTimer&&(egret.clearTimeout(this.openBannerCallbackTimer),this.openBannerCallbackTimer=null),this.openBannerCallbackTimer=egret.setTimeout(this.onOpenBannerTimeOutCallback,this,2e3)},t.prototype.onOpenBannerCallback=function(e){this.openBannerCallbackTimer&&(egret.clearTimeout(this.openBannerCallbackTimer),this.openBannerCallbackTimer=null),e?(uniLib.Global.reportAldEvent("第"+this.openedBannerTimes+"次狂点点击了Banner"),uniLib.Global.reportUmaEvent("第"+this.openedBannerTimes+"次狂点点击了Banner"),this.isOpenedBanner=!0,this.finished()):uniLib.Global.isQQGame&&(this.isOpenedBanner=!0,this.finished())},t.prototype.onOpenBannerTimeOutCallback=function(e){this.openBannerCallbackTimer&&(egret.clearTimeout(this.openBannerCallbackTimer),this.openBannerCallbackTimer=null),this.isShowedBanner=!1,uniLib.Global.isWxgame?this.openedBannerTimes>=3&&this.finished():this.finished()},t}(e.BaseUI);e.AdMisTouchGifBox=t,__reflect(t.prototype,"ui.AdMisTouchGifBox")}(ui||(ui={}));var ui;!function(e){var t=function(){function e(){this.misTouchNum=0,this.misTouchPosNum=0,this.curMisTouchNum=0,this.curMisTouchPosNum=0}return Object.defineProperty(e,"instance",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e.prototype.startMisTouch=function(e,t,i,n){return null!=uniLib.AdPlat.instance.availableBanner()||uniLib.Global.isH5?this.misTouchNum<=0?!1:(this.curMisTouchNum++,this.curMisTouchNum<this.misTouchNum?!1:(this.curMisTouchNum=0,uniLib.AdPlat.instance.hideBanner(),e.setFinishedCallback(t,i,n),GX.PopUpManager.addPopUp(e,!0,.8,GX.PopUpEffect.CENTER),uniLib.Global.reportAldEvent("唤起狂点界面"),uniLib.Global.reportUmaEvent("唤起狂点界面"),!0)):!1},e.prototype.startMisTouchPos=function(e,t,i){return null!=uniLib.AdPlat.instance.availableBanner()||uniLib.Global.isH5?null!=this.touchTarget?!1:this.misTouchPosNum<=0?!1:(++this.curMisTouchPosNum,this.curMisTouchPosNum<this.misTouchPosNum?(t&&t.call(i,!1),!1):(this.touchTarget=e,this.touchTargetCallback=t,this.touchTargetObj=i,this.curMisTouchPosNum=0,uniLib.AdPlat.instance.hideBanner(),this.misTouchTimer=egret.setTimeout(this.onMisTouchTimeoutEvent,this,1200),!0)):!1},e.prototype.stopMisTouchPos=function(e){e==this.touchTarget&&(this.misTouchTimer&&(egret.clearTimeout(this.misTouchTimer),this.misTouchTimer=null),this.touchTargetCallback&&this.touchTargetCallback.call(this.touchTargetObj,!1),this.touchTarget=null,this.touchTargetCallback=null,this.touchTargetObj=null)},e.prototype.onMisTouchTimeoutEvent=function(){this.misTouchTimer&&(egret.clearTimeout(this.misTouchTimer),this.misTouchTimer=null),uniLib.AdPlat.instance.showBanner(),this.touchTargetCallback&&this.touchTargetCallback.call(this.touchTargetObj,!0),this.touchTarget=null,this.touchTargetCallback=null,this.touchTargetObj=null},e._instance=null,e}();e.AdMisTouchManager=t,__reflect(t.prototype,"ui.AdMisTouchManager")}(ui||(ui={}));var uniLib;!function(e){var t=function(){function t(){this.isInit=!1,this.showBannerTimeout=null,this.curBannerIndex=0,this.autoBannerCallback=null,this.autoBannerCallbackTarget=null,this.autoBannerTimeout=null,this.wx_isShared=!1,this.wx_sharedCloseTime=0,this.shareInfoArr=[],this.banners=[],this.bannerWidth=0,this.recordState=0,this.recordDuration=0,this.startRecordTimestamp=0}return Object.defineProperty(t,"instance",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.getSystemInfoSync=function(){var t=null;return window[e.Global.platformName]&&window[e.Global.platformName].getSystemInfoSync&&(t=window[e.Global.platformName].getSystemInfoSync()),console.log("systemInfo",t),t},t.prototype.regisiterCallback=function(){null!=window[e.Global.platformName]&&(window[e.Global.platformName].onShow&&window[e.Global.platformName].onShow(function(t){e.AdPlat.instance.onShowCallback(t)}),window[e.Global.platformName].onHide&&window[e.Global.platformName].onHide(function(t){e.AdPlat.instance.onHideCallback(t)}))},t.prototype.onShowCallback=function(e){console.log("onShowCallback",e);var t=(new Date).getTime();this.wx_isShared&&(t-this.wx_sharedCloseTime>=4e3?(console.log("分享成功"),this.wx_sharedCloseTime=t,this.shareCallback&&this.shareCallback.call(this.shareCallbackTarget,!0)):(console.log("分享失败"),this.shareCallback&&this.shareCallback.call(this.shareCallbackTarget,!1)),this.wx_isShared=!1),this.tryGameBox&&this.tryGameBox.notityExitTryPlayGame()},t.prototype.onHideCallback=function(e){console.log("onHideCallback",e);var t=e&&(8==e.targetAction||9==e.targetAction||10==e.targetAction)&&e.targetPagePath.length>50;t&&this.autoBannerCallback&&this.autoBannerCallback.call(this.autoBannerCallbackTarget,t),this.autoBannerCallback=null,this.autoBannerCallbackTarget=null},t.prototype.init=function(){this.isInit=!0,e.AdConfig.gameConfig={},this.systemInfo=this.getSystemInfoSync(),this.initShare(),this.initRecord(),this.regisiterCallback(),window[e.Global.platformName]&&window[e.Global.platformName].setKeepScreenOn&&window[e.Global.platformName].setKeepScreenOn({keepScreenOn:!0});var t=null;e.Global.initOpt.gameName&&e.Global.initOpt.gameName.length>0&&(t="OPENID_"+e.Global.initOpt.gameName);var i=e.Utils.getLocalStorage(t,"");i&&i.length>0?(window.platform.init(null,null),e.Global.reportAldOpenId(i),e.Global.initOpt.gameName&&e.Global.initOpt.gameName.length>0?e.AdPlat.instance.initConfig(this.initConfigComplete,this):e.EventListener.getInstance().dispatchEventWith(e.FacadeConsts.ADPLAT_INIT_COMPLETED)):window.platform.init(function(t){null!=t&&t.openid&&t.openid.length>0&&e.Global.reportAldOpenId(t.openid),e.Global.initOpt.gameName&&e.Global.initOpt.gameName.length>0?e.AdPlat.instance.initConfig(e.AdPlat.instance.initConfigComplete,e.AdPlat.instance):e.EventListener.getInstance().dispatchEventWith(e.FacadeConsts.ADPLAT_INIT_COMPLETED)},this)},t.prototype.initShare=function(){null!=window[e.Global.platformName]&&(window[e.Global.platformName].showShareMenu&&window[e.Global.platformName].showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"],success:null,fail:null,complete:null}),window[e.Global.platformName].onShareAppMessage&&window[e.Global.platformName].onShareAppMessage(function(){return e.AdPlat.instance.buildShareInfo()}),window[e.Global.platformName].onShareTimeline&&window[e.Global.platformName].onShareTimeline(function(){return e.AdPlat.instance.buildShareInfo()}))},t.prototype.initRecord=function(){this.recorderManager||(window[e.Global.platformName]&&window[e.Global.platformName].getGameRecorderManager?this.recorderManager=window[e.Global.platformName].getGameRecorderManager():this.recorderManager=null)},t.prototype.getRecordDuration=function(){return this.recordDuration},t.prototype.startRecord=function(t){var i=this;console.log("startRecord - 开始录屏",this.recordState),void 0===t&&(t=300),(null!=this.recorderManager||(this.initRecord(),null!=this.recorderManager))&&0==this.recordState&&(this.recordState=1,t>300&&(t=300),this.recordVideoPath=null,this.startRecordTimestamp=0,this.recordDuration=0,this.recorderManager.onStart(function(t){console.log("record onStart",t),e.AdPlat.instance.startRecordTimestamp=(new Date).valueOf()}),this.recorderManager.onStop(function(t){console.log("record onStop",t,t.videoPath),e.AdPlat.instance.recordState=0,e.AdPlat.instance.recordVideoPath=t.videoPath;var n=(new Date).valueOf();e.AdPlat.instance.recordDuration=n-i.startRecordTimestamp}),this.recorderManager.onError(function(t){console.log("record onError",t),e.AdPlat.instance.recordState=0,e.AdPlat.instance.recordDuration=0}),this.recorderManager.start({duration:t}))},t.prototype.stopRecord=function(){console.log("stopRecord - 手工停止录屏",this.recordState),null!=this.recorderManager&&0!=this.recordState&&(this.recordState=0,this.recorderManager.stop())},t.prototype.pauseRecord=function(){console.log("pauseRecord - 暂停录屏",this.recordState),null!=this.recorderManager&&1==this.recordState&&(this.recordState=2,this.recorderManager.pause())},t.prototype.resumeRecord=function(){console.log("resumeRecord - 继续录屏",this.recordState),null!=this.recorderManager&&2==this.recordState&&this.recorderManager.resume()},t.prototype.share=function(t,i,n,o){if(null!=window[e.Global.platformName]&&null!=window[e.Global.platformName].shareAppMessage){this.shareCallback=i,this.shareShortCallback=n,this.shareCallbackTarget=o;var r=this.buildShareInfo(t);console.log("分享数据：",r),null!=r&&(e.Global.isWxgame&&(this.wx_isShared=!0,this.wx_sharedCloseTime=(new Date).getTime()),window[e.Global.platformName].shareAppMessage(r))}},t.prototype.buildShareInfo=function(t){void 0===t&&(t=null);var i=this,n="",o="";if(this.shareInfoArr&&this.shareInfoArr.length>0){var r=this.shareInfoArr[e.MathUtil.RandomNumBoth(0,this.shareInfoArr.length-1)];n=r.title,o="https://7061-paoku-p3ru7-1302658586.tcb.qcloud.la/shareicon/"+r.img,e.Global.isH5&&(o="http://zerosgame.com/mingame_resource/shareicon/"+r.img)}if(e.Global.isWxgame)return{title:n,imageUrl:o,query:t};if(e.Global.isTTGame){var a=this.recordVideoPath,s="";t&&-1!=["article","video","token"].indexOf(t.channel)&&(s=t.channel);var l=[];for(var c in t)l.push(c+"="+t[c]);return{channel:s,title:n,imageUrl:o,query:l.join("&"),extra:{videoPath:a,videoTopics:[n],withVideoId:!0},success:function(e){console.log("share video success :",e),i.shareVideoId=e.videoId,i.shareCallback&&i.shareCallback.call(i.shareCallbackTarget,!0)},fail:function(e){return console.log("share video fail ",e),console.log("index of : ",e.errMsg.indexOf("short")),e&&e.errMsg&&-1!=e.errMsg.indexOf("short")&&i.shareShortCallback?(console.log("时间太短 执行回调",e),void i.shareShortCallback.call(i.shareCallbackTarget,e)):void(i.shareCallback&&i.shareCallback.call(i.shareCallbackTarget,!1))}}}return null},t.prototype.createRewardedVideo=function(t){return this.video=new e.AdRewardedVideo(t),this.video},t.prototype.showRewardedVideo=function(t,i){this.video?this.video.show(t,i):t&&(e.Global.isTTGame?t.call(i,2):t.call(i,1))},t.prototype.createInterstitial=function(t){return this.interstitial=new e.AdInterstitial(t),this.interstitial},t.prototype.showInterstitial=function(t,i,n){if(this.interstitial)this.interstitial.show(!1,t,i,n);else if(e.AdConfig.gameConfig&&e.AdConfig.gameConfig.adInterstitialId){var o=e.AdConfig.gameConfig.adInterstitialId;this.interstitial=this.createInterstitial(o),this.interstitial.show(!1,t,i,n)}else t?t.call(n,!1):i&&i.call(n)},t.prototype.setBannerMaxShowTimes=function(e){for(var t=0;t<this.banners.length;t++)this.banners[t].setShowTime(e)},t.prototype.setBannerWidth=function(e){this.bannerWidth=e},t.prototype.availableBanner=function(){for(var e=0;e<this.banners.length;e++){var t=this.banners[e];if(t.isLoaded)return t}return null},t.prototype.createBanner=function(t){for(var i=0;i<this.banners.length;i++)if(this.banners[i].id==t)return null;var n=new e.AdBanner(t,this.bannerWidth);return this.banners.push(n),n},t.prototype.destroyBanners=function(){for(var e=0;e<this.banners.length;e++){var t=this.banners[e];t.destroy()}this.banners.length=0},t.prototype.showBanner=function(e){this.banners.length<=0||(e?(null==this.showBannerTimeout&&(this.showBannerTimeout=egret.setInterval(this.changeShowBanner,this,6e3)),this.changeShowBanner()):(this.showBannerTimeout&&(egret.clearInterval(this.showBannerTimeout),this.showBannerTimeout=null),this.changeShowBanner()))},t.prototype.hideBanner=function(){console.log("hideBanner"),this.showBannerTimeout&&(egret.clearInterval(this.showBannerTimeout),this.showBannerTimeout=null);for(var e=0;e<this.banners.length;e++){var t=this.banners[e];t.hide()}},t.prototype.changeShowBanner=function(){for(var e=0;e<this.banners.length;e++){var t=this.banners[e];t.hide()}this.curBannerIndex>=this.banners.length&&(this.curBannerIndex=0),this.banners[this.curBannerIndex].show(),++this.curBannerIndex},t.prototype.showAutoBanner=function(t,i){if(console.log("showAutoBanner"),!(this.banners.length<=0||ui.AdMisTouchManager.instance.misTouchNum<=0)){this.autoBannerCallback=t,this.autoBannerCallbackTarget=i;var n=parseInt(e.AdConfig.gameConfig.autoBannerShowTime);(isNaN(n)||0>=n)&&(n=2e3),this.autoBannerTimeout=egret.setTimeout(this.hideAutoBanner,this,n);for(var o=null,r=0;r<this.banners.length;r++){var a=this.banners[r];if(a.isLoaded){o=a;break}}null==o&&(o=this.banners[0]),o.show()}},t.prototype.hideAutoBanner=function(){this.autoBannerTimeout&&(this.autoBannerCallback=null,this.autoBannerCallbackTarget=null,egret.clearTimeout(this.autoBannerTimeout),this.autoBannerTimeout=null),this.hideBanner()},t.prototype.showAdGameBox=function(t){return e.AdConfig.gameConfig.tryPlayEnable?this.tryGameBox?!1:(this.tryGameBox=t,GX.PopUpManager.addPopUp(this.tryGameBox,!0,.8,GX.PopUpEffect.CENTER),!0):!1},t.prototype.hideAdGameBox=function(){this.tryGameBox&&(GX.PopUpManager.removePopUp(this.tryGameBox),this.tryGameBox=null)},t.prototype.showClickMisleadAd=function(t,i,n,o,r){if(void 0===o&&(o=GX.PopUpEffect.NOMAL),window.platform.customInterface("hideGameClubButton"),e.AdConfig.itemDataList&&e.AdConfig.itemDataList.length>0){e.AdPlat.instance.hideBanner();var a=new ui.AdClickMisleadView(t,i,n,r);GX.PopUpManager.addPopUp(a,!0,null,o,null,null,GX.GameLayerManager.loadLayer)}else window.platform.customInterface("showGameClubButton"),t&&t.call(i)},t.prototype.showGameFinishAd=function(t,i,n,o){if(void 0===o&&(o=GX.PopUpEffect.NOMAL),window.platform.customInterface("hideGameClubButton"),e.AdConfig.itemDataList&&e.AdConfig.itemDataList.length>0){e.AdPlat.instance.hideBanner();var r=new ui.AdGameFinishScrollView(t,i,n);GX.PopUpManager.addPopUp(r,!0,null,o,null,null,GX.GameLayerManager.loadLayer)}else window.platform.customInterface("showGameClubButton"),t&&t.call(i)},t.prototype.showFullScreenAd=function(t,i,n,o,r,a,s){if(void 0===r&&(r=GX.PopUpEffect.NOMAL),window.platform.customInterface("hideGameClubButton"),e.AdConfig.itemDataList&&e.AdConfig.itemDataList.length>0){e.AdPlat.instance.hideBanner();var l=new ui.AdFullScreenScrollView(t,i,n,o,a,s);GX.PopUpManager.addPopUp(l,!0,null,r,null,null,GX.GameLayerManager.loadLayer)}else window.platform.customInterface("showGameClubButton"),t&&t.call(i)},t.prototype.testIpRegion=function(e){if(console.log("testIpRegion",e),null==e||e.length<=0)return!0;if(null==this.ipData)return!1;for(var t=0;t<e.length;t++){var i=e[t],n=this.ipData.area.search(i);if(-1!=n)return!1}return!0},t.prototype.isWhitelist=function(t){if(null==e.Global.wxOpenId||null==t)return!1;for(var i=0;i<t.length;i++){var n=t[i];if(n&&n.length>0&&n==e.Global.wxOpenId)return!0}return!1},t.prototype.initConfig=function(t,i){var n=this,o=this;this.requestIP(function(r){console.log("ipinfo",r),r?(o.ipData=r,o.requestGameConfig(function(r){if(r){e.AdConfig.gameConfig=r,console.log("gameConfig",r);var a=o.testIpRegion(r.disabledRegion);if(!a&&!n.isWhitelist(r.whitelist))return console.log("disabled:"+o.ipData.area),void(t&&t.call(i));if(console.log("pass:"+o.ipData.area),ui.AdMisTouchManager.instance.misTouchNum=parseInt(r.mistouchNum),ui.AdMisTouchManager.instance.misTouchPosNum=parseInt(r.mistouchPosNum),e.AdConfig.autoBannerShowTime=parseInt(r.autoBannerShowTime),e.AdConfig.autoBannerLimit=parseInt(r.autoBannerLimit),e.AdConfig.checkBoxMistouch=0==parseInt(r.checkBoxMistouch)?!1:!0,e.AdConfig.firstEnterMisTouch=0==parseInt(r.firstEnterMisTouch)?!1:!0,e.AdConfig.checkBoxProbabilitys=[],null!=r.checkBoxProbabilitys&&r.checkBoxProbabilitys.length>0)for(var s=0;s<r.checkBoxProbabilitys.length;s++){var l=parseInt(r.checkBoxProbabilitys[s]);e.AdConfig.checkBoxProbabilitys.push(l)}}t&&t.call(i)},o)):t&&t.call(i)},this)},t.prototype.initConfigComplete=function(){if(null!=e.AdConfig.gameConfig&&null!=e.AdConfig.gameConfig.adPlatform){if(this.shareInfoArr=e.AdConfig.gameConfig.shareInfo,e.AdConfig.gameConfig&&e.AdConfig.gameConfig.adBbannerId)for(var t=e.AdConfig.gameConfig.adBbannerId,i=0;i<t.length;i++){var n=t[i];n.length>0&&this.createBanner(n)}if(e.AdConfig.gameConfig&&e.AdConfig.gameConfig.adVideoId){var n=e.AdConfig.gameConfig.adVideoId;this.createRewardedVideo(n)}if(e.AdConfig.gameConfig&&e.AdConfig.gameConfig.adInterstitialId){var n=e.AdConfig.gameConfig.adInterstitialId;this.createInterstitial(n)}e.AdConfig.itemDataList=[],null==e.AdConfig.gameConfig.tryPlayEnable&&(e.AdConfig.gameConfig.tryPlayEnable=!1),e.Global.isH5||e.Global.isWxgame?this.requestGameExportData(this.requestGameExportDataComplete,this):(e.AdConfig.gameConfig.tryPlayEnable=!1,e.EventListener.getInstance().dispatchEventWith(e.FacadeConsts.ADPLAT_INIT_COMPLETED))}else var o=egret.setTimeout(function(){console.log("重新initConfig"),egret.clearTimeout(o),e.AdPlat.instance.initConfig(e.AdPlat.instance.initConfigComplete,e.AdPlat.instance)},this,500)},t.prototype.requestIP=function(t,i){if(null==e.Global.locationUrl||e.Global.locationUrl.length<=0)return void t.call(i,null);var n=e.Global.locationUrl,o=new egret.HttpRequest;o.responseType=egret.HttpResponseType.TEXT,o.open(n,egret.HttpMethod.GET),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(),o.addEventListener(egret.Event.COMPLETE,function(e){var n=e.currentTarget,o=JSON.parse(n.response);0==o.code?t.call(i,o.data):t.call(i,null)},this),o.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){t.call(i,null)},this)},t.prototype.requestGameConfig=function(t,i){if(null==e.Global.configUrl||e.Global.configUrl.length<=0)return void t.call(i,null);var n=(new Date).valueOf(),o=e.Global.configUrl+"?t="+n,r=new egret.HttpRequest;r.responseType=egret.HttpResponseType.TEXT,r.open(o,egret.HttpMethod.GET),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send(),r.addEventListener(egret.Event.COMPLETE,function(n){var o=n.currentTarget,r=JSON.parse(o.response),a=null;if(r.length>0){for(var s=0;s<r.length;s++){var l=r[s];if(l.adPlatform){if(e.Global.isH5&&"web"==l.adPlatform){a=l;break}if(e.Global.isWxgame&&"wx"==l.adPlatform){a=l;break}if(e.Global.isTTGame&&"byte"==l.adPlatform){a=l;break}if(e.Global.isQQGame&&"qq"==l.adPlatform){a=l;break}if(e.Global.isFastGame&&"hw"==l.adPlatform){a=l;break}if(e.Global.isVivogame&&"vivo"==l.adPlatform){a=l;break}if(e.Global.isOppogame&&"oppo"==l.adPlatform){a=l;break}}}null==a&&(a=r[0])}t.call(i,a)},this),r.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){t.call(i,null)},this)},t.prototype.requestGameExportData=function(t,i){if(null==e.Global.exportUrl||e.Global.exportUrl.length<=0)return e.AdConfig.gameConfig.tryPlayEnable=!1,void e.EventListener.getInstance().dispatchEventWith(e.FacadeConsts.ADPLAT_INIT_COMPLETED);var n=(new Date).valueOf(),o=e.Global.exportUrl+"?t="+n,r=new egret.HttpRequest;r.responseType=egret.HttpResponseType.TEXT,r.open(o,egret.HttpMethod.GET),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send(),r.addEventListener(egret.Event.COMPLETE,function(n){var o=n.currentTarget,r=JSON.parse(o.response);if(e.Global.isH5)for(var a=0;a<r.length;a++)if(e.Config.debug)r[a].img="http://192.168.101.100/download/icons/icon1.png";else{var s=r[a].img.split("/"),l=s[s.length-1];r[a].img="http://zerosgame.com/mingame_resource/gameicon/"+l}t.call(i,r)},this),r.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){t.call(i,null)},this)},t.prototype.requestGameExportDataComplete=function(t){if(console.log("requestGameExportData",t),null!=t){if(t&&t.length>0){for(var i=!1,n=0;n<t.length;n++){var o=t[n];o.tryPlayEnable&&o.priority>0&&(i=!0),(null==o.priority||0!=o.priority)&&e.AdConfig.itemDataList.push(o)}null!=e.AdConfig.gameConfig.tryPlayEnable&&1==e.AdConfig.gameConfig.tryPlayEnable&&(e.AdConfig.gameConfig.tryPlayEnable=i)
}else e.AdConfig.gameConfig.tryPlayEnable=!1;e.EventListener.getInstance().dispatchEventWith(e.FacadeConsts.ADPLAT_INIT_COMPLETED)}else var r=egret.setTimeout(function(){console.log("重新requestGameExportData"),egret.clearTimeout(r),e.AdPlat.instance.requestGameExportData(e.AdPlat.instance.requestGameExportDataComplete,e.AdPlat.instance)},this,500)},t}();e.AdPlat=t,__reflect(t.prototype,"uniLib.AdPlat")}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(e){this.adUnitId=e,this.videoAd=null,this.callback=null,this.callbackTarget=null,this.load()}return Object.defineProperty(t.prototype,"id",{get:function(){return this.adUnitId},enumerable:!0,configurable:!0}),t.prototype.createRewardedVideoAd=function(){var t=null;return window[e.Global.platformName]&&window[e.Global.platformName].createRewardedVideoAd&&(t=window[e.Global.platformName].createRewardedVideoAd({adUnitId:this.adUnitId})),t},t.prototype.load=function(){null==this.videoAd&&(this.videoAd=this.createRewardedVideoAd(),this.videoAd.onLoad(this.onVideoLoad.bind(this)),this.videoAd.onError(this.onVideoError.bind(this)),this.videoAd.onClose(this.onVideoClose.bind(this)))},t.prototype.onVideoLoad=function(){console.log("------onVideoLoad 广告加载成功------",this.adUnitId)},t.prototype.onVideoError=function(e){console.warn("onVideoError:",e),this.callback&&this.callback.call(this.callbackTarget,-1),this.callback=null,this.callbackTarget=null},t.prototype.onVideoClose=function(e){var t=0;(e&&e.isEnded||void 0===e)&&(t=1),this.callback&&this.callback.call(this.callbackTarget,t),this.callback=null,this.callbackTarget=null},t.prototype.show=function(e,t){return null==this.videoAd?void(e&&e.call(t,-1)):(this.callback=e,this.callbackTarget=t,console.warn("显示激励视频广告..."),void this.videoAd.show().then(function(e){console.log("rewardedVideo show ok",e)})["catch"](function(i){console.error("rewardedVideo show error.........",i),e&&e.call(t,-1)}))},t.prototype.destroy=function(){console.log("AdRewardedVideo destroy"),null!=this.videoAd&&(this.videoAd.offLoad(this.onVideoLoad),this.videoAd.offError(this.onVideoError),this.videoAd.offClose(this.onVideoClose),this.videoAd.destroy(),this.videoAd=null)},t}();e.AdRewardedVideo=t,__reflect(t.prototype,"uniLib.AdRewardedVideo")}(uniLib||(uniLib={}));var ui;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.rollDirection=0,e.scrollDir=1,e.openUpdate=!0,e._isLoaded=!1,e._isLoaded=!1,e}return __extends(i,t),Object.defineProperty(i.prototype,"isLoaded",{get:function(){return this._isLoaded},enumerable:!0,configurable:!0}),i.prototype.randomNavigateToMiniProgram=function(){if(!(this.itemRenderList.length<=0)){var e=0,t=this.itemRenderList.length,i=uniLib.MathUtil.random(e,t);0>i?i=0:i>=this.itemRenderList.length&&(i=this.itemRenderList.length-1);var n=this.itemRenderList[i];n.navigateToMiniProgram()}},i.prototype.load=function(t,i,n,o,r,a){if(!this._isLoaded){var s=uniLib.AdConfig.itemDataList;if(null==s&&(s=[]),s.length<=0)return this.visible=!1,void(this.parent&&(this.parent.visible=!1));null==i&&(i=!0),null==n&&(n=0),null==t&&(t=0),this.rollDirection=t,this.itemRenderList=new Array,(null==o||o.length<=0)&&(o="AdItemSkin");for(var l=0;l<s.length;l++){var c=l%6+1,h="ad-itembar"+c,u=s[l],d=new e.AdItemDataRender(u,o,!0,i,n,r,h);this.adGroup.addChild(d),this.itemRenderList.push(d),d.setNewMode(a)}if(this.itemRenderList.length%3!=0){var u=s[0],d=new e.AdItemDataRender(u,o,!0,i,n,r);if(this.adGroup.addChild(d),this.itemRenderList.push(d),d.setNewMode(a),this.itemRenderList.length%3!=0){var p=s[1],g=new e.AdItemDataRender(p,o,!0,i,n,r);this.adGroup.addChild(g),this.itemRenderList.push(g),g.setNewMode(a)}}this.addEventListener(egret.Event.ENTER_FRAME,this.onUpdateFrame,this),this.timerHandler=egret.setInterval(this.onUpdateTime,this,2e3),this._isLoaded=!0}},i.prototype.unload=function(){if(this.movieClip&&(egret.Tween.removeTweens(this.movieClip),this.movieClip.stop(),this.movieClip.parent&&this.movieClip.parent.removeChild(this.movieClip),this.movieClip=null),this.circle&&(egret.Tween.removeTweens(this.circle),this.circle.parent&&this.circle.parent.removeChild(this.circle),this.circle=null),this.timerHandler&&(egret.clearInterval(this.timerHandler),this.timerHandler=null),this.removeEventListener(egret.Event.ENTER_FRAME,this.onUpdateFrame,this),null!=this.itemRenderList){for(var e=0;e<this.itemRenderList.length;e++){var t=this.itemRenderList[e];t.destroy(),t.parent&&t.parent.removeChild(t)}this.itemRenderList=[],this._isLoaded=!1}},i.prototype.onUpdateTime=function(){if(this.movieClip&&(egret.Tween.removeTweens(this.movieClip),this.movieClip.stop(),this.movieClip.parent&&this.movieClip.parent.removeChild(this.movieClip),this.movieClip=null),this.circle&&(egret.Tween.removeTweens(this.circle),this.circle.parent&&this.circle.parent.removeChild(this.circle),this.circle=null),!(this.itemRenderList.length<0)&&uniLib.AdConfig.gameConfig.clickMislead){var e=this.itemRenderList.length-1,t=uniLib.MathUtil.RandomNumBoth(0,e),i=this.itemRenderList[t];this.circle=new eui.Image("ad-guide-circle"),this.circle.touchEnabled=!1,i.addChild(this.circle),this.circle.x=.5*i.width,this.circle.y=.5*i.height,this.circle.anchorOffsetX=39.5,this.circle.anchorOffsetY=39.5,this.movieClip=uniLib.Utils.creatMovieClip("finger_effect_json","finger_effect_png","finger",-1),this.movieClip.x=.5*i.width,this.movieClip.y=.5*i.height,this.movieClip.touchEnabled=!1,i.addChild(this.movieClip),this.movieClip.gotoAndPlay(0,-1),this.circle.scaleX=this.circle.scaleY=1,egret.Tween.get(this.circle,{loop:!0}).to({scaleX:1,scaleY:1},300).to({scaleX:.5,scaleY:.5},300).to({scaleX:1,scaleY:1},300)}},i.prototype.onUpdateFrame=function(){if(this.openUpdate&&!(this.adScroller.viewport.contentWidth<=0||this.adScroller.viewport.contentHeight<=0)){var e=0,t=1;if(1==this.rollDirection){if(e=this.adScroller.viewport.contentWidth-this.adScroller.viewport.width,0>=e)return;this.scrollDir>0?(this.adScroller.viewport.scrollH+=t,this.adScroller.viewport.scrollH>=e&&(this.adScroller.viewport.scrollH=e,this.scrollDir=-1)):(this.adScroller.viewport.scrollH-=t,this.adScroller.viewport.scrollH<=0&&(this.adScroller.viewport.scrollH=0,this.scrollDir=1))}else{if(e=this.adScroller.viewport.contentHeight-this.adScroller.viewport.height,0>=e)return;this.scrollDir>0?(this.adScroller.viewport.scrollV+=t,this.adScroller.viewport.scrollV>=e&&(this.adScroller.viewport.scrollV=e,this.scrollDir=-1)):(this.adScroller.viewport.scrollV-=t,this.adScroller.viewport.scrollV<=0&&(this.adScroller.viewport.scrollV=0,this.scrollDir=1))}}},i}(eui.Component);e.AdScrollView=t,__reflect(t.prototype,"ui.AdScrollView")}(ui||(ui={}));var Cmd;!function(e){var t;!function(e){e[e.PlatType_Normal=0]="PlatType_Normal",e[e.PlatType_WeChat=1]="PlatType_WeChat"}(t=e.PlatType||(e.PlatType={}));var i;!function(e){e[e.HttpReturnCode_Null=0]="HttpReturnCode_Null",e[e.HttpReturnCode_NormalErr=1]="HttpReturnCode_NormalErr",e[e.HttpReturnCode_DbError=2]="HttpReturnCode_DbError",e[e.HttpReturnCode_NeedBind=3]="HttpReturnCode_NeedBind",e[e.HttpReturnCode_ScriptError=4]="HttpReturnCode_ScriptError",e[e.HttpReturnCode_IsRegisteredError=5]="HttpReturnCode_IsRegisteredError",e[e.HttpReturnCode_NoRegisteredError=6]="HttpReturnCode_NoRegisteredError",e[e.HttpReturnCode_SignError=7]="HttpReturnCode_SignError",e[e.HttpReturnCode_ServerShutDown=8]="HttpReturnCode_ServerShutDown",e[e.HttpReturnCode_JsonSyntaxError=9]="HttpReturnCode_JsonSyntaxError",e[e.HttpReturnCode_JsonMessageError=10]="HttpReturnCode_JsonMessageError",e[e.HttpReturnCode_TokenValueError=11]="HttpReturnCode_TokenValueError",e[e.HttpReturnCode_WaiGuaUidError=12]="HttpReturnCode_WaiGuaUidError",e[e.HttpReturnCode_NoGatewayDown=13]="HttpReturnCode_NoGatewayDown",e[e.HttpReturnCode_NoSdkServer=14]="HttpReturnCode_NoSdkServer",e[e.HttpReturnCode_SdkCheckSignErr=15]="HttpReturnCode_SdkCheckSignErr",e[e.HttpReturnCode_Sdk3PartyServerErr=16]="HttpReturnCode_Sdk3PartyServerErr",e[e.HttpReturnCode_GatewayErr=17]="HttpReturnCode_GatewayErr",e[e.HttpReturnCode_Timeout=18]="HttpReturnCode_Timeout",e[e.HttpReturnCode_AccountUsing=19]="HttpReturnCode_AccountUsing",e[e.HttpReturnCode_OnlinePlatidErr=20]="HttpReturnCode_OnlinePlatidErr",e[e.HttpReturnCode_BindAccountErr=21]="HttpReturnCode_BindAccountErr",e[e.HttpReturnCode_NoZoneDown=22]="HttpReturnCode_NoZoneDown"}(i=e.HttpReturnCode||(e.HttpReturnCode={}));var n=function(){function e(){}return e.prototype.GetType=function(){return"Cmd.PlatInfo"},e}();e.PlatInfo=n,__reflect(n.prototype,"Cmd.PlatInfo");var o=function(){function e(){}return e.prototype.GetType=function(){return"Cmd.PlatTokenLogin"},e}();e.PlatTokenLogin=o,__reflect(o.prototype,"Cmd.PlatTokenLogin");var r=function(){function e(){}return e.prototype.GetType=function(){return"Cmd.PlatTokenLoginReturn"},e}();e.PlatTokenLoginReturn=r,__reflect(r.prototype,"Cmd.PlatTokenLoginReturn");var a=function(){function e(){}return e.prototype.GetType=function(){return"Cmd.RequestSelectZone"},e}();e.RequestSelectZone=a,__reflect(a.prototype,"Cmd.RequestSelectZone");var s=function(){function e(){}return e.prototype.GetType=function(){return"Cmd.RequestSelectZoneReturn"},e}();__reflect(s.prototype,"RequestSelectZoneReturn");var l=function(){function e(){}return e.prototype.GetType=function(){return"Cmd.HttpPackage"},e}();e.HttpPackage=l,__reflect(l.prototype,"Cmd.HttpPackage");var c=function(){function e(){}return e.prototype.GetType=function(){return"Cmd.HttpPackageReturn"},e}();e.HttpPackageReturn=c,__reflect(c.prototype,"Cmd.HttpPackageReturn");var h=function(){function e(){}return e.prototype.GetType=function(){return"Cmd.UserBaseInfo"},e}();e.UserBaseInfo=h,__reflect(h.prototype,"Cmd.UserBaseInfo");var u=function(){function e(){}return e.prototype.GetType=function(){return"Cmd.SysMessageCmd_S"},e}();e.SysMessageCmd_S=u,__reflect(u.prototype,"Cmd.SysMessageCmd_S");var d=function(){function e(){}return e.prototype.GetType=function(){return"Cmd.UserInfoSynCmd_S"},e}();e.UserInfoSynCmd_S=d,__reflect(d.prototype,"Cmd.UserInfoSynCmd_S")}(Cmd||(Cmd={}));var ui;!function(e){var t;!function(e){e.Bright="bright",e.Scale="scale"}(t=e.UIInteractive||(e.UIInteractive={}));var i=function(i){function n(){var t=i.call(this)||this;return e.PanelManage.addPanel(t),t}return __extends(n,i),n.prototype.destroy=function(){this.interactive_destroy()},Object.defineProperty(n.prototype,"interactive",{set:function(e){this.$interactive=e,e==t.Bright||e==t.Scale&&this.stage&&(0==this.anchorOffsetX&&(this.anchorOffsetX=this.width/2,this.x+=this.width/2),0==this.anchorOffsetY&&(this.anchorOffsetY=this.height/2,this.y+=this.height/2)),this.customUIInteractive()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"enabled",{get:function(){return this.$Component[3]},set:function(e){e=!!e,this.$setEnabled(e),0==e?this.interactive_changeStatus(new egret.TouchEvent("enabled")):this.interactive_changeStatus(new egret.TouchEvent("disable"))},enumerable:!0,configurable:!0}),n}(eui.Button);e.Button=i,__reflect(i.prototype,"ui.Button")}(ui||(ui={})),eui.Component.prototype.customUIInteractive||(eui.Component.prototype.customUIInteractive=function(){this.addEventListener(egret.Event.ADDED_TO_STAGE,this.interactive_onAddToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.interactive_onRemoveFromStage,this)}),eui.Component.prototype.interactive_onAddToStage||(eui.Component.prototype.interactive_onAddToStage=function(){this.interactive_addUIListener(),this.$interactive==ui.UIInteractive.Scale&&(0==this.anchorOffsetX&&(this.anchorOffsetX=this.width/2,this.x+=this.width/2),0==this.anchorOffsetY&&(this.anchorOffsetY=this.height/2,this.y+=this.height/2))}),eui.Component.prototype.interactive_onRemoveFromStage||(eui.Component.prototype.interactive_onRemoveFromStage=function(){this.interactive_removeUIListener()}),eui.Component.prototype.interactive_destroy||(eui.Component.prototype.interactive_destroy=function(){this.interactive_removeUIListener(),this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.interactive_onAddToStage,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.interactive_onRemoveFromStage,this)}),eui.Component.prototype.interactive_addUIListener||(eui.Component.prototype.interactive_addUIListener=function(){this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.interactive_changeStatus,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.interactive_changeStatus,this),this.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.interactive_changeStatus,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.interactive_changeStatus,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.interactive_changeStatus,this)}),eui.Component.prototype.interactive_removeUIListener||(eui.Component.prototype.interactive_removeUIListener=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.interactive_changeStatus,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.interactive_changeStatus,this),this.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.interactive_changeStatus,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.interactive_changeStatus,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.interactive_changeStatus,this)}),eui.Component.prototype.interactive_changeStatus||(eui.Component.prototype.interactive_changeStatus=function(e){var t=e.type;if("enabled"==t){this.filters=[];var i=[.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0];return void(this.filters=[new egret.ColorMatrixFilter(i)])}if("disable"==t)return void(this.filters=[]);if(this.$interactive!=ui.UIInteractive.Scale){var n,o;switch(t){case egret.TouchEvent.TOUCH_END:case egret.TouchEvent.TOUCH_RELEASE_OUTSIDE:case egret.TouchEvent.TOUCH_TAP:case egret.TouchEvent.TOUCH_CANCEL:o=null;break;case egret.TouchEvent.TOUCH_BEGIN:n=[1,0,0,0,51,0,1,0,0,224*.2,0,0,1,0,141*.2,0,0,0,1,0],o=new egret.ColorMatrixFilter(n);var r=uniLib.Config.InteractiveSoundName;this.InteractiveSoundName&&(r=this.InteractiveSoundName),r&&""!=r&&uniLib.SoundMgr.instance.playSound(r)}null==o?this.filters=[]:this.filters=[o]}else switch(t){case egret.TouchEvent.TOUCH_END:case egret.TouchEvent.TOUCH_RELEASE_OUTSIDE:case egret.TouchEvent.TOUCH_TAP:case egret.TouchEvent.TOUCH_CANCEL:this.scaleX=1,this.scaleY=1;break;case egret.TouchEvent.TOUCH_BEGIN:var r=uniLib.Config.InteractiveSoundName;this.InteractiveSoundName&&(r=this.InteractiveSoundName),r&&""!=r&&uniLib.SoundMgr.instance.playSound(r),this.scaleX=1.2,this.scaleY=1.2}});var ui;!function(e){var t=function(t){function i(){var i=t.call(this)||this;return e.PanelManage.addPanel(i),i}return __extends(i,t),i.prototype.destroy=function(){this.interactive_destroy()},Object.defineProperty(i.prototype,"interactive",{set:function(t){this.$interactive=t,t==e.UIInteractive.Bright||t==e.UIInteractive.Scale&&this.stage&&(0==this.anchorOffsetX&&(this.anchorOffsetX=this.width/2,this.x+=this.width/2),0==this.anchorOffsetY&&(this.anchorOffsetY=this.height/2,this.y+=this.height/2)),this.customUIInteractive()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"enabled",{get:function(){return this.$Component[3]},set:function(e){e=!!e,this.$setEnabled(e),0==e?this.interactive_changeStatus(new egret.TouchEvent("enabled")):this.interactive_changeStatus(new egret.TouchEvent("disable"))},enumerable:!0,configurable:!0}),i}(eui.ItemRenderer);e.ItemRenderer=t,__reflect(t.prototype,"ui.ItemRenderer")}(ui||(ui={}));var ui;!function(e){var t=function(){function e(){}return e.addPanel=function(e){this.panelList.push(e)},e.destroyPanel=function(){this.panelList=null!=this.panelList&&this.panelList instanceof Array?this.panelList:[];for(var e=0,t=this.panelList;e<t.length;e++){var i=t[e];null!=i&&i.destroy()}this.panelList=[]},e.panelList=[],e}();e.PanelManage=t,__reflect(t.prototype,"ui.PanelManage")}(ui||(ui={}));var GX;!function(e){function t(e){return"string"!=typeof e||0==e.length}function i(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?i:3&i|8).toString(16)});return t}function n(e){var t=new md5;return t.hex_md5(e)}function o(){return Date.now||(Date.now=function(){return(new Date).getTime()}),Date.now()/1e3|0}function r(e){var t=e.lastIndexOf(".");return-1==t?"":e.substring(t)}function a(e){var t=e.lastIndexOf("/");return-1==t?"":e.substring(0,t)}function s(e){var t=e.lastIndexOf("/");return-1==t?e:e.substring(t+1)}function l(e){var t=s(e),i=t.lastIndexOf(".");return-1==i?t:t.substring(0,i)}function c(e){return e.startsWith("http://")||e.startsWith("https://")}function h(e,t){if(void 0===t&&(t=P.ALL),null==e)return"";e=10==e.toString().length?1e3*e:e;var i=new Date(e),n=i.getFullYear(),o=(i.getMonth()+1).toString().padLeft(2,"0"),r=i.getDate().toString().padLeft(2,"0"),a=i.getHours().toString().padLeft(2,"0"),s=i.getMinutes().toString().padLeft(2,"0"),l=i.getSeconds().toString().padLeft(2,"0");return t==P.HM?a+":"+s:t==P.HMS?a+":"+s+":"+l:n+"-"+o+"-"+r+" "+a+":"+s+":"+l}function u(t,i,n,o){if(void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===o&&(o=!1),null!=t&&!(0>t)){if(t=Math.floor(t),n)return o?d(t+""):t+"";var r="",a=0,s=0;if(t=Math.floor(100*t)/100,1e4>t)r="",a=t,s=0;else if(1e8>t){r=i?"W":"万";var l=t/1e4;a=l;var c=t%1e4;s=0==c?0:2}else{r=i?"Y":"亿";var l=t/1e8;a=l;var c=t%1e8;s=0==c?0:2}var h=0==s?a+"":e.numToFixed(a,s);return h=o?d(h):h,h+=r}}function d(e){var t=parseInt(e).toString(),i=(e+"").split(".")[1],n=t.length;if(3>=n)return t+(Number(i)>0?"."+i:"");var o=n%3;return(o>0?t.slice(0,o)+","+t.slice(o,n).match(/\d{3}/g).join(","):t.slice(o,n).match(/\d{3}/g).join(","))+(Number(i)>0?"."+i:"")}function p(e,t){void 0===t&&(t=2);var i=Math.pow(10,t);e*=i,e+=1e-5,e=Math.floor(e);for(var n=Math.floor(e/i),o=e%i,r=o+"",a=r.length,s=a;t>s;s++)r="0"+r;return 0==r.length?n+"":n+"."+r}function g(e,t){var i=e.x,n=e.y,o=t.x,r=t.y,a=Math.abs(i-o),s=Math.abs(n-r),l=Math.sqrt(Math.pow(a,2)+Math.pow(s,2)),c=s/l,h=Math.acos(c),u=Math.floor(180/(Math.PI/h));return o>i&&r>n&&(u=180-u),o==i&&r>n&&(u=180),o>i&&r==n&&(u=90),i>o&&r>n&&(u=180+u),i>o&&r==n&&(u=270),i>o&&n>r&&(u=360-u),u}function m(e,t){var i=e.x-t.x,n=e.y-t.y;return Math.sqrt(i*i+n*n)}function f(e){return e*Math.PI/180}function v(e){return 180*e/Math.PI}function b(e){return e>270?4:e>180?3:e>90?2:1}function C(t,i){var n=e.getQuadrantByRadian(i),o=1==n||2==n?uniLib.Global.screenWidth:0,r=2==n||3==n?uniLib.Global.screenHeight:0,a=e.getRadian(i),s=Math.abs(o-t.x),l=Math.abs(s/Math.sin(a)*Math.cos(a)),c=Math.abs(r-t.y),h=Math.abs(c/Math.cos(a)*Math.sin(a));if(c>l){var u=1==n||4==n?t.y-l:t.y+l,d=void 0;return 1==n?d=360-i:2==n?d=360-i:3==n?d=360-i:4==n&&(d=360-i),{x:o,y:u,angle:d}}if(s>h){var p=1==n||2==n?t.x+h:t.x-h,d=void 0;return 1==n?d=180-i:2==n?d=180-i:3==n?d=360-(i-180):4==n&&(d=360-i+180),{x:p,y:r,angle:d}}}function y(e){try{if("object"==typeof JSON.parse(e))return!0}catch(t){}return!1}function L(t){return null!=t?t=t.replace(/{(\d+)}/g,function(t,i){return e.GoldFormat(i)}):void 0}function T(e){var t=(e+"").trim(),i=/^[0-9]*$/;return i.test(t)?!0:!1}function _(e){var t=[.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0],i=new egret.ColorMatrixFilter(t);e.filters=[i]}function w(e){e&&(e.filters=[])}function E(e){var t=[1,0,0,0,51,0,1,0,0,224*.2,0,0,1,0,141*.2,0,0,0,1,0],i=new egret.ColorMatrixFilter(t);e.filters=[i]}function S(e){var t=[1,.964,.999,.96,51,0,1,0,0,0,0,1,1,0,0,0,0,0,1,0],i=new egret.ColorMatrixFilter(t);e.filters=[i]}function I(e){var t=[1,0,0,0,204,0,1,0,0,204,0,0,1,0,204,0,0,0,1,0],i=new egret.ColorMatrixFilter(t);e.filters=[i]}function R(e){var t=["角","分"],i=["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"],n=[["","万","亿"],["","拾","佰","仟"]],o=0>e?"欠":"";e=Math.abs(e);for(var r="",a=0;a<t.length;a++)r+=(i[Math.floor(10*e*Math.pow(10,a))%10]+t[a]).replace(/零./,"");r=r||"",e=Math.floor(e);for(var a=0;a<n[0].length&&e>0;a++){for(var s="",l=0;l<n[1].length&&e>0;l++)s=i[e%10]+n[1][l]+s,e=Math.floor(e/10);r=s.replace(/(零.)*零$/,"").replace(/^$/,"零")+n[0][a]+r}return o+r.replace(/(零.)*零元/,"元").replace(/(零.)+/g,"零").replace(/^整$/,"零元整")}var P;!function(e){e[e.ALL=1]="ALL",e[e.HM=2]="HM",e[e.HMS=3]="HMS",e[e.MS=4]="MS"}(P=e.TimeFormat||(e.TimeFormat={}));var M;!function(e){e[e.Rect=1]="Rect",e[e.Circular=2]="Circular",e[e.RoundRect=3]="RoundRect"}(M=e.RESStyle||(e.RESStyle={})),e.stringIsNullOrEmpty=t,e.generateUUID=i,e.MD5=n,e.unixTimestamp=o,e.getExtension=r,e.getDirectoryName=a,e.getFileName=s,e.getFileNameWithoutExtension=l,e.isPathRooted=c,e.timestampToString=h,e.GoldFormat=u,e.toEnInLocaleString=d,e.numToFixed=p,e.getRadianByPoint=g,e.getDistanceByPoint=m,e.getRadian=f,e.getAngle=v,e.getQuadrantByRadian=b,e.getBorderPoint=C,e.isJsonString=y,e.GoldStringReplace=L,e.isNumber=T,e.setGray=_,e.setNomarl=w,e.setLight=E,e.setRed=S,e.setWhite=I,e.amountToChinese=R}(GX||(GX={})),Math.randomFloat||(Math.randomFloat=function(e,t){if(t>e){var i=t;t=e,e=i}return e+Math.random()*(t-e)}),Math.randomInteger||(Math.randomInteger=function(e,t){if(t>e){var i=t;t=e,e=i}return e=Math.round(e),t=Math.round(t),e+Math.floor(Math.random()*(t-e+1))}),Math.clamp||(Math.clamp=function(e,t,i){return null==e?t:t>e?t:e>i?i:e}),Math.randomInteger=function(e,t){var i=t-e+1;return Math.floor(Math.random()*i+e)},Math.randomIntegers=function(e,t,i){if(!(i>t-e+1)){for(var n=t-e+1,o=new Array,r=0;i>r;r++){for(var a=!1,s=Math.floor(Math.random()*n+e),l=0,c=o;l<c.length;l++){var h=c[l];if(h==s){a=!0,r--;break}}a||o.push(s)}return o}},Math.boolFromPercentage=function(e){return Math.random()<e?!0:!1},Number.prototype.percentage=function(){return(null!=this?this:0)/100};var GX;!function(e){var t=function(){function e(e){this.seed=e,this.seed||0==this.seed||(this.seed=(new Date).getTime())}return Object.defineProperty(e.prototype,"value",{get:function(){return this.range(0,1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"insideUnitCircle",{get:function(){var e=this.range(0,360),t=this.range(0,1),i=t*Math.cos(e*Math.PI/180),n=t*Math.sin(e*Math.PI/180);return new egret.Point(i,n)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onUnitCircle",{get:function(){var e=this.range(0,360),t=Math.cos(e*Math.PI/180),i=Math.sin(e*Math.PI/180);return new egret.Point(t,i)},enumerable:!0,configurable:!0}),e.prototype.range=function(e,t){this.seed||0==this.seed||(this.seed=(new Date).getTime()),t=t||1,e=e||0,this.seed=(9301*this.seed+49297)%233280;var i=this.seed/233280;return e+i*(t-e)},Object.defineProperty(e,"value",{get:function(){return this.range(0,1)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"insideUnitCircle",{get:function(){var e=this.range(0,360),t=this.range(0,1),i=t*Math.cos(e*Math.PI/180),n=t*Math.sin(e*Math.PI/180);return new egret.Point(i,n)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onUnitCircle",{get:function(){var e=this.range(0,360),t=Math.cos(e*Math.PI/180),i=Math.sin(e*Math.PI/180);return new egret.Point(t,i)},enumerable:!0,configurable:!0}),e.range=function(e,t){this.seed||0==this.seed||(this.seed=(new Date).getTime()),t=t||1,e=e||0,this.seed=(9301*this.seed+49297)%233280;var i=this.seed/233280;return e+i*(t-e)},e}();e.Random=t,__reflect(t.prototype,"GX.Random")}(GX||(GX={})),String.prototype.format||(String.prototype.format=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=arguments;return this.replace(/{(\d+)}/g,function(e,t){return"undefined"!=typeof i[t]?i[t]:e})}),String.prototype.padLeft||(String.prototype.padLeft=function(e,t){("string"!=typeof t||1!=t.length)&&(t=" ");for(var i="";i.length+this.length<e;)i+=t;return i+this}),String.prototype.padRight||(String.prototype.padRight=function(e,t){("string"!=typeof t||1!=t.length)&&(t=" ");for(var i="";i.length+this.length<e;)i+=t;return this+i}),String.prototype.startsWith||(String.prototype.startsWith=function(e){if(null==this||null==e)return!1;if(0==e.length)return!0;if(this.length<e.length)return!1;for(var t=0;t<e.length;t++)if(this[t]!=e[t])return!1;return!0}),String.prototype.endsWith||(String.prototype.endsWith=function(e){if(null==this||null==e)return!1;if(0==e.length)return!0;if(this.length<e.length)return!1;for(var t=0;t<e.length;t++)if(this[this.length-1-t]!=e[e.length-1-t])return!1;return!0}),String.prototype.trimEnd||(String.prototype.trimEnd=function(){return uniLib.Utils.rtrim(this)}),String.prototype.trimStart||(String.prototype.trimStart=function(){return uniLib.Utils.ltrim(this)}),String.prototype.padLeft=function(e,t){return null!=t?this.PadHelper(e,t,!1):this.PadHelper(e," ",!1)},String.prototype.PadHelper=function(e,t,i){if(this.length<e){for(var n=new String,o=1;o<=e-this.length;o++)n+=t;return i?this+n:n+this}return this};var GX;!function(e){var t=function(){function t(){}return t.removeUI=function(t){t&&t.parent&&(t.parent.removeChild(t),e.PopUpManager.UIStatckPop(t))},Object.defineProperty(t,"sceneLayer",{get:function(){return this.m_sceneLayer},set:function(e){this.m_sceneLayer=e,this.m_sceneLayer.name="sceneLayer"},enumerable:!0,configurable:!0}),t.addUIToScene=function(e){this.m_sceneLayer&&this.m_sceneLayer.addChild(e)},Object.defineProperty(t,"mainLayer",{get:function(){return this.m_mainLayer},set:function(e){this.m_mainLayer=e,this.m_mainLayer.name="mainLayer"},enumerable:!0,configurable:!0}),t.addUIToMain=function(t){this.m_mainLayer&&(this.m_mainLayer.addChild(t),e.PopUpManager.pushToUIStack(t))},Object.defineProperty(t,"effectLayer",{get:function(){return this.m_effectLayer},set:function(e){this.m_effectLayer=e,this.m_effectLayer.name="effectLayer"},enumerable:!0,configurable:!0}),t.addUIToEffect=function(t){this.m_effectLayer&&(this.m_effectLayer.addChild(t),e.PopUpManager.pushToUIStack(t))},Object.defineProperty(t,"popLayer",{get:function(){return this.m_popLayer},set:function(e){this.m_popLayer=e,e&&(this.m_popLayer.name="popLayer")},enumerable:!0,configurable:!0}),t.addUIToPop=function(t){this.m_popLayer&&(this.m_popLayer.addChild(t),e.PopUpManager.pushToUIStack(t))},Object.defineProperty(t,"maskLayer",{get:function(){return this.m_maskLayer},set:function(e){this.m_maskLayer=e,this.m_maskLayer.name="maskLayer"},enumerable:!0,configurable:!0}),t.addUIToMask=function(t){this.m_maskLayer&&(this.m_maskLayer.addChild(t),e.PopUpManager.pushToUIStack(t))},Object.defineProperty(t,"loadLayer",{get:function(){return this.m_loadLayer},set:function(e){this.m_loadLayer=e,this.m_loadLayer.name="loadLayer"},enumerable:!0,configurable:!0}),t.addUIToLoad=function(t){this.m_loadLayer&&(this.m_loadLayer.addChild(t),e.PopUpManager.pushToUIStack(t))},t.m_loadLayer=new egret.DisplayObjectContainer,t}();e.GameLayerManager=t,__reflect(t.prototype,"GX.GameLayerManager")}(GX||(GX={}));var GX;!function(e){function t(e){if(e&&e.constructor){var t=e.constructor.toString(),i=t.substr(0,t.indexOf("("));return i=i.replace("function",""),i.replace(/(^s*)|(s*$)/gi,"")}return typeof e}var i;!function(e){e[e.NOMAL=0]="NOMAL",e[e.CENTER=1]="CENTER",e[e.CENTER_S=2]="CENTER_S",e[e.LEFT=3]="LEFT",e[e.RIGHT=4]="RIGHT",e[e.TOP=5]="TOP",e[e.BOTTOM=6]="BOTTOM"}(i=e.PopUpEffect||(e.PopUpEffect={})),e._typeof=t;var n;!function(t){function n(e,n){void 0===n&&(n=i.NOMAL),null!=e&&t.PanelStack.push({panel:e,effect:n})}function o(e){if(null!=e)for(var i=0;i<t.PanelStack.length;i++){var n=t.PanelStack[i];if(n.panel==e){t.PanelStack.splice(i,1);break}}}function r(n,o,r,a,s,l,h){void 0===o&&(o=!0),void 0===a&&(a=i.NOMAL);var u=h?h:e.GameLayerManager.popLayer;if(!u||!u.contains(n)){var d=n.width,p=n.height,g=0==n.scaleX?1:n.scaleX,m=0==n.scaleY?1:n.scaleY;if(n.x=0,n.y=0,n.alpha=1,o){for(var f=null,v=0;v<t.DarkPops.length;v++){var b=t.DarkPops[v];if(b.relyPanel==n){f=b;break}}if(null==f){f=new c,f.relyPanel=n;var C=new egret.Sprite;C.graphics.clear(),C.graphics.beginFill(0,null==r?.3:r),C.graphics.drawRect(0,0,uniLib.Global.screenWidth,uniLib.Global.screenHeight),C.graphics.endFill(),C.width=uniLib.Global.screenWidth,C.height=uniLib.Global.screenHeight,f.darkSprite=C,t.DarkPops.push(f)}u.contains(f.darkSprite)||u.addChild(f.darkSprite),f.darkSprite.touchEnabled=!0,egret.Tween.get(f.darkSprite).to({alpha:1},150),f.darkSprite.visible=!0}u.addChild(n),n.x=uniLib.Global.screenWidth/2-d/2,n.y=uniLib.Global.screenHeight/2-p/2;uniLib.Global.screenWidth/2-d/2,uniLib.Global.screenHeight/2-p/2;switch(egret.Tween.removeTweens(n),null==l&&(l=300),a){case 0:break;case 1:n.alpha=0,n.scaleX=.5,n.scaleY=.5,n.x=n.x+d/4,n.y=n.y+p/4,s?egret.Tween.get(n).to({alpha:1,scaleX:g,scaleY:m,x:n.x-d/4,y:n.y-p/4},l,egret.Ease.backOut).call(s):egret.Tween.get(n).to({alpha:1,scaleX:g,scaleY:m,x:n.x-d/4,y:n.y-p/4},l,egret.Ease.backOut);break;case 2:n.alpha=0,n.scaleX=.5,n.scaleY=.5,n.x=n.x+d/4,n.y=n.y+p/4,s?egret.Tween.get(n).to({alpha:1,scaleX:g,scaleY:m,x:n.x-d/4,y:n.y-p/4},600,egret.Ease.elasticOut).call(s):egret.Tween.get(n).to({alpha:1,scaleX:g,scaleY:m,x:n.x-d/4,y:n.y-p/4},600,egret.Ease.elasticOut);break;case 3:n.x=-d,s?egret.Tween.get(n).to({x:0},l,egret.Ease.cubicOut).call(s):egret.Tween.get(n).to({x:0},l,egret.Ease.cubicOut);break;case 4:n.x=d,s?egret.Tween.get(n).to({x:0},l,egret.Ease.cubicOut).call(s):egret.Tween.get(n).to({x:0},l,egret.Ease.cubicOut);break;case 5:n.y=-p,s?egret.Tween.get(n).to({y:0},l,egret.Ease.cubicOut).call(s):egret.Tween.get(n).to({y:0},l,egret.Ease.cubicOut);break;case 6:n.y=p,s?egret.Tween.get(n).to({y:0},l,egret.Ease.cubicOut).call(s):egret.Tween.get(n).to({y:0},l,egret.Ease.cubicOut)}t.pushToUIStack(n,a)}}function a(e,n,o,r){void 0===n&&(n=i.NOMAL);var a=function(){for(var i=null,n=-1,o=0;o<t.DarkPops.length;o++){var r=t.DarkPops[o];if(r.relyPanel==e){i=r,n=o;break}}null!=i&&(i.darkSprite&&i.darkSprite.parent&&i.darkSprite.parent.removeChild(i.darkSprite),n>=0&&t.DarkPops.splice(n,1))};switch(a(),egret.Tween.removeTweens(e),null==r&&(r=300),n){case 0:break;case 1:o?egret.Tween.get(e).to({alpha:0,scaleX:0,scaleY:0,x:e.x+e.width/2,y:e.y+e.height/2},r).call(o):egret.Tween.get(e).to({alpha:0,scaleX:0,scaleY:0,x:e.x+e.width/2,y:e.y+e.height/2},r);break;case 2:break;case 3:o?egret.Tween.get(e).to({x:e.width},r,egret.Ease.cubicOut).call(o):egret.Tween.get(e).to({x:e.width},r,egret.Ease.cubicOut);break;case 4:o?egret.Tween.get(e).to({x:-e.width},r,egret.Ease.cubicOut).call(o):egret.Tween.get(e).to({x:-e.width},r,egret.Ease.cubicOut);break;case 5:o?egret.Tween.get(e).to({y:e.height},r,egret.Ease.cubicOut).call(o):egret.Tween.get(e).to({y:e.height},r,egret.Ease.cubicOut);break;case 6:o?egret.Tween.get(e).to({y:-e.height},r,egret.Ease.cubicOut).call(o):egret.Tween.get(e).to({y:-e.height},r,egret.Ease.cubicOut)}0==n&&(r=0),r>0?egret.setTimeout(function(){e.parent&&e.parent.removeChild(e)},this,r):e.parent&&e.parent.removeChild(e),t.UIStatckPop(e)}function s(){for(var e=0;e<t.DarkPops.length;e++){var i=t.DarkPops[e];i.darkSprite&&i.darkSprite.parent&&i.darkSprite.parent.removeChild(i.darkSprite)}t.DarkPops=[];for(var e=0;e<t.PanelStack.length;e++){var n=t.PanelStack[e].panel;n&&n.parent&&n.parent.removeChild(n)}t.PanelStack=[]}function l(e){for(var i=0;i<t.DarkPops.length;i++){var n=t.DarkPops[i];n.darkSprite.visible=e}for(var i=0;i<t.PanelStack.length;i++){var o=t.PanelStack[i].panel;o.visible=e}}var c=function(){function e(){}return e}();t.DarkPop=c,__reflect(c.prototype,"GX.PopUpManager.DarkPop"),t.DarkPops=[],t.PanelStack=[],t.pushToUIStack=n,t.UIStatckPop=o,t.addPopUp=r,t.removePopUp=a,t.clearPopUps=s,t.visiblePopUps=l}(n=e.PopUpManager||(e.PopUpManager={}))}(GX||(GX={}));var GX;!function(e){var t;!function(t){function i(){return uniLib.Global.screenHeight/2+t.TipsOffsetHeight}function n(i,n,o,r,a,s,l,c,h,u,d,p){if(null!=t.PopupClass){var g=new t.PopupClass(i,n,o,r,a,s,l,c);return g.x=(uniLib.Global.screenWidth-g.width)/2,g.y=(uniLib.Global.screenHeight-g.height)/2,e.PopUpManager.addPopUp(g,u,d,h,null,null,p),g}}function o(n,o,r){if(null==t.TipsClass)return null;
var s=i(),l=new t.TipsClass(n,o);return l.anchorOffsetX=l.width/2,l.anchorOffsetY=l.height/2,l.x=uniLib.Global.screenWidth/2,l.y=s,a.push(l),null==r&&(r=e.Tips.getContainer()),egret.Tween.get(l).to({scaleX:0,scaleY:0}).wait(100).call(function(){r.addChild(l)}).to({scaleX:1,scaleY:1,y:l.y-100},100).to({alpha:.5,y:l.y-300},2e3).call(function(){l.parent&&l.parent.removeChild(l);for(var e=0;e<a.length;e++)if(a[e]==l){a.splice(e,1);break}}),l}function r(){return e.GameLayerManager.popLayer?e.GameLayerManager.popLayer:uniLib.SceneManager.instance.currentScene}t.TipsOffsetHeight=60,t.showPopup=n;var a=[];t.showTips=o,t.getContainer=r}(t=e.Tips||(e.Tips={}))}(GX||(GX={}));var uniLib;!function(e){var t=function(){function e(){}return e.ADPLAT_INIT_COMPLETED="ADPLAT_INIT_COMPLETED",e.STARTUP="STARTUP",e.SEND_DATA="SEND_DATA",e.DESTORY="DESTORY",e.SYSTEM_MESSAGE="SYSTEM_MESSAGE",e.JOIN_GAME="JOIN_GAME",e.USER_INFO="USER_INFO",e.FARM_INFO="FARM_INFO",e.BUY_CROP="BUY_CROP",e.RECOVERY_CROP="RECOVERY_CROP",e.CROP_TIME_OUTCOME="CROP_TIME_OUTCOME",e.FRUIT_TIME_OUTCOME="FRUIT_TIME_OUTCOME",e.SYNTHESIS_CROP="SYNTHESIS_CROP",e.PICK_FRUIT="PICK_FRUIT",e.PICK_ALL_FRUIT="PICK_ALL_FRUIT",e.CROP_INTERCHANGE="CROP_INTERCHANGE",e.APPLY_ADD_FRIEND="APPLY_ADD_FRIEND",e.FRIEND_LIST="FRIEND_LIST",e.PLAYER_LIST="PLAYER_LIST",e.FRIEND_ASK_LIST="FRIEND_ASK_LIST",e.ENTER_FARM="ENTER_FARM",e.LEAVE_FARM="LEAVE_FARM",e}();e.FacadeConsts=t,__reflect(t.prototype,"uniLib.FacadeConsts")}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(){}return Object.defineProperty(t,"debug",{get:function(){return"true"==e.BrowersUtils.GetRequest("debug")},enumerable:!0,configurable:!0}),t.InteractiveSoundName=null,t}();e.Config=t,__reflect(t.prototype,"uniLib.Config")}(uniLib||(uniLib={}));var uniLib;!function(e){function t(t){if(e.Global.platformName="none",e.Global.isWxgame?e.Global.platformName="wx":e.Global.isTTGame?e.Global.platformName="tt":e.Global.isOppogame?e.Global.platformName="qg":e.Global.isQQGame?e.Global.platformName="qq":e.Global.isVivogame?e.Global.platformName="qg":e.Global.isFastGame&&(e.Global.platformName="hbs"),null==window.platform&&(e.Global.isH5?window.platform=new e.WebPlatform:e.Global.isNative?window.platform=new e.NativePlatform:window.platform=new e.WebPlatform),e.Global.initOpt=t,null!=t.standAlone&&(e.Global.standAlone=t.standAlone),t.designWidth&&(e.Global.designWidth=t.designWidth),t.designHeight&&(e.Global.designHeight=t.designHeight),t.msgTimeOutSec&&(e.Global.msgTimeOutSec=t.msgTimeOutSec),e.Console.init(t.debug,t.logLevel),e.ScreenUtils.init(t.scaleMode),t.gameName&&t.gameName.length>0){var i=null,n=null;e.Global.isH5?e.Config.debug?(i="http://192.168.101.100/download/"+t.gameName+"_config.json",n="http://192.168.101.100/download/"+t.gameName+".json"):(i="http://zerosgame.com/mingame_resource/table/"+t.gameName+"_config.json",n="http://zerosgame.com/mingame_resource/table/"+t.gameName+".json"):(i="https://7061-paoku-p3ru7-1302658586.tcb.qcloud.la/"+t.gameName+"_config.json",n="https://7061-paoku-p3ru7-1302658586.tcb.qcloud.la/"+t.gameName+".json"),e.Global.configUrl=i,e.Global.exportUrl=n}}function i(t){if(!t)return null;var i=e.getDefinitionByNameCache[t];if(i)return i;var n=t.split("."),o=n.length;i=window;for(var r=0;o>r;r++){var a=n[r];if(i=i[a],!i)return null}return e.getDefinitionByNameCache[t]=i,i}function n(t){var i=e.getDefinitionByName(t);return i?!0:!1}function o(t){if(!t)return null;var i="^"+t+".";if(-1==t.indexOf("."))for(var n in e.getDefinitionByNameCache)n.match(i)&&(e.getDefinitionByNameCache[n]=null,delete e.getDefinitionByNameCache[n]);else e.getDefinitionByNameCache[t]=null,delete e.getDefinitionByNameCache[t]}function r(t){return null==t?!0:e.Utils.stringIsNullOrEmpty(t.errno)?!1:"0"==t.errno?!1:!0}function a(e){if(null==e)return!0;e.errno||(e.errno="0");var t=Number(e.errno);t==Cmd.HttpReturnCode.HttpReturnCode_ServerShutDown?GX.Tips.showPopup("服务器未开，停机状态",function(){},null,null,null,"温馨提示",null,null,GX.PopUpEffect.CENTER,!0,null,egret.MainContext.instance.stage):t==Cmd.HttpReturnCode.HttpReturnCode_NoZoneDown?GX.Tips.showPopup("没有可用的区服务器，或区服未开",function(){},null,null,null,"温馨提示",null,null,GX.PopUpEffect.CENTER,!0,null,egret.MainContext.instance.stage):t==Cmd.HttpReturnCode.HttpReturnCode_GatewayErr?GX.Tips.showPopup("区服务器网关错误",function(){},null,null,null,"温馨提示",null,null,GX.PopUpEffect.CENTER,!0,null,egret.MainContext.instance.stage):t==Cmd.HttpReturnCode.HttpReturnCode_NoGatewayDown?GX.Tips.showPopup("没有可用的区服网关",function(){},null,null,null,"温馨提示",null,null,GX.PopUpEffect.CENTER,!0,null,egret.MainContext.instance.stage):t==Cmd.HttpReturnCode.HttpReturnCode_NormalErr&&GX.Tips.showPopup("网络错误",function(){},null,null,null,"温馨提示",null,null,GX.PopUpEffect.CENTER,!0,null,egret.MainContext.instance.stage)}var s=function(){function t(){this.debug=!1,this.standAlone=!0,this.designWidth=720,this.designHeight=1280,this.scaleMode=egret.StageScaleMode.SHOW_ALL,this.logLevel=e.LOGLEVEL.OFF,this.msgTimeOutSec=0,this.wssMode=!1}return t}();e.InitOptions=s,__reflect(s.prototype,"uniLib.InitOptions"),e.init=t,e.getDefinitionByNameCache={},e.getDefinitionByName=i,e.hasDefinition=n,e.delDefinitionByName=o,e.checkServerReturnCodeError=r,e.doServerReturnCodeError=a}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(){}return t.initGameConfig=function(){var t=RES.getRes("gameConfig_json");e.Global.gameConfig=t},t.pause=function(){},t.resume=function(){},t.reportAldOpenId=function(t){t&&t.length&&t.length>0&&(e.Global.wxOpenId=t,window.platform.customInterface("aldSendOpenid",{openid:t}))},t.reportAldEvent=function(e,t){null==t&&(t={});var i={name:e,params:t};window.platform.customInterface("aldSendEvent",i)},t.reportAldStageStart=function(e,t){null==t&&(t="第"+e.toString()+"关");var i={stageId:e.toString(),stageName:t};window.platform.customInterface("aldStageStart",i)},t.reportAldStageEnd=function(e,t){null==t&&(t="第"+e.toString()+"关");var i={stageId:e.toString(),stageName:t,event:"complete"};window.platform.customInterface("aldStageEnd",i)},t.reportAldStageFail=function(e,t){null==t&&(t="第"+e.toString()+"关");var i={stageId:e.toString(),stageName:t,event:"fail"};window.platform.customInterface("aldStageEnd",i)},t.reportAldStageAward=function(e,t,i){null==t&&(t="第"+e.toString()+"关"),null==i&&(i="奖励行为");var n={stageId:e.toString(),stageName:t,event:"award",params:{itemName:i}};window.platform.customInterface("aldStageRunning",n)},t.reportAldStageTools=function(e,t,i,n){null==t&&(t="第"+e.toString()+"关"),null==i&&(i="使用道具"),null==n&&(n=1);var o={stageId:e.toString(),stageName:t,event:"tools",params:{itemName:i,itemCount:n}};window.platform.customInterface("aldStageRunning",o)},t.reportUmaEvent=function(e){var t={name:"navigateToMiniProgram",params:e};window.platform.customInterface("umaSendEvent",t)},Object.defineProperty(t,"isDebug",{get:function(){return"true"==e.BrowersUtils.GetRequest("debug")?!0:t.initOpt.debug},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isH5",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.WEB},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isNative",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.RUNTIME2||egret.Capabilities.runtimeType==egret.RuntimeType.NATIVE},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isWxgame",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.WXGAME},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isQQGame",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.QQGAME},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isVivogame",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.VIVOGAME},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isOppogame",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.OPPOGAME},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isTTGame",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.TTGAME},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isFastGame",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.FASTGAME},enumerable:!0,configurable:!0}),t.isInGame=!1,t.standAlone=!1,t.msgTimeOutSec=0,t.locationUrl="https://api.liteplay.com.cn/admin/wx_config/getLocation",t}();e.Global=t,__reflect(t.prototype,"uniLib.Global")}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t}(egret.EventDispatcher);e.EventListener=t,__reflect(t.prototype,"uniLib.EventListener")}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(e,t){this.showTime=0,this.maxShowTime=10,this.bannerWidth=null,this.adUnitId=e,this.banner=null,this.bannerLoading=null,this.isShow=!1,this.createTimestamp=0,this.bannerWidth=t>0?t:null,this.load()}return Object.defineProperty(t.prototype,"id",{get:function(){return this.adUnitId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLoaded",{get:function(){return this.banner?!0:!1},enumerable:!0,configurable:!0}),t.prototype.setShowTime=function(e){this.maxShowTime=e},t.prototype.createBannerAd=function(){var t=null,i=300;e.Global.designWidth<e.Global.designHeight&&(i=e.AdPlat.instance.systemInfo.windowWidth),this.bannerWidth&&this.bannerWidth>0&&(i=this.bannerWidth);var n=.5*(e.AdPlat.instance.systemInfo.windowWidth-i),o=0;return window[e.Global.platformName]&&window[e.Global.platformName].createBannerAd&&(t=window[e.Global.platformName].createBannerAd({adUnitId:this.adUnitId,adIntervals:30,style:{left:n,top:o,width:i}})),t},t.prototype.load=function(){if(!this.bannerLoading){var e=Date.now();if(e-this.createTimestamp<1e4)return void console.warn("时间不足，未能重新加载 banner...",this.adUnitId,e-this.createTimestamp);if(this.bannerLoading=this.createBannerAd(),null==this.bannerLoading)return void console.error("创建 Banner 失败",this.adUnitId);console.log("banner loading....",this.adUnitId),this.showTime=0,this.createTimestamp=Date.now(),this.bannerLoading.onLoad(this.onBannerLoad.bind(this)),this.bannerLoading.onResize(this.onBannerResize.bind(this)),this.bannerLoading.onError(this.onBannerError.bind(this))}},t.prototype.onBannerLoad=function(){console.log("------onBannerLoad 广告加载成功------",this.adUnitId),this.destroy(),this.banner=this.bannerLoading,this.bannerLoading=null,this.isShow&&this.show(!0)},t.prototype.onBannerResize=function(t){var i=e.AdPlat.instance.systemInfo.windowHeight-t.height,n=.5*(e.AdPlat.instance.systemInfo.windowWidth-t.width);console.log("----onBannerResize top:"+i+",left:"+n+",size",t),this.bannerLoading&&this.bannerLoading.style?(this.bannerLoading.style.left=n,this.bannerLoading.style.top=i):this.banner&&this.banner.style&&(this.banner.style.left=n,this.banner.style.top=i)},t.prototype.onBannerError=function(e){console.warn("banner___error:",e.errCode," msg ",e.errMsg,this.adUnitId),this.bannerLoading&&(this.bannerLoading.offLoad(this.onBannerLoad),this.bannerLoading.offResize(this.onBannerResize),this.bannerLoading.offError(this.onBannerError),this.bannerLoading.destroy(),this.bannerLoading=null)},t.prototype.show=function(e){return console.log("showBanner",this.isShow),this.isShow=!0,null==this.banner&&null==this.bannerLoading?void this.load():void(this.banner&&this.banner.show())},t.prototype.hide=function(){return null==this.banner?void(this.isShow=!1):(this.banner.hide(),this.isShow&&(this.showTime++,this.showTime>this.maxShowTime)?(this.isShow=!1,void this.load()):void(this.isShow=!1))},t.prototype.destroy=function(){null!=this.banner&&(this.banner.offLoad(this.onBannerLoad),this.banner.offResize(this.onBannerResize),this.banner.offError(this.onBannerError),this.banner.destroy(),this.banner=null)},t}();e.AdBanner=t,__reflect(t.prototype,"uniLib.AdBanner")}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.init=function(){e.EventListener.getInstance().addEventListener(i.GAME_DATA,this.onEventHandle,this),e.EventListener.getInstance().addEventListener(i.CONNECT_GAME_SERVER,this.onEventHandle,this),e.EventListener.getInstance().addEventListener(i.LOGIN_OUT,this.onEventHandle,this)},i.prototype.onEventHandle=function(t){var n=e.ServerProxy.getInstance();switch(t.type){case i.GAME_DATA:n.sendData(t.data);break;case i.CONNECT_GAME_SERVER:n.initServer();break;case i.LOGIN_OUT:n.loginOut(t.data)}},i.prototype.onRemove=function(){e.EventListener.getInstance().removeEventListener(i.GAME_DATA,this.onEventHandle,this),e.EventListener.getInstance().removeEventListener(i.CONNECT_GAME_SERVER,this.onEventHandle,this),e.EventListener.getInstance().removeEventListener(i.LOGIN_OUT,this.onEventHandle,this)},i.GAME_DATA="game_data",i.CONNECT_GAME_SERVER="connect_game_server",i.LOGIN_OUT="loginOut",i}(e.Command);e.DataRequestCommand=t,__reflect(t.prototype,"uniLib.DataRequestCommand")}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.init=function(){e.EventListener.getInstance().addEventListener(e.FacadeConsts.DESTORY,this.onEventHandle,this)},i.prototype.onEventHandle=function(e){this.removeController(),this.removeMediator(),this.removeProxy()},i.prototype.removeController=function(){e.Facade.getInstance().removeCommand(e.FacadeConsts.SEND_DATA),e.Facade.getInstance().removeCommand(e.FacadeConsts.DESTORY)},i.prototype.removeMediator=function(){if(e.ViewConfig.mainMediator){var t=e.getDefinitionByName(e.ViewConfig.mainMediatorName);e.Facade.getInstance().removeMediator(t.NAME),e.ViewConfig.mainMediator=null}},i.prototype.removeProxy=function(){e.Facade.getInstance().removeProxy(e.ServerProxy.NAME)},i.prototype.onRemove=function(){e.EventListener.getInstance().removeEventListener(e.FacadeConsts.DESTORY,this.onEventHandle,this)},i}(e.Command);e.RemoveCommand=t,__reflect(t.prototype,"uniLib.RemoveCommand")}(uniLib||(uniLib={}));var Cmd;!function(e){function t(e,t,i){uniLib.Facade.getInstance().sendNotification(e,t,i)}function i(e,t){void 0===t&&(t=""),uniLib.Console.log(t+" ",JSON.stringify(e))}function n(e){null==e.pos&&(e.pos=0),0==e.pos?GX.Tips.showTips(e.desc):GX.Tips.showPopup(e.desc),t(uniLib.FacadeConsts.SYSTEM_MESSAGE)}function o(e){uniLib.UIMgr.instance.hideLoading(),uniLib.GameData.instance.myBaseInfo=e.userInfo,t(uniLib.FacadeConsts.JOIN_GAME)}function r(e){uniLib.GameData.instance.myBaseInfo=e,t(uniLib.FacadeConsts.USER_INFO,e)}e.dispatch=t,e.trace=i,e.OnSysMessageCmd_S=n,e.OnUserInfoSynCmd_S=o,e.OnUserInfoGetCmd_S=r}(Cmd||(Cmd={}));var uniLib;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.init=function(){e.EventListener.getInstance().addEventListener(e.FacadeConsts.STARTUP,this.onEventHandle,this),e.EventListener.getInstance().addEventListener(e.FacadeConsts.JOIN_GAME,this.onEventHandle,this)},i.prototype.destory=function(){e.EventListener.getInstance().removeEventListener(e.FacadeConsts.STARTUP,this.onEventHandle,this),e.EventListener.getInstance().removeEventListener(e.FacadeConsts.JOIN_GAME,this.onEventHandle,this)},i.prototype.onEventHandle=function(t){switch(t.type){case e.FacadeConsts.STARTUP:this.initController(),e.Global.standAlone?this.initMediator():(this.initProxy(),e.GameData.instance.myBaseInfo&&this.initMediator(),this.sendNotification(e.FacadeConsts.SEND_DATA,null,e.DataRequestCommand.CONNECT_GAME_SERVER));break;case e.FacadeConsts.JOIN_GAME:this.initMediator()}},i.prototype.execute=function(t){t.getBody();this.initController(),e.Global.standAlone?this.initMediator():(this.initProxy(),this.initMediator())},i.prototype.initController=function(){e.Facade.getInstance().registerCommand(e.FacadeConsts.SEND_DATA,new e.DataRequestCommand),e.Facade.getInstance().registerCommand(e.FacadeConsts.DESTORY,new e.RemoveCommand)},i.prototype.initMediator=function(){var t=e.getDefinitionByName(e.ViewConfig.mainMediatorName);e.ViewConfig.mainMediator=new t,e.Facade.getInstance().registerMediator(e.ViewConfig.mainMediator)},i.prototype.initProxy=function(){e.Facade.getInstance().registerProxy(new e.ServerProxy)},i}(e.Command);e.StartUpCommand=t,__reflect(t.prototype,"uniLib.StartUpCommand")}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function e(){}return e.prototype.load=function(e,t,i){this.url=e,this.loadCallback=t,this.thisObj=i,this.loadImpl=new egret.ImageLoader,this.loadImpl.addEventListener(egret.Event.COMPLETE,this.onLoadCallbackHandler,this),this.loadImpl.load(e)},e.prototype.destroy=function(){this.loadImpl&&this.loadImpl.removeEventListener(egret.Event.COMPLETE,this.onLoadCallbackHandler,this),this.url=null,this.loadImpl=null,this.loadCallback=null,this.thisObj=null},e.prototype.onLoadCallbackHandler=function(e){var t=e.currentTarget;if(t!=this.loadImpl)return void console.error("图片监听回调错误");this.loadImpl.removeEventListener(egret.Event.COMPLETE,this.onLoadCallbackHandler,this);var i=t.data,n=null;null!=i&&(n=new egret.Texture,n.bitmapData=t.data),n||console.log("图片加载失败",this.url),this.loadCallback&&this.loadCallback.call(this.thisObj,this.url,n)},e}();e.RemoteImageLoader=t,__reflect(t.prototype,"uniLib.RemoteImageLoader");var i=function(i){function n(){var e=i.call(this)||this;return e._loadingClass=null,e._loadSucc=null,e._loadError=null,e._thisObj=null,e._autoHide=!1,e._curLoadingId=0,e.curLoadingGrp="",e.hasItemLoadErr=!1,e.lastLoadGrp="",e._backGroundLoadDic={},e.cacheTextureMap={},e}return __extends(n,i),Object.defineProperty(n,"instance",{get:function(){return null==n._instance&&(n._instance=new n,n._instance.initLoadingUI()),n._instance},enumerable:!0,configurable:!0}),n.prototype.initLoadingUI=function(){this._thisObj={},this._loadSucc={},this._loadError={}},n.prototype.loadConfig=function(t,i,n,o,r){void 0===i&&(i="resource/"),e.Utils.isNetUrl(t)&&!e.Utils.isNetUrl(i)&&(i=t.substring(0,t.lastIndexOf("/")+1)),e.Global.isWxgame&&e.Utils.isNetUrl(e.Global.initOpt.wxgameResourceRemoteUrl)&&!e.Utils.isNetUrl(t)&&(i=e.Global.initOpt.wxgameResourceRemoteUrl+"wxgame/"+i,t=e.Global.initOpt.wxgameResourceRemoteUrl+"wxgame/"+t),RES.loadConfig(t,i).then(function(){n&&n.call(r,t,i)},function(){o&&o.call(r,t,i)})["catch"](function(){o&&o.call(r,t,i)})},n.prototype.load=function(t,i,n,o,r,a,s){if(void 0===a&&(a=!0),void 0===s&&(s=!0),""!=this.curLoadingGrp)return e.Console.warn("资源组 ["+this.curLoadingGrp+"] 正在加载,请等待后台加载完成"),-1==this._backGroundLoadDic.indexOf(t)&&0==RES.isGroupLoaded(t)&&this._backGroundLoadDic.push(t),RES.loadGroup(t);if(s&&null!=s||(s=!0),!i&&!r)return RES.loadGroup(t);r||this._loadingClass?(r&&(this._loadingClass=r),this._loadingClass.prototype||(s?e.UIMgr.instance.showProcessBar(r):e.UIMgr.instance.showLoadingTimeout(r))):this._loadingClass=e.UIMgr.instance.commonLoadUI,i&&(this._loadSucc[t]=i),n&&(this._loadError[t]=n),o&&(this._thisObj[t]=o),null!=a?this._autoHide=a:this._autoHide=!0,this.curLoadingGrp=t,this.lastLoadGrp=t,RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onUniLibResLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onUniLibResLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onUniLibResProgress,this),e.Console.log("RES.loadGroup ["+t+"] 开始加载");try{var l=RES.loadGroup(t,100);if(l)return l.then(function(e){},function(e){})}catch(c){e.Console.log("RES.loadGroup ["+t+"] Error "+c)}},n.prototype.onUniLibResLoadComplete=function(t){if(""==this.curLoadingGrp||t.groupName==this.curLoadingGrp){this.curLoadingGrp="";var i=t.groupName;t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onUniLibResLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onUniLibResLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onUniLibResProgress,this)),this._loadingClass&&1==this._autoHide&&egret.is(this._loadingClass.prototype,"egret.DisplayObjectContainer")&&e.UIMgr.instance.hideLoading(this._loadingClass),this._loadingClass&&(this._loadingClass=null),this._loadSucc[i]&&this._loadSucc[i].call(this._thisObj[i],t),this.removeLoadDic(i)}},n.prototype.onUniLibResLoadError=function(t){if(""==this.curLoadingGrp||t.groupName==this.curLoadingGrp){this.curLoadingGrp="";var i=t.groupName;e.Console.warn("Group:"+t.groupName+" has failed to load"),t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onUniLibResLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onUniLibResLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onUniLibResProgress,this),e.Console.error("资源组["+t.groupName+"]下载失败"),this.removeLoadDic(i))}},n.prototype.onUniLibResProgress=function(t){if(""==this.curLoadingGrp||t.groupName==this.curLoadingGrp){var i=t.groupName;this._loadingClass&&(egret.is(this._loadingClass.prototype,"egret.DisplayObjectContainer")?e.UIMgr.instance.showProcessBar(this._loadingClass,t.itemsLoaded,t.itemsTotal,"",t.groupName):this._loadingClass.call(this._thisObj[i],t)),t.itemsLoaded==t.itemsTotal&&1==this.hasItemLoadErr&&this._loadError[i]&&(this.hasItemLoadErr=!1,this.curLoadingGrp="",RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onUniLibResLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onUniLibResLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onUniLibResProgress,this),e.Console.error("资源组["+t.groupName+"]加载失败"),this.removeLoadDic(i))}},n.prototype.removeLoadDic=function(e){this._loadError[e]=null,delete this._loadError[e],this._thisObj[e]=null,delete this._thisObj[e],this._loadSucc[e]=null,delete this._loadSucc[e],this.hasItemLoadErr=!1},n.prototype.loadRemoteImage=function(e,i,n){var o=this.cacheTextureMap[e];if(null!=o)return void(i&&i.call(n,e,o));null==this.remoteImageLoaderList&&(this.remoteImageLoaderList=new Array);var r=null,a=this.getRemoteImageLoader(e);return null!=a?(r=a.callbackList,void r.push({callbackFunction:i,callbackObj:n})):(a=new t,r=new Array,r.push({callbackFunction:i,callbackObj:n}),a.callbackList=r,this.remoteImageLoaderList.push(a),void a.load(e,this.onLoadRemoteImageCallback,this))},n.prototype.getRemoteImageLoader=function(e){if(null==this.remoteImageLoaderList)return null;for(var t=0;t<this.remoteImageLoaderList.length;t++){var i=this.remoteImageLoaderList[t];if(i&&i.url==e)return i}return null},n.prototype.destroyRemoteImageLoader=function(e){if(null!=this.remoteImageLoaderList)for(var t=0;t<this.remoteImageLoaderList.length;t++){var i=this.remoteImageLoaderList[t];if(i&&i.url==e)return i.destroy(),void this.remoteImageLoaderList.splice(t,1)}},n.prototype.onLoadRemoteImageCallback=function(e,t){var i=this.getRemoteImageLoader(e);if(null!=i){e&&t&&(this.cacheTextureMap[e]=t);var n=i.callbackList;if(this.destroyRemoteImageLoader(e),n)for(var o=0;o<n.length;o++){var r=n[o].callbackFunction,a=n[o].callbackObj;r&&r.call(a,e,t)}}},n.prototype.getCacheTexture=function(e){return this.cacheTextureMap[e]},n._instance=null,n}(egret.EventDispatcher);e.ResLoadMgr=i,__reflect(i.prototype,"uniLib.ResLoadMgr")}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(e){function t(t){var i=e.call(this)||this;return i.params=t,i.backgroundLayer=new egret.DisplayObjectContainer,i.gameLayer=new egret.DisplayObjectContainer,i.effectLayer=new egret.DisplayObjectContainer,i.uiLayer=new egret.DisplayObjectContainer,i.topLayer=new egret.DisplayObjectContainer,i.maskLayer=new egret.DisplayObjectContainer,i.tipsLayer=new egret.DisplayObjectContainer,i.initBaseLayers(),i.once(egret.Event.ADDED_TO_STAGE,i.start,i),i}return __extends(t,e),t.prototype.initBaseLayers=function(){this.addChild(this.backgroundLayer),this.addChild(this.gameLayer),this.addChild(this.uiLayer),this.addChild(this.effectLayer),this.addChild(this.topLayer),this.addChild(this.maskLayer),this.addChild(this.tipsLayer),this.awake()},t.prototype.awake=function(){},t.prototype.start=function(e){},t.prototype.resize=function(){},t.prototype.destroy=function(){},t.prototype.onEnter=function(){},t.prototype.onExit=function(){},t}(egret.DisplayObjectContainer);e.Scene=t,__reflect(t.prototype,"uniLib.Scene")}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function e(){this.sceneLayer=null}return Object.defineProperty(e,"instance",{get:function(){return null==e._instance&&(e._instance=new e,e._instance.sceneLayer=new egret.DisplayObjectContainer,egret.MainContext.instance.stage.addChild(e._instance.sceneLayer)),e._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentScene",{get:function(){return this._currentScene},enumerable:!0,configurable:!0}),e.prototype.changeScene=function(e,t){var i=this,n=function(e){GX.PopUpManager.clearPopUps(),i._lastScene&&i._lastScene!=i._currentScene&&(i._lastScene.destroy&&i._lastScene.destroy(),i._lastScene.parent&&i._lastScene.parent.removeChild(i._lastScene),i._lastScene=null,GX.GameLayerManager.sceneLayer=i.sceneLayer,GX.GameLayerManager.mainLayer=i.sceneLayer,GX.GameLayerManager.effectLayer=i.sceneLayer,GX.GameLayerManager.popLayer=i.sceneLayer,GX.GameLayerManager.maskLayer=i.sceneLayer,GX.GameLayerManager.loadLayer=i.sceneLayer),GX.GameLayerManager.sceneLayer=i._currentScene.gameLayer,GX.GameLayerManager.mainLayer=i._currentScene.uiLayer,GX.GameLayerManager.effectLayer=i._currentScene.topLayer,GX.GameLayerManager.popLayer=i._currentScene.topLayer,GX.GameLayerManager.maskLayer=i._currentScene.topLayer,GX.GameLayerManager.loadLayer=i._currentScene.tipsLayer,i._currentScene.onEnter()};this._lastScene=this._currentScene,this._lastScene&&this._lastScene.onExit();var o=new e(t);return this._currentScene=o,o.once(egret.Event.ADDED_TO_STAGE,n,this),this.sceneLayer.addChild(this._currentScene),o},e.prototype.addUIToScene=function(e){this._currentScene&&this._currentScene.uiLayer.addChild(e)},e._instance=null,e}();e.SceneManager=t,__reflect(t.prototype,"uniLib.SceneManager")}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(){}return t.loadSoundGroup=function(e,i,n,o){return t.callBack=n,t.thisobj=o,t.soundGroupName=e,t.bgMusic=i,RES.isGroupLoaded(e)?void t.soundGroupLoadComplete():(RES.loadGroup(e,-100),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,t.onLoadComplete,null),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,t.onLoadError,null),void this.loadingTimeOut())},t.loadingTimeOut=function(){t.delayedTimer&&(egret.clearTimeout(t.delayedTimer),t.delayedTimer=null),t.delayedTimer=egret.setTimeout(function(){egret.clearTimeout(t.delayedTimer),t.delayedTimer=null,t.soundGroupLoadComplete()},this,5e3)},t.onLoadComplete=function(e){e.groupName==t.soundGroupName&&(console.error("soundGroup："+e.groupName+"加载完成"),t.soundGroupLoadComplete(),t.delayedTimer&&(egret.clearTimeout(t.delayedTimer),t.delayedTimer=null))},t.onResourceProgress=function(e){},t.onLoadError=function(e){e.groupName==t.soundGroupName&&(console.error("soundGroup："+e.groupName+"加载失败"),t.soundGroupLoadComplete(),t.delayedTimer&&(egret.clearTimeout(t.delayedTimer),t.delayedTimer=null))},t.soundGroupLoadComplete=function(){t.bgMusic&&e.SoundMgr.instance.playBgMusic(t.bgMusic),t.callBack&&t.callBack.call(t.thisobj),t.clearLoadSoundData()},t.clearLoadSoundData=function(){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,t.onLoadComplete,null),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,t.onLoadError,null),t.soundGroupName=null,t.bgMusic=null},t.destroyLoadSound=function(){t.clearLoadSoundData()},t}();e.Sound=t,__reflect(t.prototype,"uniLib.Sound")}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function e(){this.isStopped=!1,this.isMusic=!1,this.name="",this.position=0,this.egret_channel=null,this.res=null}return e.prototype.stop=function(){null!=this.egret_channel&&(this.egret_channel.position&&(this.position=this.egret_channel.position),this.egret_channel.stop(),this.isStopped=!0,this.egret_channel=null)},e}();e.MySoundChannel=t,__reflect(t.prototype,"uniLib.MySoundChannel");var i=function(){function i(){this.currentMusicChanel=null,this.soundRes=new Array,this.activeSound=new Array,this.loadTimeDic=new Array,this._bgMusics=null,this.currentMusicIndex=-1,this._musicOpen=!0,this._soundOpen=!0,this._soundPause=!1,this._musicVolume=1,this._soundVolume=1}return Object.defineProperty(i,"instance",{get:function(){if(null==i._instance){i._instance=new i;var t=e.Utils.getLocalStorage(i.MUSIC_TOGGLE,"true"),n=e.Utils.getLocalStorage(i.SOUND_TOGGLE,"true"),o=e.Utils.getLocalStorage(i.MUSIC_VOLUME,"1"),r=e.Utils.getLocalStorage(i.SOUND_VOLUME,"1");i._instance.musicOpen=Boolean(t),i._instance.soundOpen=Boolean(n),i._instance.musicVolume=Number(o),i._instance.soundVolume=Number(r)}return i._instance},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bgMusics",{get:function(){return this._bgMusics},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"musicOpen",{get:function(){return this._musicOpen},set:function(t){this._musicOpen=t,e.Utils.setLocalStorage(i.MUSIC_TOGGLE,this._musicOpen?"true":"false")},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"soundOpen",{get:function(){return this._soundOpen},set:function(t){this._soundOpen=t,e.Utils.setLocalStorage(i.SOUND_TOGGLE,this._soundOpen?"true":"false")},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"musicVolume",{get:function(){return this._musicVolume},set:function(t){this._musicVolume=t,this.currentMusicChanel&&this.currentMusicChanel.egret_channel&&(this.currentMusicChanel.egret_channel.volume=t),e.Utils.setLocalStorage(i.MUSIC_VOLUME,this._musicVolume.toString())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"soundVolume",{get:function(){return this._soundVolume},set:function(t){this._soundVolume=t,e.Utils.setLocalStorage(i.SOUND_VOLUME,this._soundVolume.toString())},enumerable:!0,configurable:!0}),i.prototype.play=function(e,t,i,n,o){void 0===t&&(t=1),void 0===i&&(i=0),void 0===o&&(o=!0);var r=this,a=null;n&&n.length>0&&(a=function(t){var i=t.currentTarget;null!=i&&void 0!=i&&(i.removeEventListener(egret.Event.SOUND_COMPLETE,a,r),null!=n&&void 0!=n&&(n.length>1?n[0].call(n[1],e,i):n[0](e,i)))});var s=function(a){if(a)if(r.soundRes[e]=a,1==o){var s=!0;if(r.currentMusicChanel&&null!=r.loadTimeDic[r.currentMusicChanel.name]&&null!=r.loadTimeDic[e]&&r.loadTimeDic[r.currentMusicChanel.name]>r.loadTimeDic[e]&&(s=!1),1==s){var l=r.play(e,t,i,n,o);r.resetCurrentMusic(l,e)}}else(new Date).getTime()-r.loadTimeDic[e]<=1e3&&(r.loadTimeDic[e]=0,r.activeSound[e]=r.play(e,t,i,n,o))},l=0;if(null!=this.loadTimeDic[e]&&(l=this.loadTimeDic[e]),this.loadTimeDic[e]=(new Date).getTime(),null==this.soundRes[e]||void 0==this.soundRes[e])return RES.getResAsync(e,s,this),null;var c=this.soundRes[e].play(i,t);if(null!=c){null!=a&&c.addEventListener(egret.Event.SOUND_COMPLETE,a,this);var h=1==o?this._musicVolume:this._soundVolume;return c.volume=h,c}return null},i.prototype.resetCurrentMusic=function(e,i){if(null!=e&&void 0!=e){var n=new t;n.name=i,n.isMusic=!0,n.egret_channel=e,n.res=this.soundRes[i],null!=this.currentMusicChanel&&this.currentMusicChanel!=n&&this.currentMusicChanel.name!=n.name&&this.stopBgMusic(),this.currentMusicChanel=n,this.currentMusicChanel.isStopped=!1,this.currentMusicChanel.egret_channel&&this.currentMusicChanel.egret_channel.volume&&(this.currentMusicChanel.egret_channel.volume=this._musicVolume)}},i.prototype.onMusicEnd=function(e){if(this.currentMusicIndex++,this.currentMusicIndex==this._bgMusics.length&&(this.currentMusicIndex=0),this._musicOpen&&this._bgMusics.length>0){var t=this.play(this._bgMusics[this.currentMusicIndex],1,0,[this.onMusicEnd,this]);this.resetCurrentMusic(t,this._bgMusics[this.currentMusicIndex])}},i.prototype.playBgMusic=function(e,t){if(this.stopBgMusic(),this._bgMusics=e,this.currentMusicIndex=0,this._musicOpen&&this._bgMusics.length>0&&(this.currentMusicIndex>=this._bgMusics.length&&(this.currentMusicIndex=0),null==this.currentMusicChanel||this._bgMusics[this.currentMusicIndex]!=this.currentMusicChanel.name)){var i=this.play(this._bgMusics[this.currentMusicIndex],1,t,[this.onMusicEnd,this]);
this.resetCurrentMusic(i,this._bgMusics[this.currentMusicIndex])}},i.prototype.playSound=function(e,t,i,n,o,r){if(void 0===i&&(i=1),!this._soundOpen||1==this._soundPause)return null;!t&&this.activeSound[e]&&this.stopSound(e);var a=this,s=function(e,t){a.stopSound(e),o&&o.call(r)},l=this.play(e,i,n,[s],!1);return null!=l&&(this.activeSound[e]=l),l},i.prototype.pauseBgMusic=function(){this.currentMusicChanel&&this.currentMusicChanel.stop()},i.prototype.resumeBgMusic=function(){if(this._musicOpen&&(!this.currentMusicChanel||this.currentMusicChanel.isStopped)){var e=0;if(this.currentMusicChanel&&(e=this.currentMusicChanel.position),this._bgMusics&&this._bgMusics.length>0){var t=this.play(this._bgMusics[this.currentMusicIndex],1,e,[this.onMusicEnd,this]);this.resetCurrentMusic(t,this._bgMusics[this.currentMusicIndex])}}},i.prototype.isPlayingBgMusic=function(){return this.currentMusicChanel&&0==this.currentMusicChanel.isStopped?!0:!1},i.prototype.isSoundPlaying=function(e){return this.activeSound[e]&&this.activeSound[e].position?!0:!1},i.prototype.stopBgMusic=function(e){e&&this.currentMusicChanel?"string"==typeof e?e==this.currentMusicChanel.name&&(this.currentMusicChanel.stop(),this.loadTimeDic[this.currentMusicChanel.name]=0,this.currentMusicChanel=null):e.indexOf(this.currentMusicChanel.name)>=0&&(this.currentMusicChanel.stop(),this.loadTimeDic[this.currentMusicChanel.name]=0,this.currentMusicChanel=null):this.currentMusicChanel&&(this.currentMusicChanel.stop(),this.loadTimeDic[this.currentMusicChanel.name]=0,this.currentMusicChanel=null)},i.prototype.stopSound=function(e){null!=this.activeSound[e]&&void 0!=this.activeSound[e]&&(this.activeSound[e].stop&&this.activeSound[e].stop(),this.activeSound[e]=null,delete this.activeSound[e])},i.prototype.stopSounds=function(){if(null!=this.activeSound)for(var e in this.activeSound)this.stopSound(e)},i._instance=null,i.MUSIC_TOGGLE="MUSIC_TOGGLE",i.SOUND_TOGGLE="SOUND_TOGGLE",i.MUSIC_VOLUME="MUSIC_VOLUME",i.SOUND_VOLUME="SOUND_VOLUME",i}();e.SoundMgr=i,__reflect(i.prototype,"uniLib.SoundMgr")}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(){this._commonLoadUI=null,this._tipsLoadUI=null,this._loadings={},this._effects={}}return Object.defineProperty(t,"instance",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"commonLoadUI",{get:function(){return this._commonLoadUI},set:function(e){this._commonLoadUI=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tipsLoadUI",{get:function(){return this._tipsLoadUI},set:function(e){this._tipsLoadUI=e},enumerable:!0,configurable:!0}),t.prototype.showProcessBar=function(e,t,i,n,o,r,a){return void 0===r&&(r=!1),this.showLoading(e,t,i,n,o,r,"",a)},t.prototype.showLoadingTimeout=function(e,t,i,n){void 0===t&&(t=""),void 0===i&&(i=2e4),void 0===n&&(n=""),this.showLoading(e?e:this._tipsLoadUI,null,null,n,null,!1,t);var o=this;i&&setTimeout(function(){o.hideLoading(e,t)},i)},t.prototype.hideLoading=function(e,t,i,n){if(void 0===t&&(t=""),void 0===i&&(i=!0),void 0===n&&(n=!0),""==t&&(e&&null!=e?t=egret.getQualifiedClassName(e):(t=egret.getQualifiedClassName(this._commonLoadUI),e=this._commonLoadUI)),null!=this._loadings[t]){if(1==n){this._loadings[t].parent&&this._loadings[t].parent.removeChild(this._loadings[t]);try{this._loadings[t].destroy&&this._loadings[t].destroy()}catch(o){}}else this._loadings[t].destroy?this._loadings[t].destroy():this._loadings[t].parent&&this._loadings[t].parent.removeChild(this._loadings[t]);i&&(this._loadings[t]=null,delete this._loadings[t])}},t.prototype.showLoading=function(t,i,n,o,r,a,s,l,c){void 0===a&&(a=!1),void 0===s&&(s=""),""==s?t&&null!=t?s=egret.getQualifiedClassName(t):(s=egret.getQualifiedClassName(this._commonLoadUI),t=this._commonLoadUI):null==t&&(s=egret.getQualifiedClassName(this._tipsLoadUI),t=this._tipsLoadUI),e.Utils.stringIsNullOrEmpty(s)||null==t||(null==this._loadings[s]?this._loadings[s]=new t(c):this._loadings[s].update&&"function"==typeof this._loadings[s].update&&c&&this._loadings[s].update(c),null==this._loadings[s].stage&&(this._loadings[s].setProgress&&this._loadings[s].setProgress(2,100),l?l.addChild(this._loadings[s]):e.SceneManager.instance.currentScene&&e.SceneManager.instance.currentScene.tipsLayer?e.SceneManager.instance.currentScene.tipsLayer.addChild(this._loadings[s]):egret.MainContext.instance.stage.addChild(this._loadings[s])),this._loadings[s]&&this._loadings[s].setProgress&&this._loadings[s].setProgress(i,n,o,r,a))},t._instance=null,t}();e.UIMgr=t,__reflect(t.prototype,"uniLib.UIMgr")}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return i._commandArr={},i._mediatorArr=[],i._proxyArr=[],e.initializeController(),e}return __extends(i,t),i.getInstance=function(){return null==this._instance&&(this._instance=new i),this._instance},i.prototype.initializeController=function(){this.registerCommand(e.FacadeConsts.STARTUP,new e.StartUpCommand)},i.prototype.startUp=function(t){i._commandArr={},i._mediatorArr=[],i._proxyArr=[],this.sendNotification(e.FacadeConsts.STARTUP,t)},i.prototype.registerCommand=function(e,t){t.init(),i._commandArr[e]=t},i.prototype.removeCommand=function(e){i._commandArr[e]&&(i._commandArr[e].onRemove(),i._commandArr[e]=null)},i.prototype.registerMediator=function(e){-1==i._mediatorArr.indexOf(e)&&i._mediatorArr.push(e)},i.prototype.retrieveMediator=function(e){for(var t=0;t<i._mediatorArr.length;t++)if(i._mediatorArr[t].name==e)return i._mediatorArr[t]},i.prototype.removeMediator=function(e){for(var t=0;t<i._mediatorArr.length;t++)if(i._mediatorArr[t].name==e){i._mediatorArr[t].onRemove(),i._mediatorArr.splice(t,1);break}},i.prototype.registerProxy=function(e){-1==i._proxyArr.indexOf(e)&&i._proxyArr.push(e)},i.prototype.removeProxy=function(e){for(var t=0;t<i._proxyArr.length;t++)if(i._proxyArr[t].name==e){i._proxyArr[t].onRemove(),i._proxyArr.splice(t,1);break}},i}(e.MvcSender);e.Facade=t,__reflect(t.prototype,"uniLib.Facade")}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(t){function i(e,i){var n=t.call(this)||this;return n._name=e,n._viewComponent=i,n.$addEventListener(),n}return __extends(i,t),i.prototype.$addEventListener=function(){for(var t=this.listNotificationInterests(),i=0;i<t.length;i++)e.EventListener.getInstance().addEventListener(t[i],this.onHandle,this)},Object.defineProperty(i.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),i.prototype.onHandle=function(t){var i=new e.MvcData(t);this.handleNotification(i)},i.prototype.listNotificationInterests=function(){return[]},i.prototype.handleNotification=function(e){},i.prototype.onRemove=function(){for(var t=this.listNotificationInterests(),i=0;i<t.length;i++)e.EventListener.getInstance().removeEventListener(t[i],this.onHandle,this)},i.prototype.getViewComponent=function(){return this._viewComponent},i.prototype.setViewComponent=function(e){this._viewComponent=e},i}(e.MvcSender);e.Mediator=t,__reflect(t.prototype,"uniLib.Mediator")}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function e(e){this._evt=e}return e.prototype.getName=function(){return this._evt.type},e.prototype.getBody=function(){return this._evt.data},e}();e.MvcData=t,__reflect(t.prototype,"uniLib.MvcData")}(uniLib||(uniLib={}));var ui;!function(e){var t=function(t){function i(e,i,n,o){var r=t.call(this)||this;return r.autoNavigateToMiniprogram=!1,r.skinName="AdClickMisleadViewSkin",r.adaptationWidth(),r.adaptationHeight(),r.callback=e,r.thisObj=i,r.cbParams=n,r.autoNavigateToMiniprogram=!1,uniLib.AdConfig.gameConfig.clickMislead&&(r.autoNavigateToMiniprogram=o?!0:!1),r.init(),r}return __extends(i,t),i.prototype.destroy=function(){if(this.movieClip&&(egret.Tween.removeTweens(this.movieClip),this.movieClip.stop(),this.movieClip.parent&&this.movieClip.parent.removeChild(this.movieClip),this.movieClip=null),this.circle&&(egret.Tween.removeTweens(this.circle),this.circle.parent&&this.circle.parent.removeChild(this.circle),this.circle=null),this.timerHandler&&(egret.clearInterval(this.timerHandler),this.timerHandler=null),egret.Tween.removeTweens(this.continueBtn),this.returnBtn&&egret.Tween.removeTweens(this.returnBtn),this.itemRenderList&&this.itemRenderList.length>0)for(var e=0;e<this.itemRenderList.length;e++){var i=this.itemRenderList[e];i.destroy(),i.parent&&i.parent.removeChild(i)}this.itemRenderList=[],t.prototype.destroy.call(this)},i.prototype.addUIListener=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.removeUIListener=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTap,this)},i.prototype.init=function(){var e=this;if(this.continueBtn.visible=!1,this.returnBtn&&(this.returnBtn.visible=!1),this.autoNavigateToMiniprogram)var t=egret.setTimeout(function(){egret.clearTimeout(t),e.randomNavigateToMiniProgram()},this,200);else var i=egret.setTimeout(function(){egret.clearTimeout(i),e.continueBtn.visible=!0,e.returnBtn&&(e.returnBtn.visible=!0)},this,3e3);this.onUpdateTime()},i.prototype.onLoad=function(){var t=uniLib.AdConfig.itemDataList;if(null!=t){if(this.itemRenderList&&this.itemRenderList.length>0){for(var i=0;i<this.itemRenderList.length;i++){var n=this.itemRenderList[i];n.destroy(),n.parent&&n.parent.removeChild(n)}this.itemRenderList=[]}var o=!0,r=0;this.itemRenderList=new Array,this.adGroup.removeChildren();for(var i=0;10>i&&!(i>=t.length);i++){var a=t[i],n=new e.AdItemDataRender(a,"AdFullScreenItemSkin",!0,o,r,!1);this.adGroup.addChildAt(n,0),this.itemRenderList.push(n)}null==this.timerHandler&&(this.timerHandler=egret.setInterval(this.onUpdateTime,this,3e3))}},i.prototype.onUpdateTime=function(){if(this.onLoad(),this.movieClip&&(egret.Tween.removeTweens(this.movieClip),this.movieClip.stop(),this.movieClip.parent&&this.movieClip.parent.removeChild(this.movieClip),this.movieClip=null),this.circle&&(egret.Tween.removeTweens(this.circle),this.circle.parent&&this.circle.parent.removeChild(this.circle),this.circle=null),!(this.itemRenderList.length<0)&&uniLib.AdConfig.gameConfig.clickMislead){var e=this.itemRenderList.length-1,t=uniLib.MathUtil.RandomNumBoth(0,e),i=this.itemRenderList[t];this.circle=new eui.Image("ad-guide-circle"),this.circle.touchEnabled=!1,i.addChild(this.circle),this.circle.x=.5*i.width,this.circle.y=.5*i.height,this.circle.anchorOffsetX=39.5,this.circle.anchorOffsetY=39.5,this.movieClip=uniLib.Utils.creatMovieClip("finger_effect_json","finger_effect_png","finger",-1),this.movieClip.x=.5*i.width,this.movieClip.y=.5*i.height,this.movieClip.touchEnabled=!1,i.addChild(this.movieClip),this.movieClip.gotoAndPlay(0,-1),this.circle.scaleX=this.circle.scaleY=1,egret.Tween.get(this.circle,{loop:!0}).to({scaleX:1,scaleY:1},300).to({scaleX:.5,scaleY:.5},300).to({scaleX:1,scaleY:1},300)}},i.prototype.onReturn=function(){uniLib.AdPlat.instance.hideBanner(),this.callback&&this.callback.call(this.thisObj,this.cbParams),this.callback=null,this.thisObj=null,this.cbParams=null,egret.Tween.removeTweens(this.continueBtn),GX.PopUpManager.removePopUp(this),window.platform.customInterface("showGameClubButton")},i.prototype.randomNavigateToMiniProgram=function(){var e=this;if(!(uniLib.AdConfig.itemDataList.length<=0)){var t=0,i=uniLib.AdConfig.itemDataList.length,n=uniLib.MathUtil.random(t,i);0>n?n=0:n>=uniLib.AdConfig.itemDataList.length&&(n=uniLib.AdConfig.itemDataList.length-1);var o=uniLib.AdConfig.itemDataList[n],r=this;window.platform.customInterface("navigateToMiniProgram",o,function(t,i){1==t&&(uniLib.Global.reportAldEvent("导出小游戏"+i.title),uniLib.Global.reportUmaEvent("导出小游戏"+i.title));var n=egret.setTimeout(function(){egret.clearTimeout(n),r.continueBtn.visible=!0,r.returnBtn&&(r.returnBtn.visible=!0)},e,3e3)},this)}},i.prototype.onNavigateToMiniProgramCallback=function(e,t){1==e&&(uniLib.Global.reportAldEvent("导出小游戏"+t.title),uniLib.Global.reportUmaEvent("导出小游戏"+t.title)),this.onReturn()},i.prototype.onClickTap=function(e){if(e.target==this.continueBtn)if(this.autoNavigateToMiniprogram)this.onReturn();else{var t=0;if(uniLib.AdConfig.gameConfig.clickMislead&&(t=uniLib.MathUtil.randomProbability([50,50])),0==t)this.onReturn();else{var i=0,n=uniLib.AdConfig.itemDataList.length,o=uniLib.MathUtil.random(i,n);0>o?o=0:o>=uniLib.AdConfig.itemDataList.length&&(o=uniLib.AdConfig.itemDataList.length-1);var r=uniLib.AdConfig.itemDataList[o];window.platform.customInterface("navigateToMiniProgram",r,this.onNavigateToMiniProgramCallback,this)}}else this.returnBtn&&e.target==this.returnBtn&&this.onReturn()},i}(e.BaseUI);e.AdClickMisleadView=t,__reflect(t.prototype,"ui.AdClickMisleadView")}(ui||(ui={}));var uniLib;!function(e){var t=function(){function e(){}return e}();e.ViewConfig=t,__reflect(t.prototype,"uniLib.ViewConfig")}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(e){this.loginUrl=e}return t.prototype.platLogin=function(t,i,n){this.loginCallBackFunction=t,this.loginFailFunction=i,this.loginCallBackObj=n;var o=e.Plat.initPlatInfo();e.Utils.stringIsNullOrEmpty(e.BrowersUtils.GetRequest("uid"))||(o.uid=e.BrowersUtils.GetRequest("uid")),this.login(o)},t.prototype.login=function(t){if(e.Plat.platTokenInfo&&e.Plat.platTokenInfo.gatewayurl&&e.Plat.platTokenInfo.gatewayurl.length>0)e.Plat.UID=Number(e.Plat.platTokenInfo.uid),this.gatewayUrl=e.Plat.platTokenInfo.gatewayurl,this.loginCallBackFunction&&this.loginCallBackFunction.call(this.loginCallBackObj,e.Plat.platTokenInfo.platinfo);else{var i=new Cmd.PlatTokenLogin;i.platinfo=t,this.initLogin(i)}},t.prototype.initLogin=function(t){var i=this,n=this,o=e.Plat.getPlatToken();o&&e.Plat.isCacheToken?o.gatewayurl&&o.gatewayurl.length>0?(this.gatewayUrl=o.gatewayurl,this.loginSuccess(o.platinfo)):this.selectZone(e.Plat.zoneId,function(){n.loginSuccess(e.Plat.platTokenInfo.platinfo)},this):this.sendTo(this.loginUrl,"plat-token-login",t,function(t){n.cacheLoginInfo(t.data),n.selectZone(e.Plat.zoneId,function(){n.loginSuccess(e.Plat.platTokenInfo.platinfo)},i)},this)},t.prototype.loginSuccess=function(e){this.loginCallBackFunction&&this.loginCallBackFunction.call(this.loginCallBackObj,e),this.loginCallBackFunction=null,this.loginFailFunction=null,this.loginCallBackObj=null},t.prototype.cacheLoginInfo=function(t){return null==t?!1:(e.Plat.UID=Number(t.uid),e.Plat.platTokenInfo=t,e.Plat.setPlatToken(t),!0)},t.prototype.selectZone=function(t,i,n){var o=this,r=new Cmd.RequestSelectZone;this.sendTo(this.loginUrl,"request-select-zone",r,function(t){return e.checkServerReturnCodeError(t)?(console.error("request-select-zone error..."),void e.doServerReturnCodeError(t)):(t.data&&t.data.gatewayurl&&(o.gatewayUrl=t.data.gatewayurl,e.Plat.platTokenInfo.gatewayurl=o.gatewayUrl,e.Plat.setPlatToken(e.Plat.platTokenInfo)),void(i&&i.call(n)))},this)},t.prototype.send=function(e,t,i,n){var o=null;t.GetType&&(o=t.GetType()),null==o&&(o=t["do"]||t.cmd_name),delete t["do"],delete t.cmd_name,this.sendTo(e,o,t,i,n)},t.prototype.sendTo=function(t,i,n,o,r){var a,s=new Cmd.HttpPackage;s["do"]=i,s.data=n,null!=e.Plat.UID&&e.Plat.UID>0&&(s.uid=e.Plat.UID.toString()),null!=e.Plat.gameId&&(s.gameid=e.Plat.gameId),null!=e.Plat.zoneId&&(s.zoneid=e.Plat.zoneId),e.Utils.stringIsNullOrEmpty(e.Plat.PlatToken)||(s.unigame_plat_login=e.Plat.PlatToken,a=Math.floor((new Date).getTime()/1e3),s.unigame_plat_timestamp=a);var l=JSON.stringify(s),c="?";e.Utils.stringIsNullOrEmpty(e.Plat.PlatKey)||(t+=c+"unigame_plat_sign="+e.Utils.MD5(l+(a?a.toString():"")+e.Plat.PlatKey)+"&do="+s["do"]),e.Console.isDevMode&&e.Console.log("[HTTP SEND] "+l+"\n"+t);var h=this,u=new egret.HttpRequest;u.responseType=egret.HttpResponseType.TEXT,u.open(t,egret.HttpMethod.POST),u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),u.send(l),u.addEventListener(egret.Event.COMPLETE,function(e){var i=e.currentTarget;console.log("http recv: ",i.response);var n=JSON.parse(i.response);h.onHttpComplete(t,n,o,r)},this),u.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){h.onHttpError(t,null)},this)},t.prototype.onHttpComplete=function(t,i,n,o){var r=i;if(e.Console.isDevMode&&e.Console.log("[HTTP RECV] "+JSON.stringify(r)+"\n"+t),e.checkServerReturnCodeError(r)){if("Cmd.MobileRegeristReturnCreateAccountFailLoginUserCmd_S"==r["do"]||"Cmd.UserRequestPlatTokenLoginFailLoginUserCmd_S"==r["do"]||"plat-token-login"==r["do"]||"request-select-zone"==r["do"]||"Cmd.EmailRegeristReturnCreateAccountFailLoginUserCmd_S"==r["do"]){if(e.Utils.clearLocalStorage("platToken|"+e.Plat.gameId+"|"+e.Plat.zoneId+"|"+e.Plat.platId),Number(r.errno)==Cmd.HttpReturnCode.HttpReturnCode_NeedBind&&(e.Plat.platInfo=null),1==this.onHttpError(t,r))return void console.log("-----------已经处理过了..........")}else if(("Cmd.MobileRegistReturnRandCodeLoginUserCmd_S"==r["do"]||"Cmd.EmailRegistRequestRandCodeLoginUserCmd_S"==r["do"]||"Cmd.MobileRegeristReturnRandCodeLoginUserCmd_S"==r["do"]||"Cmd.MobileRegistRequestRandCodeLoginUserCmd_C"==r["do"])&&n&&1==n.call(o,r))return;return e.Console.error("[HTTP RECV ERROR] "+JSON.stringify(r)+"\n"+t),void e.doServerReturnCodeError(r)}n&&n.call(o,r)},t.prototype.onHttpError=function(e,t){if(this.loginFailFunction){var i=this.loginFailFunction.call(this.loginCallBackObj,t);if(this.loginCallBackFunction=null,this.loginFailFunction=null,this.loginCallBackObj=null,1==i)return!0}return!1},t}();e.HttpClient=t,__reflect(t.prototype,"uniLib.HttpClient")}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(e,t){this.isConnected=0,this.isConnecting=!1,this.needReconnect=!0,this.reconnectTimes=0,this.maxCeconnectTimes=2,this.lastRecvTime=0,this.connectingTimeout=null,this.socketLoginSuc=null,this.socketLoginFail=null,this.socketLoginObj=null,this.socket=null,this.sendCache=null,this.timerActive=null,this.timerPing=null,this.loginData=null,this.wsurl=e,this.plat=t}return t.prototype.getSocket=function(){return this.socket},t.prototype.login=function(e,t,i){this.socketLoginSuc=e,this.socketLoginFail=t,this.socketLoginObj=i,this.connect()},t.prototype.connect=function(){e.Console.log("[WS OPENING NEW1] "+this.wsurl),this.socket&&this.socket.close(),this.isConnecting=!0,this.socket=new WebSocket(this.wsurl),this.socket.onopen=this.onSocketOpen.bind(this),this.socket.onmessage=this.onReceiveMessage.bind(this),this.socket.onclose=this.onSocketClose.bind(this),this.socket.onerror=this.onSocketError.bind(this),null!=this.connectingTimeout&&(clearTimeout(this.connectingTimeout),this.connectingTimeout=null);var t=this;this.connectingTimeout=setTimeout(function(){1==t.isConnecting&&(t.isConnecting=!1,t.onCloseConnect(),t.connectingTimeout=null)},3e3)},t.prototype.reConnect=function(){if(1==this.isConnecting||2==this.isConnected||0==this.needReconnect)return e.Console.warn("[WS CLOSING reConnect cancel] isConnecting:"+this.isConnecting+" , isConnected:"+this.isConnected),!1;var t={};return t["do"]="Cmd.UserLoginReconnectLoginUserCmd_C",t.accountid=e.Plat.UID,t.timestamp=(new Date).getTime(),t.tokenmd5=e.Utils.MD5(""+t.accountid+t.timestamp+e.Plat.PlatKey),t.url=this.wsurl,this.loginData=t,this.connect(),this.isConnected=2,!0},t.prototype.onCloseConnect=function(){if(2==this.isConnected)return void e.Console.warn("[WS CLOSING onCloseConnect]");if(this.isConnected=0,this.reconnectTimes<this.maxCeconnectTimes)this.reConnect()&&this.reconnectTimes++;else{this.close(!1),e.UIMgr.instance.hideLoading(e.UIMgr.instance.tipsLoadUI,"reconnect"),e.Console.warn("onCloseConnect 网络不稳定,需要重新连接");var t=this;GX.Tips.showPopup("网络不稳定,需要重新连接",function(){t.reconnectTimes=0,t.needReconnect=!0,t.reConnect()},function(){t.socketLoginFail&&(t.reconnectTimes=0,t.socketLoginFail.call(t.socketLoginObj),t.socketLoginFail=null,t.socketLoginSuc=null,t.socketLoginObj=null)},this,!0,"温馨提示",null,null,GX.PopUpEffect.CENTER,!0,null,egret.MainContext.instance.stage)}},t.prototype.close=function(e){null==e&&(e=!0),this.socket&&this.socket.close(),null!=this.connectingTimeout&&(clearTimeout(this.connectingTimeout),this.connectingTimeout=null),null!=this.timerPing&&(clearInterval(this.timerPing),this.timerPing=null),null!=this.timerActive&&(clearInterval(this.timerActive),this.timerActive=null),this.loginData=null,this.sendCache=null,this.socket=null,this.isConnected=0,this.needReconnect=e,this.isConnecting=!1,this.reconnectTimes=0},t.prototype.sendPlat=function(t){if(null!=t){var i=null;t.GetType&&(i=t.GetType()),null==i&&(i=t["do"]||t.cmd_name),delete t["do"],delete t.cmd_name;var n={};n.cmd_name=i,n.data=t,n.gameid=e.Plat.gameId,n.zoneid=e.Plat.zoneId;var o=JSON.stringify(n);1==this.sockSend(o)?e.Console.log("[WS SEND sendPlat] "+o):e.Console.warn("[WS SEND sendPlat Error] "+o)}},t.prototype.send=function(t){if(null!=t){var i=null;t.GetType&&(i=t.GetType()),null==i&&(i=t["do"]||t.cmd_name),delete t["do"],delete t.cmd_name;var n={};n["do"]=i,n.data=t;var o=JSON.stringify(n);1==this.sockSend(o)?e.Console.log("[WS SEND] "+o):e.Console.warn("[WS SEND Error] "+o)}},t.prototype.sockSend=function(t){return 0==this.isConnected||null==this.socket?(0==this.isConnecting&&null==this.connectingTimeout&&this.reConnect(),e.Console.warn("[WS SEND ERROR] can't send message when websocket closed: "+t+":"+this.isConnected),this.sendCache&&0==this.sendCache.length&&(this.sendCache.push(t),e.Console.log("[WS CACHE sockSend0]:"+t)),!1):1!=this.isConnected?(e.Console.warn("[WS SEND ERROR] wait for connecting: "+this.isConnected+":"+t),this.sendCache&&0==this.sendCache.length&&(this.sendCache.push(t),e.Console.log("[WS CACHE sockSend1]:"+t)),!1):(this.socket.send(t),!0)},t.prototype.parseData=function(t){var i=null;try{i=JSON.parse(t)}catch(n){i=null,e.Console.error(n.message),e.Console.error("parseData error: "+t)}if(null!=i)if(i instanceof Array)for(var o=0;o<i.length;o++)this.dispatch(i[o]);else this.dispatch(i)},t.prototype.dispatch=function(t){var i=this;if(null==this.timerPing&&this.socket&&(this.timerPing=setInterval(function(){i.sendPing()},3e4)),null==this.timerActive&&this.socket){var n=this;this.timerActive=setInterval(function(){n.onTickActive()},3e3)}var o=t.cmd_name,r=null;if(null==o&&(r=t),null!=r){if(e.checkServerReturnCodeError(t))return e.Console.warn("[WS RUN ERROR] server error0: "+JSON.stringify(t)),!1;o=r["do"]}if(e.checkServerReturnCodeError(t))return e.Console.warn("[WS RUN ERROR] server error1: "+JSON.stringify(t)),!1;if(null==o||""==o)return e.Console.error("cmd_name error :"+JSON.stringify(t)),!1;var a=o.split(".");a[a.length-1]="On"+a[a.length-1];for(var s="",l=0;l<a.length;l++)s+=a[l]+(l==a.length-1?"":".");if("Cmd.OnUserLoginReconnectOkLoginUserCmd_S"==s)return!0;var c=null;return null!=e.getDefinitionByName(s)&&(c=e.getDefinitionByName(s)),null!=c?(e.Console.log("[WS RECV] "+s+":"+JSON.stringify(t)),this.reconnectTimes=0,c(t.data),!0):"Cmd.OnTickPingCmd_CS"===s?!0:"Cmd.OnUserLoginReturnOkLoginUserCmd_S"===s?(e.Console.log("[WS] login to gateway success #"),this.socketLoginSuc&&(this.socketLoginSuc.call(this.socketLoginObj?this.socketLoginObj:this),this.socketLoginSuc=null),!0):"Cmd.OnUserLoginReturnFailLoginUserCmd_S"===s?(e.Console.warn("[WS socketLoginFail] "),this.socketLoginFail&&this.socketLoginFail.call(this.socketLoginObj?this.socketLoginObj:t),this.socketLoginFail=null,this.socketLoginSuc=null,this.socketLoginObj=null,!0):"Cmd.OnReconnectKickoutLoginUserCmd_S"===s?(e.EventListener.getInstance().dispatchEventWith(e.DataRequestCommand.LOGIN_OUT,!1,t),!0):(e.Console.warn("[WS RUN unprocess] ["+s+"]\n"+JSON.stringify(t)),!1)},t.prototype.sendPing=function(){var e={};e["do"]="Cmd.TickPingCmd_CS",this.sendPlat(e)},t.prototype.onTickActive=function(){var e=(new Date).getTime(),t=e-this.lastRecvTime;t>=6e4?this.checkNeedReconnect():t>=4e4&&this.reConnect()},t.prototype.checkNeedReconnect=function(){if(1==this.isConnected){var t=!1;this.socket?1!=this.socket.readyState&&(t=!0):t=!0,1==t&&this.reConnect()}else e.Console.log("checkNeedReconnect3:"+this.isConnected)},t.prototype.onSocketOpen=function(){null!=this.connectingTimeout&&(clearTimeout(this.connectingTimeout),this.connectingTimeout=null),this.isConnected=1,this.isConnecting=!1;var t=this.sendCache;if(this.sendCache=null,this.loginData&&(this.sendPlat(this.loginData),this.loginData=null),t)for(var i=0;i<t.length;i++){var n=t[i];this.sockSend(n)&&e.Console.log("[WS SEND CACHE] "+n)}null!=this.timerPing&&(clearInterval(this.timerPing),this.timerPing=null),null!=this.timerActive&&(clearInterval(this.timerActive),this.timerActive=null)},t.prototype.onReceiveMessage=function(t){if(this.lastRecvTime=(new Date).getTime(),null!=this.socket){var i=t.data;i&&""!=i?"{}"!=i&&this.parseData(i):e.Console.warn("[WS RUN ERROR] server request colose socket")}},t.prototype.onSocketClose=function(){this.isConnected=0,this.isConnecting=!1,null!=this.socket?e.Console.warn("[WS CLOSING onSocketClose0]"):e.Console.warn("[WS CLOSING onSocketClose1]"),null!=this.connectingTimeout&&(clearTimeout(this.connectingTimeout),this.connectingTimeout=null);var t=this;this.connectingTimeout=setTimeout(function(){0==t.isConnected?t.onCloseConnect():e.Console.warn("[WS CLOSING onSocketClose] isConnected:"+t.isConnected),t.connectingTimeout=null},3e3)},t.prototype.onSocketError=function(){this.isConnected=0,this.isConnecting=!1,e.Console.warn("[WS Error]"),null!=this.connectingTimeout&&(clearTimeout(this.connectingTimeout),this.connectingTimeout=null);var t=this;this.connectingTimeout=setTimeout(function(){0==t.isConnected?t.onCloseConnect():e.Console.warn("[WS CLOSING onSocketError] isConnected:"+t.isConnected),t.connectingTimeout=null},3e3)},t}();e.JsonSocket=t,__reflect(t.prototype,"uniLib.JsonSocket")}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(){}return Object.defineProperty(t,"instance",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.setPlatToken=function(t){var i="platToken|"+e.Plat.gameId+"|"+e.Plat.zoneId+"|"+e.Plat.platId,n=JSON.stringify(t);e.Utils.setLocalStorage(i,encodeURIComponent(n)),e.Console.log("cache_platinfo["+i+"]:"+n)},t.getPlatToken=function(){var i="platToken|"+e.Plat.gameId+"|"+e.Plat.zoneId+"|"+e.Plat.platId,n=e.Utils.getLocalStorage(i);return e.Console.log("get_platinfo["+i+"]:"+n),null==n||""==n?null:(t.platTokenInfo=JSON.parse(n),t.platTokenInfo.unigame_plat_key&&t.platTokenInfo.unigame_plat_login?(t.platTokenInfo.uid&&(t.UID=Number(t.platTokenInfo.uid)),t.PlatKey=t.platTokenInfo.unigame_plat_key,t.PlatToken=t.platTokenInfo.unigame_plat_login):t.platTokenInfo=null,t.platTokenInfo)},t.initPlatInfo=function(e){return null==t.platInfo&&(t.platInfo=new Cmd.PlatInfo,null!=e&&(t.platInfo=e)),t.platInfo},t.prototype.init=function(t,i,n,o){this.loginUrl=t,null==this.http||this.http.loginUrl!=this.loginUrl?(this.http=new e.HttpClient(t),this.http.platLogin(i,n,o)):i&&i.call(o)},t.prototype.initSocket=function(i,n,o){var r=t.platTokenInfo.gatewayurl;this.ws=new e.JsonSocket(r,this);var a={};a["do"]="Cmd.UserLoginTokenLoginUserCmd_C",a.accountid=t.UID,a.timestamp=(new Date).getTime(),a.tokenmd5=e.Utils.MD5(""+a.accountid+a.timestamp+t.PlatKey),a.url=r,this.ws.loginData=a,this.ws.login(i,n,o)},t.prototype.closeSocket=function(){null!=this.ws&&(this.ws.close(!1),this.ws=null)},t.prototype.logout=function(t){e.Utils.clearLocalStorage("platToken|"+e.Plat.gameId+"|"+e.Plat.zoneId+"|"+e.Plat.platId),this.closeSocket(),this.loginUrl=null,this.http=null,this.ws=null,e.Plat.platTokenInfo=null,e.Plat.gameId=null,e.Plat.zoneId=null,e.Plat.platId=null,e.Plat.UID=null,e.Plat.PlatKey=null,e.Plat.PlatToken=null,e.GameData.instance.myBaseInfo=null;var i=e.getDefinitionByName(e.ViewConfig.loginPanelName);if(e.SceneManager.instance.changeScene(i),t){var n=t.msg?t.msg:"重复登陆，被踢下线！";GX.Tips.showPopup(n)}},t.prototype.httpSend=function(e,t,i){this.http.send(this.loginUrl,e,t,i)},t.prototype.tcpSend=function(t){if(null==this.ws)return void e.Console.warn("tcpSend:网络不可用,请检查网络:"+JSON.stringify(t));var i=null;t.GetType&&(i=t.GetType()),null==i&&(i=t["do"]||t.cmd_name),"UserLoginTokenLoginUserCmd_C"!=i&&this.ws.send(t)},t.isCacheToken=!0,t.platInfo=null,t.platTokenInfo=null,t}();e.Plat=t,__reflect(t.prototype,"uniLib.Plat")}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function e(){}return e.itemDataList=[],e.firstEnterMisTouch=!1,e.checkBoxMistouch=!1,e.checkBoxProbabilitys=[],e.autoBannerShowTime=0,e.autoBannerLimit=0,e.gameConfig={},e}();e.AdConfig=t,__reflect(t.prototype,"uniLib.AdConfig")}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(t){function i(){return t.call(this,i.NAME)||this}return __extends(i,t),i.getInstance=function(){return this._instance||(this._instance=new i),this._instance},i.prototype.initServer=function(){e.UIMgr.instance.showProcessBar(null,94,100,"正在连接服务器...","",!0),e.Plat.gameId=e.Global.gameConfig.gameid,e.Plat.platId=e.Global.gameConfig.platid,e.Plat.zoneId=e.Global.gameConfig.zoneid,"false"==e.BrowersUtils.GetRequest("cacheToken")?e.Plat.isCacheToken=!1:"true"==e.BrowersUtils.GetRequest("cacheToken")&&(e.Plat.isCacheToken=!0),e.Utils.stringIsNullOrEmpty(e.BrowersUtils.GetRequest("gameid"))||(e.Plat.gameId=Number(e.BrowersUtils.GetRequest("gameid"))),e.Utils.stringIsNullOrEmpty(e.BrowersUtils.GetRequest("zoneid"))||(e.Plat.zoneId=Number(e.BrowersUtils.GetRequest("zoneid"))),e.Utils.stringIsNullOrEmpty(e.BrowersUtils.GetRequest("platid"))||(e.Plat.platId=Number(e.BrowersUtils.GetRequest("platid"))),e.Plat.instance.init(e.Global.gameConfig.login_url,this.onHttpInitSucc,this.onHttpInitFail,this)},i.prototype.loginOut=function(t){e.Plat.instance.logout(t)},i.prototype.onHttpInitSucc=function(t){e.UIMgr.instance.showProcessBar(null,95,100,"正在验证登录信息...","",!0),e.Plat.instance.initSocket(this.onSockInitSucc,this.onSockInitFail,this)},i.prototype.onHttpInitFail=function(t){return e.Console.error("## onHttpInitFail ##"),e.Plat.instance.logout(),this.onConnectFail()},i.prototype.onSockInitSucc=function(){this.onLoginServer()},i.prototype.sendData=function(t){e.Plat.instance.tcpSend(t)},i.prototype.onSockInitFail=function(){return e.Plat.instance.logout(),this.onConnectFail()},i.prototype.onConnectFail=function(){return e.Console.error("请检查网络状况"),!1},i.prototype.onRemove=function(){t.prototype.onRemove.call(this)},i.prototype.onLoginServer=function(){e.UIMgr.instance.showProcessBar(null,96,100,"正在进入游戏服务器...","",!0);var t={};t["do"]="Cmd.UserInfoSynCmd_C",this.sendData(t)},i.prototype.onLogin=function(e){this.initServer()},i.NAME="ServerProxy",i}(e.Proxy);e.ServerProxy=t,__reflect(t.prototype,"uniLib.ServerProxy")}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(){this.DEBUG_COLOR_D_SLEEP=10066329,this.DEBUG_COLOR_D_WAKE=15053490,this.DEBUG_COLOR_K=8355813,this.DEBUG_COLOR_S=8381823}return Object.defineProperty(t,"instance",{get:function(){return t._instance},set:function(e){t._instance=e},enumerable:!0,configurable:!0}),t.init=function(e){return t._instance?void 0:(t.AUTO_INCREMENT_BODY_ID=0,t._instance=new t,t._instance.init(e),t.world)},t.destroy=function(){t._instance&&t._instance.release(),t._instance=null},Object.defineProperty(t,"world",{get:function(){return t.instance._world},set:function(e){t.instance._world=e},enumerable:!0,configurable:!0}),t.measureVertices=function(e){for(var t=999999999,i=999999999,n=-999999999,o=-999999999,r=0;r<e.length;r++){var a=e[r];t>a[0]&&(t=a[0]),i>a[1]&&(i=a[1]),n<a[0]&&(n=a[0]),o<a[1]&&(o=a[1])}var s=n-t,l=o-i;return[t,i,s,l]},t.prototype.init=function(t){this._world=new p2.World,this._world.gravity=[0,9.82],this._world.sleepMode=p2.World.BODY_SLEEPING,e.Global.isDebug&&(this.debugSprite=new egret.Sprite,this.debugSprite.touchChildren=!1,this.debugSprite.touchEnabled=!1,null==t&&(t=egret.MainContext.instance.stage),t.addChild(this.debugSprite))},t.prototype.release=function(){if(this.debugSprite&&this.debugSprite.parent&&this.debugSprite.parent.removeChild(this.debugSprite),this.debugSprite=null,this._world){for(var e=this._world.bodies.length,t=0;e>t;t++){var i=this._world.bodies[t];
if(i.displays&&i.displays.length>0){for(var n=0;n<i.displays.length;n++){var o=i.displays[n];o&&o.parent&&o.parent.removeChild(o)}i.displays=[]}}this._world.clear()}this._world=null},t.prototype.createBody=function(e){t.AUTO_INCREMENT_BODY_ID++;var i=new p2.Body(e);return i.id=t.AUTO_INCREMENT_BODY_ID,this._world.addBody(i),i},t.prototype.createPlanes=function(e,t,i,n){var o=[null,null,null,null];if(null!=e){var r=new p2.Plane,a=this.createBody();a.position[0]=e,a.angle=-Math.PI/2,a.addShape(r),o[0]=a}if(null!=t){var r=new p2.Plane,a=this.createBody();a.position[0]=t,a.angle=Math.PI/2,a.addShape(r),o[1]=a}if(null!=i){var r=new p2.Plane,a=this.createBody();a.position[1]=i,a.angle=0,a.addShape(r),o[2]=a}if(null!=n){var r=new p2.Plane,a=this.createBody();a.position[1]=n,a.angle=Math.PI,a.addShape(r),o[3]=a}return o},t.prototype.createBoxBody=function(e,t,i,n,o,r,a){void 0===a&&(a=!1),null==r&&(r=[.5,.5]),r[0]<0?r[0]=0:r[0]>1&&(r[0]=1),r[1]<0?r[1]=0:r[1]>1&&(r[1]=1);var s=this.createBody(i),l=null,c=n?n:50,h=o?o:50;if(t&&e&&e.length>0){var u=RES.getRes(e);u&&(c=n?n:u.textureWidth,h=o?o:u.textureHeight,l=new egret.Bitmap(u),l.width=c,l.height=h,l.anchorOffsetX=l.width*r[0],l.anchorOffsetY=l.height*r[1],l.x=s.position[0],l.y=s.position[1],l.rotation=180*s.angle/Math.PI,l.touchEnabled=a,l.bodyId=s.id,t.addChild(l))}var d=new p2.Box({width:c,height:h});return s.displays=[],l&&s.displays.push(l),s.addShape(d),s},t.prototype.createCircleBody=function(e,t,i,n,o,r){void 0===r&&(r=!1),null==o&&(o=[.5,.5]),o[0]<0?o[0]=0:o[0]>1&&(o[0]=1),o[1]<0?o[1]=0:o[1]>1&&(o[1]=1);var a=this.createBody(i),s=null,l=n?n:25;if(t&&e&&e.length>0){var c=RES.getRes(e);c&&(l=n?n:.5*c.textureWidth,s=new egret.Bitmap(c),s.width=c.textureWidth,s.height=c.textureHeight,s.anchorOffsetX=s.width*o[0],s.anchorOffsetY=s.height*o[1],s.x=a.position[0],s.y=a.position[1],s.rotation=180*a.angle/Math.PI,s.touchEnabled=r,s.bodyId=a.id,t.addChild(s))}var h=new p2.Circle({radius:l});return a.displays=[],s&&a.displays.push(s),a.addShape(h),a},t.prototype.createCapsuleBody=function(e,t,i,n,o,r,a){void 0===a&&(a=!1),null==r&&(r=[.5,.5]),r[0]<0?r[0]=0:r[0]>1&&(r[0]=1),r[1]<0?r[1]=0:r[1]>1&&(r[1]=1);var s=this.createBody(i),l=null,c=n?n:25,h=o?o:5;if(t&&e&&e.length>0){var u=RES.getRes(e);u&&(c=n?n:u.textureHeight,h=o?o:.8*u.textureWidth,l=new egret.Bitmap(u),l.width=u.textureWidth,l.height=u.textureHeight,l.anchorOffsetX=l.width*r[0],l.anchorOffsetY=l.height*r[1],l.x=s.position[0],l.y=s.position[1],l.rotation=180*s.angle/Math.PI,l.touchEnabled=a,l.bodyId=s.id,t.addChild(l))}var d=new p2.Capsule({length:h,radius:c});return s.displays=[],l&&s.displays.push(l),s.addShape(d),s},t.prototype.createConvexBody=function(e,i,n,o,r,a){if(void 0===a&&(a=!1),null==i){var s=t.measureVertices(e),l=s[0]+.5*s[2],c=s[1]+.5*s[3];i=[l,c]}for(var h=[],u=0;u<e.length;u++){var d=e[u],p=d[0]-i[0],g=d[1]-i[1];h.push([p,g])}if(h.length<=0)return null;var m=this.createBody(r),f=new p2.Convex({vertices:h});m.addShape(f);var v=null;if(o&&n&&n.length>0){var b=RES.getRes(n);b&&(v=new egret.Bitmap(b),v.width=b.textureWidth,v.height=b.textureHeight,v.anchorOffsetX=i[0],v.anchorOffsetY=i[1],v.x=m.position[0],v.y=m.position[1],v.rotation=180*m.angle/Math.PI,v.touchEnabled=a,v.bodyId=m.id,o.addChild(v))}return m.displays=[],v&&m.displays.push(v),m},t.prototype.createConvexBodies=function(e,t,i,n,o,r,a){void 0===r&&(r=!1),void 0===a&&(a=0);for(var s=this.createBody(o),l=0;l<e.length;l++){for(var c=e[l],h=[],u=0;u<c.length;u++){var d=c[u],p=d[0],g=d[1],m=t[0],f=t[1],v=p-m,b=g-f;h.push([v,b])}var C=new p2.Convex({vertices:h});s.addShape(C)}var y=t[0],L=t[1],T=null,_=null;if(n&&i&&i.length>0){var w=RES.getRes(i);w&&(T=new egret.Bitmap(w),T.width=w.textureWidth,T.height=w.textureHeight,T.anchorOffsetX=y,T.anchorOffsetY=L,T.x=s.position[0],T.y=s.position[1],T.rotation=180*s.angle/Math.PI,T.touchEnabled=r,T.bodyId=s.id,n.addChild(T),r&&a>0&&(_=new eui.Rect,_.alpha=0,_.fillColor=16711680,_.width=T.width+a+a,_.height=T.height+a+a,_.anchorOffsetX=T.anchorOffsetX+a,_.anchorOffsetY=T.anchorOffsetY+a,_.x=T.x,_.y=T.y,_.rotation=T.rotation,_.touchEnabled=r,_.touchEnabled=T.touchEnabled,_.bodyId=s.id,n.addChild(_)))}return s.displays=[],T&&s.displays.push(T),_&&s.displays.push(_),s},t.prototype.destroyBody=function(e){if(null!=e){if(null!=e.displays){for(var t=0;t<e.displays.length;t++){var i=e.displays[t];i&&i.parent&&(egret.Tween.removeTweens(i),i.parent.removeChild(i))}e.displays=[]}this._world.removeBody(e)}},t.prototype.findBody=function(e){for(var t=this._world.bodies.length,i=0;t>i;i++){var n=this._world.bodies[i];if(n.id==e)return n}return null},t.prototype.update=function(e){null!=this._world&&(this._world.step(e),this.draw())},t.prototype.draw=function(){e.Global.isDebug&&this.drawDebug();for(var t=this._world.bodies.length,i=0;t>i;i++){var n=this._world.bodies[i];if(n.displays&&n.displays.length>0)for(var o=0;o<n.displays.length;o++){var r=n.displays[o];if(r){var a=r.offset;null==a&&(a=[0,0]),r.x=n.position[0]+a[0],r.y=n.position[1]+a[1],r.rotation=180*n.angle/Math.PI}}}},t.prototype.drawDebug=function(){if(null!=this.debugSprite){this.debugSprite.graphics.clear();for(var e=this._world.bodies.length,t=0;e>t;t++)for(var i=this._world.bodies[t],n=0;n<i.shapes.length;n++){var o=i.shapes[n];o instanceof p2.Convex?this.drawDebugConvex(o,i):o instanceof p2.Circle?this.drawDebugCircle(o,i):o instanceof p2.Line?this.drawDebugLine(o,i):o instanceof p2.Particle?this.drawDebugParticle(o,i):o instanceof p2.Plane?this.drawDebugPlane(o,i):o instanceof p2.Capsule?this.drawDebugCapsule(o,i):o instanceof p2.Heightfield&&this.drawDebugHeightfield(o,i)}}},t.prototype.drawDebugCircle=function(e,t){var i=this.getDebugColor(t),n=this.debugSprite.graphics;n.lineStyle(1,i),n.beginFill(i,.5),n.drawCircle(t.position[0],t.position[1],e.radius);var o=new Array;t.toWorldFrame(o,[e.radius,0]),n.moveTo(t.position[0],t.position[1]),n.lineTo(o[0],o[1]),n.endFill()},t.prototype.drawDebugCapsule=function(e,t){var i=this.getDebugColor(t),n=e.length,o=e.radius,r=new Array,a=new Array,s=new Array,l=new Array,c=new Array,h=new Array;t.toWorldFrame(r,[-n/2,-o]),t.toWorldFrame(a,[n/2,-o]),t.toWorldFrame(s,[n/2,o]),t.toWorldFrame(l,[-n/2,o]),t.toWorldFrame(c,[n/2,0]),t.toWorldFrame(h,[-n/2,0]);var u=this.debugSprite.graphics;u.lineStyle(1,i),u.beginFill(i,.5),u.drawCircle(c[0],c[1],o),u.endFill(),u.lineStyle(1,i),u.beginFill(i,.5),u.drawCircle(h[0],h[1],o),u.endFill(),u.lineStyle(1,i),u.beginFill(i,.5),u.moveTo(r[0],r[1]),u.lineTo(a[0],a[1]),u.lineTo(s[0],s[1]),u.lineTo(l[0],l[1]),u.endFill()},t.prototype.drawDebugLine=function(e,t){var i=this.getDebugColor(t),n=e.length,o=new Array,r=new Array;t.toWorldFrame(o,[-n/2,0]),t.toWorldFrame(r,[n/2,0]);var a=this.debugSprite.graphics;a.lineStyle(1,i),a.moveTo(o[0],o[1]),a.lineTo(r[0],r[1]),a.endFill()},t.prototype.drawDebugParticle=function(e,t){var i=this.getDebugColor(t),n=this.debugSprite.graphics;n.lineStyle(1,i),n.beginFill(i,.5),n.drawCircle(t.position[0],t.position[1],1),n.endFill(),n.lineStyle(1,i),n.drawCircle(t.position[0],t.position[1],5),n.endFill()},t.prototype.drawDebugConvex=function(e,t){var i=this.getDebugColor(t),n=e.vertices.length,o=this.debugSprite.graphics;o.lineStyle(1,i),o.beginFill(i,.5);var r=new Array;t.toWorldFrame(r,e.vertices[0]),o.moveTo(t.position[0],t.position[1]),o.lineTo(r[0],r[1]);for(var a=1;n>=a;a++)t.toWorldFrame(r,e.vertices[a%n]),o.lineTo(r[0],r[1]);o.endFill()},t.prototype.drawDebugPlane=function(e,t){var i=this.DEBUG_COLOR_D_SLEEP,n=this.debugSprite.graphics;n.lineStyle(1,i),n.beginFill(i,1);var o=new Array,r=new Array;t.toWorldFrame(o,[-1280,0]),n.moveTo(o[0],o[1]),t.toWorldFrame(r,[1280,0]),n.lineTo(r[0],r[1]),t.toWorldFrame(r,[1280,-1280]),n.lineTo(r[0],r[1]),t.toWorldFrame(r,[-1280,-1280]),n.lineTo(r[0],r[1]),t.toWorldFrame(r,[-1280,-0]),n.lineTo(r[0],r[1]),n.endFill()},t.prototype.drawDebugHeightfield=function(e,t){var i=this.getDebugColor(t),n=e.heights,o=n.length,r=e.elementWidth;if(o>0){var a=e.position[0],s=e.position[1],l=[],c=[],h=0,u=this.debugSprite.graphics;u.lineStyle(1,i),u.beginFill(i,.5),t.toWorldFrame(c,[a+h,s-100]),u.moveTo(c[0],c[1]);for(var d=0;o>d;d++){var p=n[d];t.toWorldFrame(l,[a+h+d*r,s+p]),u.lineTo(l[0],l[1])}t.toWorldFrame(l,[a+h+o*r,s-100]),u.lineTo(l[0],l[1]),u.endFill()}},t.prototype.getDebugColor=function(e){var t=this.DEBUG_COLOR_D_SLEEP;return e.type==p2.Body.KINEMATIC?t=this.DEBUG_COLOR_K:e.type==p2.Body.STATIC?t=this.DEBUG_COLOR_S:e.sleepState==p2.Body.AWAKE&&(t=this.DEBUG_COLOR_D_WAKE),t},t._instance=null,t.AUTO_INCREMENT_BODY_ID=0,t}();e.PhysicsTool=t,__reflect(t.prototype,"uniLib.PhysicsTool")}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function e(){}return e}();e.NativeObject=t,__reflect(t.prototype,"uniLib.NativeObject");var i=function(){function i(){}return i.callNative=function(e){egret.ExternalInterface.call(i.SENDTONATIVE,JSON.stringify(e))},i.onNativeMessage=function(e){var t=null;t="string"==typeof e?JSON.parse(e):e,t.cmd&&this._callBacks[t.cmd]&&(this._callBacks[t.cmd][1]&&null!=this._callBacks[t.cmd][1]?this._callBacks[t.cmd][0].call(this._callBacks[t.cmd][1],t):this._callBacks[t.cmd][0]&&this._callBacks[t.cmd][0](t))},i.init=function(n,o){if(!this.isInited){this.isInited=!0,egret.ExternalInterface.addCallback(i.SENDTOJS,function(t){e.Console.log("message form native : "+t),i.onNativeMessage(t)});var r=new t;r.cmd=i.INIT,i.callNative(r)}},i.login=function(e,n,o){e&&(this._callBacks[i.LOGIN]=[e,n]);var r=new t;r.cmd=i.LOGIN,r.code=0,r.data=o,i.callNative(r)},i.logout=function(){var e=new t;e.cmd=i.LOGOUT,i.callNative(e)},i.exit=function(){var e=new t;e.cmd=i.EXITGAME,i.callNative(e)},i.getNaviveBoard=function(e,n){e&&null!=e&&(this._callBacks[this.GETNATIVEBOARD]=[e,n]);var o=new t;o.cmd=i.GETNATIVEBOARD,i.callNative(o)},i.nativeCopyStr=function(e){var n=new t;n.cmd=i.NATIVECOPY,n.data={},n.data.copyStr=e,i.callNative(n)},i.openWeb=function(e){var n=new t;n.cmd=i.OPENWEB,n.data={},n.data.webUrl=e,n.data.model=0,i.callNative(n)},i.showInterstitialAd=function(e,n,o){n&&null!=n&&(this._callBacks[this.CLOSE_INTERSTITIALAD]=[n,o]);var r=new t;r.cmd=i.SHOW_INTERSTITIALAD,r.action=e,i.callNative(r)},i.SENDTONATIVE="sendToNative",i.SENDTOJS="sendToJs",i.INIT="init",i.LOGIN="login",i.LOGOUT="logout",i.SHARE="share",i.EXITGAME="exitGame",i.OPENWEB="openWeb",i.NATIVECOPY="nativeCopy",i.GETNATIVEBOARD="getNativeBoard",i.NETSTATE="netState",i.SHOW_INTERSTITIALAD="showInterstitialAd",i.CLOSE_INTERSTITIALAD="closeInterstitialAd",i._callBacks=new Array,i.isInited=!1,i}();e.NativeGameSdk=i,__reflect(i.prototype,"uniLib.NativeGameSdk")}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(){}return t.prototype.init=function(t,i){console.log("NativePlatform.init"),e.NativeGameSdk.init(t,i)},t.prototype.login=function(e,t,i){console.log("NativePlatform.login")},t.prototype.logout=function(e,t){console.log("NativePlatform.logout")},t.prototype.openWeb=function(e){console.log("NativePlatform.openWeb",e)},t.prototype.showAutoBanner=function(e,t){},t.prototype.showBannerAdvertisement=function(e,t,i){console.log("NativePlatform.showBannerAdvertisement")},t.prototype.hideBannerAdvertisement=function(e){console.log("NativePlatform.hideBannerAdvertisement")},t.prototype.showInterstitialAdvertisement=function(e,t,i){console.log("NativePlatform.showInterstitialAdvertisement")},t.prototype.showNativeAdvertisement=function(e,t,i){},t.prototype.showVideoAdvertisement=function(e,t,i){console.log("NativePlatform.showVideoAdvertisement")},t.prototype.showAppBoxAdvertisement=function(e,t,i){console.log("NativePlatform.showAppBoxAdvertisement")},t.prototype.downloadResource=function(e,t,i,n,o){i&&i.call(o,!0)},t.prototype.clearResCache=function(){},t.prototype.exitApp=function(){console.log("NativePlatform.exitApp")},t.prototype.customInterface=function(e,t,i,n){i&&i.call(n)},t}();e.NativePlatform=t,__reflect(t.prototype,"uniLib.NativePlatform",["uniLib.Platform"])}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function e(){}return e.prototype.init=function(e,t){console.log("WebPlatform.init");var i={};e&&e.call(t,i)},e.prototype.login=function(e,t,i){console.log("WebPlatform.login")},e.prototype.logout=function(e,t){console.log("WebPlatform.logout")},e.prototype.openWeb=function(e){console.log("WebPlatform.openWeb",e)},e.prototype.showAutoBanner=function(e,t){},e.prototype.showBannerAdvertisement=function(e,t,i){console.log("WebPlatform.showBannerAdvertisement")},e.prototype.hideBannerAdvertisement=function(e){console.log("WebPlatform.hideBannerAdvertisement")},e.prototype.showInterstitialAdvertisement=function(e,t,i){console.log("WebPlatform.showInterstitialAdvertisement")},e.prototype.showNativeAdvertisement=function(e,t,i){console.log("WebPlatform.showNativeAdvertisement")},e.prototype.showVideoAdvertisement=function(e,t,i){console.log("WebPlatform.showVideoAdvertisement")},e.prototype.showAppBoxAdvertisement=function(e,t,i){console.log("WebPlatform.showAppBoxAdvertisement")},e.prototype.downloadResource=function(e,t,i,n,o){i&&i.call(o,!0)},e.prototype.clearResCache=function(){},e.prototype.exitApp=function(){console.log("WebPlatform.exitApp")},e.prototype.customInterface=function(e,t,i,n){console.log("WebPlatform.customInterface",e,t)},e}();e.WebPlatform=t,__reflect(t.prototype,"uniLib.WebPlatform",["uniLib.Platform"])}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function e(){}return e.reload=function(){window.location.reload()},e.redirect=function(e){location.href=e},e.isWechat=function(){var e=navigator.userAgent.toString();return null!=e.match(/MicroMessenger/i)&&"MicroMessenger"==e.match(/MicroMessenger/i).toString()?!0:!1},e.isAndroid=function(){var e=navigator.userAgent.toString();return e.indexOf("Android")>-1||e.indexOf("Linux")>-1?!0:!1},e.GetRequest=function(e,t){var i,n=null;i=null!=t&&""!=t?t:location.search;var o=new RegExp("[?&]"+e+"=([^&]+)","gi"),r=o.exec(i);if(null!=r)try{n=decodeURIComponent(decodeURIComponent(r[1]))}catch(a){try{n=decodeURIComponent(r[1])}catch(a){n=r[1]}}return n},e.GetRequests=function(e){var t=null;t=e?e:location.search;var i=new Object;if(t){0==t.indexOf("?")&&(t=t.substr(1));for(var n=t.split("&"),o=0;o<n.length;o++)i[n[o].split("=")[0]]=decodeURIComponent(n[o].split("=")[1])}return i},e}();e.BrowersUtils=t,__reflect(t.prototype,"uniLib.BrowersUtils")}(uniLib||(uniLib={}));var uniLib;!function(e){var t;!function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e[e.OFF=4]="OFF"}(t=e.LOGLEVEL||(e.LOGLEVEL={}));var i=function(){function e(){}return e.setLogLevel=function(e){void 0===e&&(e=t.OFF),this.isDevMode?this.LogLevel=t.DEBUG:this.LogLevel=e,this.LogLevel<=t.DEBUG?egret.Logger.logLevel=egret.Logger.ALL:this.LogLevel<=t.INFO?egret.Logger.logLevel=egret.Logger.INFO:this.LogLevel<=t.WARN?egret.Logger.logLevel=egret.Logger.WARN:this.LogLevel<=t.ERROR?egret.Logger.logLevel=egret.Logger.ERROR:egret.Logger.logLevel=egret.Logger.OFF},e.init=function(e,t){this.isDevMode=e,this.setLogLevel(t)},e.log=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];for(var o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];var a=this.LogLevel;a<=t.DEBUG&&((null==e||void 0==e||"string"==typeof e&&""==e)&&this.error("日志不能为空,请加标识头!"),console.log((new Date).toTimeString().split(" ")[0],"LOG",e,o))},e.debug=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];for(var o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];var a=this.LogLevel;a<=t.DEBUG&&((null==e||void 0==e||"string"==typeof e&&""==e)&&this.error("日志不能为空,请加标识头"),console.debug((new Date).toTimeString().split(" ")[0],"DEBUG",e,o))},e.info=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];for(var o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];var a=this.LogLevel;a<=t.INFO&&((null==e||void 0==e||"string"==typeof e&&""==e)&&this.error("日志不能为空,请加标识头"),console.info((new Date).toTimeString().split(" ")[0],"INFO",e,o))},e.warn=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];for(var o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];var a=this.LogLevel;a<=t.WARN&&((null==e||void 0==e||"string"==typeof e&&""==e)&&this.error("日志不能为空,请加标识头"),console.warn((new Date).toTimeString().split(" ")[0],"WARN",e,o))},e.error=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];for(var o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];var a=this.LogLevel;a<=t.ERROR&&((null==e||void 0==e||"string"==typeof e&&""==e)&&this.error("日志不能为空,请加标识头"),console.error((new Date).toTimeString().split(" ")[0],"ERROR",e,o))},e.isDevMode=!1,e}();e.Console=i,__reflect(i.prototype,"uniLib.Console")}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(){}return t.pow=function(e){return void 0===e&&(e=0),e*e},t.vectorRotation=function(e,t){return new egret.Point(Math.cos(t)*Math.sqrt(e.x*e.x+e.y*e.y),Math.sin(t)*Math.sqrt(e.x*e.x+e.y*e.y))},t.disTest=function(e,i,n,o){return void 0===o&&(o=0),t.pow(e.x-n.x)+t.pow(e.y-n.y)<=t.pow(i+o)},t.random=function(e,t){return Math.round(Math.random()*(t-e)+e)},t.RandomNumBoth=function(e,t){var i=t-e,n=Math.random(),o=e+Math.round(n*i);return o},t.randomProbability=function(t){null==t&&(t=[]);for(var i=0,n=0;n<t.length;n++)i+=t[n];for(var n=0;n<t.length;n++){var o=e.MathUtil.RandomNumBoth(0,i);if(o<t[n])return n;i-=t[n]}for(var r=-1,a=0,n=0;n<t.length;n++)a<t[n]&&(a=t[n],r=n);return r},t.randArray=function(e){for(var t=0;t<e.length;t++){var i=parseInt((e.length*Math.random()).toString()),n=e[t];e[t]=e[i],e[i]=n}return e},t.pointIsInRound=function(e,i,n,o,r){return t.pow(e-o)+t.pow(i-r)<t.pow(n)},t.binary=function(e,i,n,o){if(o>=n){if(i[n]==e)return n;if(i[o]==e)return o;var r=Math.ceil((o+n)/2);return i[r]==e?r:i[r]>e?t.binary(e,i,n,r-1):t.binary(e,i,r+1,o)}return-1},t.getStrRealLength=function(e){var t={GetLength:null};return t.GetLength=function(e){return Number(e.replace(/[\u0391-\uFFE5]/g,"aa").length)},t.GetLength(e)},t}();e.MathUtil=t,__reflect(t.prototype,"uniLib.MathUtil")}(uniLib||(uniLib={}));var md5=function(){function e(){this.hexcase=0,this.b64pad=""}return e.prototype.hex_md5=function(e){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(e)))},e.prototype.b64_md5=function(e){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(e)))},e.prototype.any_md5=function(e,t){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(e)),t)},e.prototype.hex_hmac_md5=function(e,t){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},e.prototype.b64_hmac_md5=function(e,t){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},e.prototype.any_hmac_md5=function(e,t,i){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)),i)},e.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},e.prototype.rstr_md5=function(e){return this.binl2rstr(this.binl_md5(this.rstr2binl(e),8*e.length))},e.prototype.rstr_hmac_md5=function(e,t){var i=this.rstr2binl(e);i.length>16&&(i=this.binl_md5(i,8*e.length));for(var n=Array(16),o=Array(16),r=0;16>r;r++)n[r]=909522486^i[r],o[r]=1549556828^i[r];var a=this.binl_md5(n.concat(this.rstr2binl(t)),512+8*t.length);return this.binl2rstr(this.binl_md5(o.concat(a),640))},e.prototype.rstr2hex=function(e){try{this.hexcase}catch(t){this.hexcase=0}for(var i,n=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",o="",r=0;r<e.length;r++)i=e.charCodeAt(r),o+=n.charAt(i>>>4&15)+n.charAt(15&i);return o},e.prototype.rstr2b64=function(e){try{this.b64pad}catch(t){this.b64pad=""}for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",o=e.length,r=0;o>r;r+=3)for(var a=e.charCodeAt(r)<<16|(o>r+1?e.charCodeAt(r+1)<<8:0)|(o>r+2?e.charCodeAt(r+2):0),s=0;4>s;s++)n+=8*r+6*s>8*e.length?this.b64pad:i.charAt(a>>>6*(3-s)&63);return n},e.prototype.rstr2any=function(e,t){var i,n,o,r,a,s=t.length,l=Array(Math.ceil(e.length/2));for(i=0;i<l.length;i++)l[i]=e.charCodeAt(2*i)<<8|e.charCodeAt(2*i+1);var c=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2))),h=Array(c);for(n=0;c>n;n++){for(a=Array(),r=0,i=0;i<l.length;i++)r=(r<<16)+l[i],o=Math.floor(r/s),r-=o*s,(a.length>0||o>0)&&(a[a.length]=o);h[n]=r,l=a}var u="";for(i=h.length-1;i>=0;i--)u+=t.charAt(h[i]);return u},e.prototype.str2rstr_utf8=function(e){for(var t,i,n="",o=-1;++o<e.length;)t=e.charCodeAt(o),i=o+1<e.length?e.charCodeAt(o+1):0,t>=55296&&56319>=t&&i>=56320&&57343>=i&&(t=65536+((1023&t)<<10)+(1023&i),o++),127>=t?n+=String.fromCharCode(t):2047>=t?n+=String.fromCharCode(192|t>>>6&31,128|63&t):65535>=t?n+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):2097151>=t&&(n+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return n},e.prototype.str2rstr_utf16le=function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(255&e.charCodeAt(i),e.charCodeAt(i)>>>8&255);return t},e.prototype.str2rstr_utf16be=function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(e.charCodeAt(i)>>>8&255,255&e.charCodeAt(i));return t},e.prototype.rstr2binl=function(e){for(var t=Array(e.length>>2),i=0;i<t.length;i++)t[i]=0;for(var i=0;i<8*e.length;i+=8)t[i>>5]|=(255&e.charCodeAt(i/8))<<i%32;return t},e.prototype.binl2rstr=function(e){for(var t="",i=0;i<32*e.length;i+=8)t+=String.fromCharCode(e[i>>5]>>>i%32&255);return t},e.prototype.binl_md5=function(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var i=1732584193,n=-271733879,o=-1732584194,r=271733878,a=0;a<e.length;a+=16){var s=i,l=n,c=o,h=r;i=this.md5_ff(i,n,o,r,e[a+0],7,-680876936),r=this.md5_ff(r,i,n,o,e[a+1],12,-389564586),o=this.md5_ff(o,r,i,n,e[a+2],17,606105819),n=this.md5_ff(n,o,r,i,e[a+3],22,-1044525330),i=this.md5_ff(i,n,o,r,e[a+4],7,-176418897),r=this.md5_ff(r,i,n,o,e[a+5],12,1200080426),o=this.md5_ff(o,r,i,n,e[a+6],17,-1473231341),n=this.md5_ff(n,o,r,i,e[a+7],22,-45705983),i=this.md5_ff(i,n,o,r,e[a+8],7,1770035416),r=this.md5_ff(r,i,n,o,e[a+9],12,-1958414417),o=this.md5_ff(o,r,i,n,e[a+10],17,-42063),n=this.md5_ff(n,o,r,i,e[a+11],22,-1990404162),i=this.md5_ff(i,n,o,r,e[a+12],7,1804603682),r=this.md5_ff(r,i,n,o,e[a+13],12,-40341101),o=this.md5_ff(o,r,i,n,e[a+14],17,-1502002290),n=this.md5_ff(n,o,r,i,e[a+15],22,1236535329),i=this.md5_gg(i,n,o,r,e[a+1],5,-165796510),r=this.md5_gg(r,i,n,o,e[a+6],9,-1069501632),o=this.md5_gg(o,r,i,n,e[a+11],14,643717713),n=this.md5_gg(n,o,r,i,e[a+0],20,-373897302),i=this.md5_gg(i,n,o,r,e[a+5],5,-701558691),r=this.md5_gg(r,i,n,o,e[a+10],9,38016083),o=this.md5_gg(o,r,i,n,e[a+15],14,-660478335),n=this.md5_gg(n,o,r,i,e[a+4],20,-405537848),i=this.md5_gg(i,n,o,r,e[a+9],5,568446438),r=this.md5_gg(r,i,n,o,e[a+14],9,-1019803690),o=this.md5_gg(o,r,i,n,e[a+3],14,-187363961),n=this.md5_gg(n,o,r,i,e[a+8],20,1163531501),i=this.md5_gg(i,n,o,r,e[a+13],5,-1444681467),r=this.md5_gg(r,i,n,o,e[a+2],9,-51403784),o=this.md5_gg(o,r,i,n,e[a+7],14,1735328473),n=this.md5_gg(n,o,r,i,e[a+12],20,-1926607734),i=this.md5_hh(i,n,o,r,e[a+5],4,-378558),r=this.md5_hh(r,i,n,o,e[a+8],11,-2022574463),o=this.md5_hh(o,r,i,n,e[a+11],16,1839030562),n=this.md5_hh(n,o,r,i,e[a+14],23,-35309556),i=this.md5_hh(i,n,o,r,e[a+1],4,-1530992060),r=this.md5_hh(r,i,n,o,e[a+4],11,1272893353),o=this.md5_hh(o,r,i,n,e[a+7],16,-155497632),n=this.md5_hh(n,o,r,i,e[a+10],23,-1094730640),i=this.md5_hh(i,n,o,r,e[a+13],4,681279174),r=this.md5_hh(r,i,n,o,e[a+0],11,-358537222),o=this.md5_hh(o,r,i,n,e[a+3],16,-722521979),n=this.md5_hh(n,o,r,i,e[a+6],23,76029189),i=this.md5_hh(i,n,o,r,e[a+9],4,-640364487),r=this.md5_hh(r,i,n,o,e[a+12],11,-421815835),o=this.md5_hh(o,r,i,n,e[a+15],16,530742520),n=this.md5_hh(n,o,r,i,e[a+2],23,-995338651),i=this.md5_ii(i,n,o,r,e[a+0],6,-198630844),r=this.md5_ii(r,i,n,o,e[a+7],10,1126891415),o=this.md5_ii(o,r,i,n,e[a+14],15,-1416354905),n=this.md5_ii(n,o,r,i,e[a+5],21,-57434055),i=this.md5_ii(i,n,o,r,e[a+12],6,1700485571),r=this.md5_ii(r,i,n,o,e[a+3],10,-1894986606),o=this.md5_ii(o,r,i,n,e[a+10],15,-1051523),n=this.md5_ii(n,o,r,i,e[a+1],21,-2054922799),i=this.md5_ii(i,n,o,r,e[a+8],6,1873313359),r=this.md5_ii(r,i,n,o,e[a+15],10,-30611744),o=this.md5_ii(o,r,i,n,e[a+6],15,-1560198380),n=this.md5_ii(n,o,r,i,e[a+13],21,1309151649),i=this.md5_ii(i,n,o,r,e[a+4],6,-145523070),r=this.md5_ii(r,i,n,o,e[a+11],10,-1120210379),o=this.md5_ii(o,r,i,n,e[a+2],15,718787259),n=this.md5_ii(n,o,r,i,e[a+9],21,-343485551),i=this.safe_add(i,s),n=this.safe_add(n,l),o=this.safe_add(o,c),r=this.safe_add(r,h)}return[i,n,o,r]},e.prototype.md5_cmn=function(e,t,i,n,o,r){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(t,e),this.safe_add(n,r)),o),i)},e.prototype.md5_ff=function(e,t,i,n,o,r,a){return this.md5_cmn(t&i|~t&n,e,t,o,r,a)},e.prototype.md5_gg=function(e,t,i,n,o,r,a){return this.md5_cmn(t&n|i&~n,e,t,o,r,a)},e.prototype.md5_hh=function(e,t,i,n,o,r,a){return this.md5_cmn(t^i^n,e,t,o,r,a)},e.prototype.md5_ii=function(e,t,i,n,o,r,a){return this.md5_cmn(i^(t|~n),e,t,o,r,a)},e.prototype.safe_add=function(e,t){var i=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(i>>16);return n<<16|65535&i},e.prototype.bit_rol=function(e,t){return e<<t|e>>>32-t},e}();__reflect(md5.prototype,"md5");var uniLib;!function(e){var t=function(){function t(){}return t.init=function(t){this.scaleMode=t,egret.MainContext.instance.stage.orientation==egret.OrientationMode.LANDSCAPE||egret.MainContext.instance.stage.orientation==egret.OrientationMode.LANDSCAPE_FLIPPED?this.landscape=!0:this.landscape=!1,e.Global.screenWidth=egret.MainContext.instance.stage.stageWidth,e.Global.screenHeight=egret.MainContext.instance.stage.stageHeight,egret.MainContext.instance.stage.addEventListener(egret.Event.RESIZE,this.onResizeNotify,this),this.resetScaleMode(),this.scaleFactor=e.Global.screenHeight/e.Global.designHeight},t.onResizeNotify=function(){e.Global.screenWidth=egret.MainContext.instance.stage.stageWidth,e.Global.screenHeight=egret.MainContext.instance.stage.stageHeight,this.scaleFactor=e.Global.screenHeight/e.Global.designHeight,e.SceneManager.instance.currentScene&&e.SceneManager.instance.currentScene.resize&&e.SceneManager.instance.currentScene.resize()},t.resetScaleMode=function(){this.scaleMode?egret.MainContext.instance.stage.scaleMode=this.scaleMode:egret.Capabilities.isMobile?egret.MainContext.instance.stage.scaleMode=egret.StageScaleMode.FIXED_WIDTH:egret.MainContext.instance.stage.scaleMode=egret.StageScaleMode.SHOW_ALL},t}();e.ScreenUtils=t,__reflect(t.prototype,"uniLib.ScreenUtils")}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function e(){this.checkForMinimumValues=!0,this.minShakeValue=.001,this.minRotationValue=.001}return Object.defineProperty(e,"instance",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e.prototype.shakeScreen=function(t,i,n,o,r,a,s,l){t.x=0,t.y=0,null==i&&(i=2),null==n&&(n=new egret.Point(.5,.5)),null==o&&(o=new egret.Point(1,1)),null==r&&(r=0),null==a&&(a=10),null==s&&(s=50),null==l&&(l=.1),e.instance.doShake_Internal(t,i,n,o,r,a,s,l)},e.prototype.doShake_Internal=function(e,t,i,n,o,r,a,s,l){var c=this;if(void 0===l&&(l=null),null!=e){var h=e.x,u=e.y,d=e.rotation,p=i.x>.5?1:-1,g=i.y>.5?1:-1,m=t,f=r,v=1,b=(new egret.Point(0,0),new egret.Point(0,0),-1),C=0,y=function(){e.x=h,e.y=h,e.rotation=d,e.removeEventListener(egret.Event.ENTER_FRAME,L,c),null!=l&&l()},L=function(){var t=egret.getTimer(),i=b,l=(t-i)/1e3;if(-1==b)return void(b=t);if(b=t,C+=l,C*=a,c.checkForMinimumValues){if(v<=c.minRotationValue)return void y();if(0!=r&&f<=c.minShakeValue)return void y();if(0>=m)return void y()}null!=e&&(e.x=h+p*Math.sin(C)*(n.x*f),e.y=u+g*Math.cos(C)*(n.y*f),o>0&&(e.rotation=d+Math.cos(C)*(o*v)),C>2*Math.PI&&(C=0,f*=1-s,v*=1-s,m--))};e.addEventListener(egret.Event.ENTER_FRAME,L,this)}},e._instance=null,e}();e.ShakeTool=t,__reflect(t.prototype,"uniLib.ShakeTool")}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(){}return t.stringIsNullOrEmpty=function(e){return null==e||0==e.length},t.MD5=function(e){return(new md5).hex_md5(e)},t.ltrim=function(e){return e.replace(/(^\s*)/g,"")},t.rtrim=function(e){return e.replace(/(\s*$)/g,"")},t.trim=function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},t.sTrim=function(e){return e.replace(/\s/g,"")},t.isNetUrl=function(e){if(null==e||e.length<=0)return!1;var t=/^(http|https|HTTP|HTTPS):/;return t.test(e)},t.checkPhone=function(e){return/^1[34578]\d{9}$/.test(e)?!0:!1},t.checkEmail=function(e){return/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/.test(e)?!0:!1},t.setLocalStorage=function(e,t){egret.localStorage.setItem(e,t)},t.getLocalStorage=function(e,t){var i=localStorage.getItem(e);return i=i?decodeURIComponent(i):t},t.clearLocalStorage=function(e){egret.localStorage.removeItem(e)},t.creatMovieClip=function(e,t,i,n){void 0===i&&(i="action"),void 0===n&&(n=-1);var o=RES.getRes(e),r=RES.getRes(t),a=new egret.MovieClipDataFactory(o,r),s=new egret.MovieClip(a.generateMovieClipData(i));return-1!=n&&(s.frameRate=n),s},t.lerp=function(e,t,i){return e+(t-e)*i},t.scrollNumber=function(t,i,n,o,r,a,s,l,c){var h=this;void 0===r&&(r=!1),void 0===a&&(a=1),void 0===s&&(s=null),void 0===l&&(l=50),void 0===c&&(c=0);var u=t.scaleX,d=t.scaleY,p=egret.is(t,"egret.BitmapFont");if(i==n)return egret.setTimeout(s,null,0),t.text=GX.GoldFormat(i,p,!0,!0),{stopCB:function(){}};var g=t,m=0,f=o;.001>f&&(f=.1);var v=0,b=i,C=100;2*C>1e3*o&&(C=1e3*o*.4),1!=a&&egret.Tween.get(g).to({scaleX:u*a,scaleY:d*a},C).call(function(){egret.Tween.removeTweens(g)}),g.text=r?GX.GoldFormat(b,p,!0,!0):GX.GoldFormat(b,p,!0,!1);var y=egret.getTimer(),L=function(){var t=egret.getTimer(),a=t-y;y=t,m+=a/1e3,m>f&&(m=f,egret.clearInterval(v),v=0,egret.Tween.get(g).to({scaleX:u,scaleY:d},C).wait(c).call(function(){egret.Tween.removeTweens(g),0==v&&null!=s&&s.call(null)}));var l=Math.floor(h.lerp(i,n,m/f));l!=b&&(b=l,1==isNaN(b)&&e.Console.log("label txt is NAN fromNum:"+i+" toNum:"+n+" totalTm:"+o),g.text=r?GX.GoldFormat(b,p,!0,!0):GX.GoldFormat(b,p,!0,!1))};v=egret.setInterval(L,null,l);var T=function(){0!=v&&(egret.clearInterval(v),g.text=r?GX.GoldFormat(n,p,!0,!0):GX.GoldFormat(n,p),1!=a&&(egret.Tween.removeTweens(g),egret.Tween.get(g).to({scaleX:u,scaleY:d},C).call(function(){egret.Tween.removeTweens(g)})),v=0,null!=s&&s.call(null),t.text=GX.GoldFormat(n,!0,!0))};return{stopCB:T}},t}();e.Utils=t,__reflect(t.prototype,"uniLib.Utils")}(uniLib||(uniLib={}));